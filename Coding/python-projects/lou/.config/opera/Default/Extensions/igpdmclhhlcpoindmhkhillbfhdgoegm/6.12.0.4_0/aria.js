!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="63124add-3f25-456d-9094-c86d9d58cbd4",e._sentryDebugIdIdentifier="sentry-dbid-63124add-3f25-456d-9094-c86d9d58cbd4")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"6b8c7d279815956b4c3b0bca6d5b331f69476d14"},(()=>{"use strict";var e,t,n,r={15699:(e,t,n)=>{n.d(t,{Sf:()=>u,ZY:()=>d,ed:()=>f,ex:()=>p,gH:()=>v,zy:()=>m});var r=n(15861),a=n(64687),o=n.n(a),i=n(57406),s=n(53979),c=n(38856),l=new i.mQ({env:(0,c.a)(),name:"chrome API"});function d(e){return new Promise((function(t){chrome.windows.getLastFocused((function(n){e?e(n):t(n)}))}))}var u=function(){return"undefined"!=typeof chrome&&chrome.runtime.getManifest?chrome.runtime.getManifest().version:"0.0.0"},f=function(e,t){chrome.windows.get(e,t)},p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{windowTypes:["normal"]};chrome.windows.onFocusChanged.hasListener(e)||chrome.windows.onFocusChanged.addListener(e,t)},v=function(e){chrome.windows.onFocusChanged.removeListener(e)},m=function(){var e=(0,r.Z)(o().mark((function e(t){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Oe)(t);case 2:if(n=e.sent,!(r=n.find((function(e){return e.active})))){e.next=8;break}return e.abrupt("return",new Promise((function(e){chrome.tabs.sendMessage(Number(r.id),{text:"report_webpage_content"},(function(t){l.info("getWebpageContentOfAnActiveTab -> content \n",null!=t?t:"NO EXTRACTABLE CONTENT FOUND!"),e(null!=t?t:"")}))})));case 8:return l.error("Error: You've requested webpage content of an active tab, but there's no active tab!"),e.abrupt("return","");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},60243:(e,t,n)=>{n.d(t,{$p:()=>g,Ad:()=>b,CZ:()=>v,G1:()=>l,MW:()=>m,OF:()=>x,SI:()=>u,TG:()=>h,cG:()=>c,rV:()=>f,vb:()=>p});var r,a,o=n(89062),i=n(4942),s=n(56336),c={ORGANIZE_TABS:"organize-tabs"},l=(0,i.Z)({},c.ORGANIZE_TABS,"organize_tabs"),d=(0,i.Z)({},c.ORGANIZE_TABS,Boolean(null===(r=opr.shodanPrivate)||void 0===r?void 0:r.startRecording)&&Boolean(null===(a=opr.shodanPrivate)||void 0===a?void 0:a.stopRecording)),u=Object.values(c).reduce((function(e,t){return d[t]?[].concat((0,o.Z)(e),[t]):e}),[]),f=!1,p=["ar"],v=(s.EB,""),m=25,h=200,g="opera developer",x=100,b={GPT:"GPT-4o",GEMINI:"Gemini 2.0",IMAGEN:"Imagen 3",GPT_IMAGE:"GPT Image 1"}},53744:(e,t,n)=>{n.d(t,{F0:()=>d,L1:()=>c,O8:()=>s,OZ:()=>l,W6:()=>u});var r=n(93324),a=n(67294),o=n(23586),i=n(50198),s=(n(68279),function(e,t){(0,a.useEffect)((function(){var n=function(n){var r=e.current,a=n.target;null!==r&&null!==a&&document.body.contains(r)&&document.body.contains(a)&&(r.contains(a)||t())};return window.addEventListener("click",n),function(){window.removeEventListener("click",n)}}),[t,e])}),c=function(){return{isCurrentThemeDark:(0,o.YWL)().isDarkThemeEnabled}},l=function(e,t,n){var o=(0,a.useState)(!1),i=(0,r.Z)(o,2),s=i[0],c=i[1],l=(0,a.useState)(!0),d=(0,r.Z)(l,2),u=d[0],f=d[1];return(0,a.useEffect)((function(){var r=function(){var r;if(null!=e&&e.current&&null!=t&&null!==(r=t.current)&&void 0!==r&&r.lastChild){var a,o=e.current.getBoundingClientRect(),i=(null===(a=t.current)||void 0===a?void 0:a.lastChild).getBoundingClientRect();o&&i&&(c(o.top<i.top+("bottom"===n?i.height:0)),f(!s))}};return r(),window.addEventListener("scroll",r),window.addEventListener("resize",r),function(){window.removeEventListener("scroll",r),window.removeEventListener("resize",r)}})),{isListUnder:s,isListAbove:u}},d=function(){var e=(0,a.useRef)(null),t=(0,a.useState)(!1),n=(0,r.Z)(t,2),o=n[0],s=n[1],c=(0,a.useState)(!1),l=(0,r.Z)(c,2),d=l[0],u=l[1],f=function(){if(e.current){var t=e.current,n=t.scrollTop,r=t.scrollHeight,a=t.clientHeight;s(n>0),u(n+a<r)}};return(0,a.useEffect)((function(){var t=e.current;if(t)return t.addEventListener("scroll",f),setTimeout(f,100*i.KP),function(){return t.removeEventListener("scroll",f)}}),[]),{showTopBorder:o,showBottomBorder:d,containerRef:e}};function u(e){var t=(0,a.useRef)(e);return(0,a.useEffect)((function(){t.current=e})),(0,a.useMemo)((function(){return function(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return null===(e=t.current)||void 0===e?void 0:e.call.apply(e,[t].concat(r))}}),[])}},7226:(e,t,n)=>{n.d(t,{$T:()=>o.$T,BY:()=>o.BY,Bh:()=>o.Bh,EK:()=>o.EK,FM:()=>r.F,J$:()=>s.J,Mf:()=>i.M,OZ:()=>a.OZ,Pv:()=>a.Pv,VZ:()=>a.VZ,Vy:()=>o.Vy,Z$:()=>o.Z$,e1:()=>o.e1,f6:()=>a.f6,ff:()=>a.ff,ix:()=>a.ix,l9:()=>o.l9,n5:()=>a.n5,oA:()=>o.oA,qP:()=>a.qP,vy:()=>a.vy,xM:()=>a.xM,z4:()=>o.z4,zT:()=>r.z});var r=n(74721),a=n(76453),o=n(22055),i=(n(94361),n(57112)),s=n(86744)},22055:(e,t,n)=>{n.d(t,{$T:()=>_,BY:()=>A,Bh:()=>j,EK:()=>k,Vy:()=>b,Z$:()=>O,e1:()=>E,l9:()=>I,oA:()=>C,z4:()=>y});var r,a,o,i=n(15861),s=n(64687),c=n.n(s),l=n(57406),d=n(38856),u=n(31372),f=n(58489),p=new l.mQ({env:(0,d.a)(),name:"SHODAN API"}),v="NEW SHODAN API NOT SUPPORTED",m="isCommandLineVisible"in((null===(r=opr)||void 0===r?void 0:r.shodanPrivate)||{}),h="onSendImageToAriaClicked"in((null===(a=opr)||void 0===a?void 0:a.shodanPrivate)||{}),g="onAddressBarPromptSent"in((null===(o=opr)||void 0===o?void 0:o.shodanPrivate)||{});function x(e){return new Error("Shodan API error",{cause:e})}function b(){opr.shodanPrivate.closeCommandLine()}function y(){return w.apply(this,arguments)}function w(){return(w=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m?(t=function(e){e||opr.shodanPrivate.showCommandLine()},m?opr.shodanPrivate.isCommandLineVisible(t):p.info(v)):p.info(v);case 1:case"end":return e.stop()}var t}),e)})))).apply(this,arguments)}function j(){return"switchToNormalWindow"in opr.shodanPrivate&&"AriaRequestSource"in opr.shodanPrivate}function _(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(j()){var t=e?opr.shodanPrivate.AriaRequestSource.COMMAND_LINE:opr.shodanPrivate.AriaRequestSource.SIDEBAR_PANEL;opr.shodanPrivate.switchToNormalWindow(t)}else p.info(v,"switchToNormalWindow")}var C=function(e){return function(t){h?opr.shodanPrivate.onSendImageToAriaClicked.addListener((function(n){(0,f.vH)({action:u.VV.MEDIA_UPLOAD,element:u.Y3.CHAT,context:u.hG.CONTEXT_MENU,str_value:"image",ai_provider:(0,f.V_)(null==e?void 0:e.ai_provider)}),t(n)})):p.info(v)}},k=function(e){return function(t){h?opr.shodanPrivate.onSendImageToAriaClicked.removeListener((function(n){(0,f.vH)({action:u.VV.MEDIA_UPLOAD,element:u.Y3.CHAT,context:u.hG.CONTEXT_MENU,str_value:"image",ai_provider:(0,f.V_)(null==e?void 0:e.ai_provider)}),t(n)})):p.info(v)}};function O(e){g?opr.shodanPrivate.onAddressBarPromptSent.addListener(e):p.info(v)}function A(e){g?opr.shodanPrivate.onAddressBarPromptSent.removeListener(e):p.info(v)}function E(){return new Promise((function(e){try{return opr.shodanPrivate.distillPage((function(t){p.info("distillPage -> content \n",t),e(t)}))}catch(e){return p.info("Page distillation is not possible due to:",e),""}}))}function I(){return S.apply(this,arguments)}function S(){return(S=(0,i.Z)(c().mark((function e(){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n;"printActivePageToPdf"in((null===(n=opr)||void 0===n?void 0:n.shodanPrivate)||{})?opr.shodanPrivate.printActivePageToPdf((function(n){chrome.runtime.lastError?"File size too big"===chrome.runtime.lastError.message?t("error_too_big"):"PDF has too many pages"===chrome.runtime.lastError.message?t("error_too_long"):t("file_generic_error"):e(n)})):t(x(v))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},57112:(e,t,n)=>{n.d(t,{M:()=>o});n(64687);var r=new(n(57406).mQ)({name:"OperaTabsPrivatApi",env:"development"});function a(e){return e in opr.tabsPrivate}function o(e,t){return new Promise((function(n){if(a("getAllInWorkspace"))try{opr.tabsPrivate.getAllInWorkspace(t,e,n)}catch(t){try{opr.tabsPrivate.getAllInWorkspace(e,n)}catch(e){r.error("No getAllInWorkspace is supported")}}else n([])}))}},58489:(e,t,n)=>{n.d(t,{Aj:()=>x,V_:()=>w,ab:()=>b,ki:()=>y,vH:()=>h});var r=n(93324),a=n(4942),o=n(15861),i=n(64687),s=n.n(i),c=n(26382),l=n(54115),d=n(34134),u=n(47772),f=n(50198),p=n(25108);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var h=function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:if(n=e.sent,(0,l.BB)()){e.next=6;break}return p.info("%c TEST: Stat that would be reported: ","background: #0cc; color: #000",n),e.abrupt("return");case 6:p.info("%c Reporting Stat:","background: #0cc; color: #000",n),opr.statsPrivate.recordSessionEvent("feature_events.event_ai",JSON.stringify(n),opr.statsPrivate.Priority.NORMAL);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,o.Z)(s().mark((function e(t){var n,a,o,i,c,l,d,f,p,v,h;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.action,a=t.element,o=t.context,i=t.str_value,c=t.int_value,l=t.map_of_ints,d=t.ai_provider,f=t.model,p=void 0===f?"Aria":f,e.t0=m,e.t1={action:n,element:a,context:o,model:p,ai_provider:d},e.t2=(0,u.dp)(),!e.t2){e.next=9;break}return e.next=7,j();case 7:e.t3=e.sent,e.t2={account_type:e.t3};case 9:return e.t4=e.t2,v=(0,e.t0)(e.t1,e.t4),null===p&&delete v.model,h={str_value:i,int_value:c,map_of_ints:l},Object.entries(h).forEach((function(e){var t=(0,r.Z)(e,2),n=t[0],a=t[1];a&&(v[n]=a)})),e.abrupt("return",v);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(e){switch(e){case"command-line":return c.hG.COMMAND_BAR;case"selected-content-prompt":return c.hG.HIGHLIGHT;case"sidebar":return c.hG.SIDEBAR;case"tab-view":return c.hG.BROWSER_TAB}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"PageContext",n=arguments.length>2?arguments[2]:void 0;return e===c.Cm.EXPLORE_WEBPAGE?"WebpageContext:".concat(n,":explore_topic"):e===c.Cm.SUMMARIZE?"WebpageContext:".concat(n,":summarize_page"):"TabOrganize"===t?"OrganizeTabs:".concat(e):void p.warn("Unable to map suggestion prompt")},y=function(e){return f.v5.includes(e)?"image":f.Go.includes(e)?"audio":f.jn.includes(e)?"video":f.JH.includes(e)?"pdf":f.tZ.includes(e)?"spreadsheet":f.V4.includes(e)?"doc":f.YF.includes(e)?"json":void p.warn("Unable to map file type prompt")},w=function(e){if(e)switch(e){case"openai":return"OpenAi";case"google":return"Google";default:return"Other"}},j=function(){var e=(0,o.Z)(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.So)();case 2:return t=e.sent,e.abrupt("return",t?c.HQ.REGULAR:c.HQ.ANONYMOUS);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},53979:(e,t,n)=>{n.d(t,{Oe:()=>f,RB:()=>d,ZW:()=>h,iE:()=>v,nU:()=>u});var r=n(15861),a=n(64687),o=n.n(a),i=n(57406),s=n(38856),c=n(7226),l=new i.mQ({env:(0,s.a)(),name:"tab utils"}),d=(chrome.runtime.getURL&&chrome.runtime.getURL("/aria.html"),function(e,t){var n={active:!0,url:e};if(!t)return chrome.tabs.create(n);chrome.tabs.create(n,t)});function u(e){var t;null===(t=chrome.tabs)||void 0===t||t.getCurrent(e)}function f(e){return p.apply(this,arguments)}function p(){return(p=(0,r.Z)(o().mark((function e(t){var n,r,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.J$)(t);case 2:return n=e.sent,r=[],e.next=6,(0,c.Mf)(n,t);case 6:return a=e.sent,r=a.filter((function(e){var t=e.id;return t>0})).map((function(e){return{id:String(e.id),active:e.active,url:e.url,title:e.title,inactive_time:e.inactiveTime,pinned:e.pinned}})),l.info("Organize tabs info",r,"for window id",t),e.abrupt("return",r);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(){return m.apply(this,arguments)}function m(){return(m=(0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.topSites.get((function(t){var n=t.map((function(e){return{domain:new URL(e.url).hostname}}));e(n)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){chrome.tabs.create(e,(function(e){chrome.runtime.lastError?n(chrome.runtime.lastError):t(e)}))}))}},63119:(e,t,n)=>{n.d(t,{AW:()=>p,Cp:()=>o,Dc:()=>v,F1:()=>d,HX:()=>c,Mx:()=>a,N2:()=>u,X0:()=>i,hB:()=>l,qf:()=>s,yc:()=>f});var r=n(60243),a=function(e,t){var n;s(null===(n=e.current)||void 0===n?void 0:n.lastChild,"end",t)},o=function(e,t){var n;s(null===(n=e.current)||void 0===n?void 0:n.firstChild,"center",t)},i=function(e){var t=e.current;t&&setTimeout((function(){t.scrollTop=t.scrollHeight}),r.MW)},s=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"smooth";null!=e&&e.scrollIntoView&&setTimeout((function(){return e.scrollIntoView({behavior:n,block:t,inline:"nearest"})}),r.MW)},c=function(){var e=new MouseEvent("mousedown",{view:window,bubbles:!0,cancelable:!0});document.body.dispatchEvent(e)},l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{behavior:"smooth"};e.scrollIntoView(t)},d=function(e){var t;null!==(t=e.parentElement)&&void 0!==t&&t.scrollIntoView&&e.parentElement.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})},u=function(e){if(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop;return Math.abs(n-Math.round(r)-t)<=1}return!1},f=function(e,t,n){e&&(n||t)&&d(e)};function p(e){var t=["pre",".hljs",".table-wrapper"];window.renderingHighlights="mask"===e;for(var n=0;n<t.length;n++)document.querySelectorAll(t[n]).forEach((function(t){"mask"===e?t.classList.add("!overflow-hidden"):t.classList.remove("!overflow-hidden")}))}var v=function(e,t,n){var r,a;a=t?e?"opera-gx-dark":"opera-gx":n?e?"opera-air-dark":"opera-air":e?"opera-dark":"opera",null===(r=document.querySelector("html"))||void 0===r||r.setAttribute("data-theme",a)}},38856:(e,t,n)=>{n.d(t,{$o:()=>m,AK:()=>v,AW:()=>s.AW,BB:()=>c.BB,Cg:()=>N,Cp:()=>s.Cp,Dc:()=>s.Dc,F0:()=>x,F1:()=>s.F1,FR:()=>O,HX:()=>s.HX,Lh:()=>E,Mx:()=>s.Mx,N2:()=>s.N2,Ur:()=>l.Ur,Vs:()=>_,Wf:()=>w,X0:()=>s.X0,X8:()=>d.X,Y8:()=>c.Y8,Yo:()=>p,_f:()=>l._f,a:()=>c.a,aD:()=>u.aD,cL:()=>j,fm:()=>u.fm,hB:()=>s.hB,nu:()=>b,pb:()=>I,qf:()=>s.qf,r8:()=>c.r8,u2:()=>A,wE:()=>h,yc:()=>s.yc,z7:()=>C,zn:()=>k});var r=n(15861),a=n(93324),o=n(64687),i=n.n(o),s=n(63119),c=n(54115),l=n(14270),d=(n(6642),n(34470),n(14664)),u=n(19718),f=(n(31147),n(25108)),p=function(e){window.open(e,"_blank").opener=null},v=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return"string"==typeof e&&""!==e})).join(" ")},m=function(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches},h=function(e,t,n){var r;return"".concat(null!==(r=e.name)&&void 0!==r?r:e.displayName,"-").concat(t,"-").concat(n)},g=0,x=function(){return(new Date).getTime().toString()+Math.floor(100*Math.random()).toString()+(++g).toString()},b=function(){var e=new Date;return"conversation-".concat(e.getTime())},y=function(e){return String(e).padStart(2,"0")},w=function(){var e=-(new Date).getTimezoneOffset(),t=Math.abs(e);return 0===e?"Z":[e>0?"+":"-",y(Math.floor(t/60)),":",y(t%60)].join("")},j=function(e,t){var n=t-e,r=Math.random(),a=Math.floor(r*n);return a+=e};function _(e){return new Promise((function(t){return setTimeout(t,e)}))}var C=function(e){if(!e.length)return"";try{var t=new URL(e).hostname;return t.startsWith("www.")?t.replace("www.",""):t}catch(t){return f.error("Error during processing url:",e,t.message||t),""}},k=function(e){if(!e.includes("/"))return e;var t=e.split("/"),n=(0,a.Z)(t,3),r=n[1];return n[2]||r||e};function O(e){return Object.entries(e)}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:256;return"".concat("https://www.google.com/s2/favicons","?domain=").concat(e,"&sz=").concat(t)}function E(e){try{var t=new URL(e);return"http:"!==t.protocol&&"https:"!==t.protocol?(f.warn("Wrong protocol for cache storage. Replacing on HTTPS protocol..."),"https://".concat(t.pathname).concat(t.search)):t.toString()}catch(e){return f.error("Build url for cache storage failed, cause:",e),""}}function I(e,t){return S.apply(this,arguments)}function S(){return(S=(0,r.Z)(i().mark((function e(t,n){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open(t);case 2:return r=e.sent,e.prev=3,e.next=6,r.match(n);case 6:return e.abrupt("return",e.sent);case 9:return e.prev=9,e.t0=e.catch(3),f.error("Get response from cache:",r,"failed, cause:",e.t0),e.abrupt("return");case 13:case"end":return e.stop()}}),e,null,[[3,9]])})))).apply(this,arguments)}function N(e,t,n){return R.apply(this,arguments)}function R(){return(R=(0,r.Z)(i().mark((function e(t,n,r){var a;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open(t);case 2:if(a=e.sent,e.prev=3,!r){e.next=9;break}return e.next=7,a.put(n,r);case 7:e.next=11;break;case 9:return e.next=11,a.add(n);case 11:e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",e.t0);case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}},19718:(e,t,n)=>{n.d(t,{aD:()=>a,fm:()=>r});var r=function(e){return e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()},a=function(e){return e.replace(/_(.)/g,(function(e,t){return t.toUpperCase()}))}},16634:(e,t,n)=>{n.d(t,{B9:()=>l,VU:()=>s,wO:()=>c});var r,a=n(13771),o=new RegExp(/mac/),i="Aria",s=function(e){var t=document.createElement("canvas").getContext("2d");return t.font="400 14px 'Be Vietnam'",t.measureText(e).width};o.test(null===(r=window.navigator)||void 0===r?void 0:r.platform.toLowerCase());function c(e){return!e||e===i}var l=function(e,t){var n="production"===t?a.RN.PROD:a.RN.STG;return e===a.FU.EMAIL?"https://auth.".concat(n,"/account/authenticate/email"):"https://auth.".concat(n,"/account/social/v4/login?service=auth&provider=").concat(e,"&create_user_if_not_exists=1")}},70437:(e,t,n)=>{n.d(t,{xE:()=>x,zx:()=>r.z,hU:()=>k,Rg:()=>p,j2:()=>O,_X:()=>a._});var r=n(77783),a=n(1609),o=n(27411);const i=n.p+"assets/1efab80b1a7c97c2eb3c.svg",s=n.p+"assets/9c86d7fb996cb01953ea.svg";var c=n(7013);const l=n.p+"assets/3166e7806eb1bc00c1f9.svg";var d=n(38856),u=n(68279),f=n(85893),p=function(e){var t=e.state,n=e.onClick,r=e.className,a={radius:{operaOne:"rounded-aria-radius-3",operaGx:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-5"},defaultIcon:{operaOne:i,operaGx:s,operaAir:i},microphoneIcon:c,processingIcon:l,defaultIconColor:{operaOne:"white",operaGx:"white",operaAir:"var(--text-tb)"},disabledIconColor:{operaOne:"var(--text-t4)",operaGx:"white",operaAir:"var(--secondary-s3-bg-icons)"},defaultBg:"bg-primary-p1-cobalt-buttons text-text-tb hover:bg-primary-p2-hover-buttons cursor-pointer",processingBg:"bg-primary-p1-cobalt-buttons text-text-tb hover:bg-primary-p2-hover-buttons cursor-pointer",disabledBg:{operaOne:"bg-primary-p3-disabled-buttons text-text-t4 cursor-not-allowed",operaGx:"bg-primary-p3-disabled-buttons text-text-t4 cursor-not-allowed",operaAir:"bg-levels-l3-cards text-text-t4 cursor-not-allowed"},microphoneBg:"bg-primary-p1-cobalt-buttons text-text-tb hover:bg-primary-p2-hover-buttons cursor-pointer"},p=(0,u.o6)(a,["radius","defaultIcon","processingIcon","defaultIconColor","disabledIconColor","defaultBg","disabledBg","processingBg","microphoneBg","microphoneIcon"]),v={default:p.defaultIcon,processing:p.processingIcon,disabled:p.defaultIcon,voice:p.microphoneIcon},m={default:p.defaultIconColor,processing:p.defaultIconColor,disabled:p.disabledIconColor,voice:p.defaultIconColor},h={default:p.defaultBg,processing:p.processingBg,disabled:p.disabledBg,voice:p.microphoneBg};return(0,f.jsx)("button",{tabIndex:-1,onClick:n,className:(0,d.AK)("flex items-center justify-center",r||"h-10 w-10",p.radius,h[t]),children:(0,f.jsx)(o.S,{src:v[t],size:16,color:m[t]})})},v=n(30811);const m=n.p+"assets/66292949a3a6849abd86.svg";var h=n(42376),g=n(89250),x=function(e){var t=e.label,n=e.onClick,r=e.disabled,a=e.textStyle,i=(0,v.$G)().t,s=(0,g.s0)(),c=t||i("back"),l=(0,u.o6)({buttonText:{operaOne:"text-button-s",operaGx:"text-header-s",operaAir:"text-button-m"}},["buttonText"]);return(0,f.jsxs)("button",{tabIndex:-1,onClick:function(){n?n():s(-1)},className:(0,d.AK)("flex h-4 select-none flex-row items-center justify-center gap-2 text-center",l.buttonText,r?"text-text-t3-text-gray":"text-text-t1-text-active-icons"),children:[(0,f.jsx)(o.S,{config:{operaOne:{light:m,dark:h,color:r?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)"}}}),(0,f.jsx)("p",{className:(0,d.AK)(a),children:c})]})},b=n(67294),y=n(92471),w=n(54322),j=n(50389),_=n(23586),C=(0,b.forwardRef)((function(e,t){var n,r=e.type,a=e.disabled,i=e.className,s=e.onClick,c=e.icon,l=e.dataTestId,p=e.tabIndex,v=e.onKeyUp,m=e.onKeyDown,h=e.iconSize,g=e.children,x=e.title,C=e.border,k=e.caption,O=e.disabledClickable,A=(0,b.useRef)(null),E=t||A,I=(0,u.XI)(E),S=(0,_.YZY)().isGx,N=(0,b.useMemo)((function(){return{buttonRadius:"rounded-aria-radius-3",cursor:a&&!O?"cursor-not-allowed":"cursor-pointer",operaAir:{buttonRadius:"rounded-aria-radius-4"},operaGx:{buttonRadius:"rounded-aria-radius-2"}}}),[a,O]),R=(0,b.useMemo)((function(){return{icon:c,size:h||16,color:a&&!O?"var(--text-t4)":"var(--text-tb)",buttonBackground:a?"bg-primary-p3-disabled-buttons":I?"bg-primary-p2-hover-buttons":"bg-primary-p1-cobalt-buttons",operaGx:{color:"var(--opera-gx-font-color)",buttonAnimation:"duration-200 ease-in-out"},operaAir:{color:a&&!O?"var(--secondary-s3-bg-icons)":"var(--text-tb)",buttonBackground:a?"bg-levels-l3-cards":I?"bg-primary-p2-hover-buttons":"bg-primary-p1-cobalt-buttons"}}}),[a,O,c,h,I]),T=(0,b.useMemo)((function(){return{icon:c,size:h||16,operaOne:{color:a?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",buttonBackground:a?"bg-secondary-s4-surface-overlay":I?"bg-levels-l2-hover":"bg-secondary-s3-bg-icons"},operaGx:{color:a?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",buttonBackground:a?"bg-secondary-s4-surface-overlay":I?"bg-levels-l2-hover":"bg-secondary-s3-bg-icons"},operaAir:{shadow:"air-level-02-shadow",color:a?"var(--secondary-s3-bg-icons)":"var(--text-t1-text-active-icons)",buttonBackground:a?"bg-levels-l3-cards":I?"bg-text-t3-text-gray":"bg-secondary-s3-bg-icons"}}}),[a,c,h,I]),M=(0,b.useMemo)((function(){return{icon:c,size:h||16,buttonBackground:a?"bg-transparent":I?"bg-levels-l2-hover":"bg-transparent",color:a?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",buttonBorder:C&&"border border-secondary-s1-selected-stroke",operaGx:{buttonAnimation:"duration-200 ease-in-out"},operaAir:{buttonBorder:"",color:a?"var(--secondary-s3-bg-icons)":"var(--text-t1-text-active-icons)",buttonBackground:a?"bg-transparent":I?"bg-text-t3-text-gray":"bg-transparent"}}}),[C,a,c,h,I]),P=(0,b.useCallback)((function(e){return a?"bg-transparent":I?e:"bg-transparent"}),[a,I]),D=(0,b.useMemo)((function(){return{icon:c,size:h||16,buttonBackground:P("bg-levels-l2-hover"),buttonBorder:"",buttonRadius:"rounded-aria-radius-3",color:a?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",operaGx:{buttonAnimation:"duration-200 ease-in-out"},operaAir:{borderRadius:"rounded-aria-radius-4",buttonBackground:P("bg-secondary-s3-bg-icons")}}}),[a,P,c,h]),G={icon:c,size:h||16,buttonBackground:"bg-transparent hover:bg-levels-l2-hover",buttonBorder:"",buttonRadius:"",color:a?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)"};switch(r){case"primary":n=R;break;case"secondary":n=T;break;case"tertiary":n=M;break;case"context-menu":n=D;break;case"transparent":n=G}var L=(0,b.useMemo)((function(){return{primary:I?w:y,secondary:I?w:y,tertiary:"",menu:"","context-menu":"",radio:"","sia-multimodal":"",sia:"",transparent:""}}),[I]),B=(0,b.useCallback)((function(){return"primary"===r?a?"--primary-p3-disabled-buttons":I?"--primary-p2-hover-buttons":"--primary-p1-cobalt-buttons":a?"--secondary-s1-selected-stroke":I?"--levels-l2-hover":"--secondary-s2-tertiary-need-to-fix"}),[a,I,r]),Z=(0,b.useMemo)((function(){return{WebkitMaskImage:"linear-gradient(90deg, rgba(0, 0, 0, 1) 0%, rgba(0, 0, 0, 1) calc(100% - 14px), transparent calc(100% - 14px), transparent), url(".concat(a?j:L[r],")"),WebkitMaskSize:"contain",WebkitMaskRepeat:"no-repeat",WebkitMaskPosition:"right",border:"none",backgroundColor:"var(".concat(B(),")"),color:"var(--opera-gx-font-color)"}}),[a,B,L,r]),H=S&&["primary"].includes(r),F=(0,u.o6)(N,["buttonRadius","cursor"]),U=F.buttonRadius,K=F.cursor,V=(0,u.o6)(n,["buttonAnimation","buttonBackground","buttonBorder","shadow"]),W=V.buttonAnimation,z=V.buttonBackground,Y=V.buttonBorder,q=V.shadow;return(0,f.jsxs)("button",{disabled:O?void 0:a,ref:E,onKeyUp:v,onKeyDown:m,tabIndex:null!=p?p:-1,"data-testid":l,className:(0,d.AK)("relative flex h-8 w-8 shrink-0 items-center justify-center",U,W,z,Y,K,q,i),onClick:s,title:x,style:H?Z:{},children:[g||(0,f.jsx)(o.S,{config:n}),k&&(0,f.jsx)("p",{className:(0,d.AK)("absolute -bottom-6 w-max"),children:k})]})})),k=(0,b.memo)(C),O=function(e){var t=e.children,n=e.className,r=e.onClick,a=e.onMouseEnter,o=e.onMouseLeave,i=e.onKeyUp,s=e.testId,c=e.tabIndex,l=void 0===c?-1:c,p=(0,u.o6)({rounded:"rounded-aria-radius-3",operaGx:{rounded:"rounded-aria-radius-2"},operaAir:{rounded:"rounded-aria-radius-5"}},["rounded"]);return(0,f.jsx)("div",{role:"button","data-testid":s||void 0,className:(0,d.AK)("text-button-s flex h-10 cursor-pointer select-none flex-row items-center justify-start px-aria-4 py-aria-3 text-text-t1-text-active-icons outline-none hover:bg-levels-l2-hover",p.rounded,n),tabIndex:l,onClick:r,onMouseEnter:a,onMouseLeave:o,onKeyUp:i,children:t})}},4773:(e,t,n)=>{n.d(t,{Im:()=>i,xE:()=>c.xE,zx:()=>c.zx,hn:()=>D.h,Dd:()=>E.D,u1:()=>A,oX:()=>P,hU:()=>c.hU,Rg:()=>c.Rg,j2:()=>c.j2,P_:()=>O,fx:()=>s,_X:()=>c._X,sm:()=>T,Kx:()=>f,oi:()=>u,u:()=>l.u});var r=n(38856),a=n(68279),o=n(85893),i=function(e){var t=e.onBackButtonClick,n=e.title,i=(0,a.o6)({headerWrapper:{operaGx:"border-image-1-header",operaAir:"border-transparent"},title:{operaOne:"!font-normal",operaGx:"!font-semibold"}},["headerWrapper","title"]);return(0,o.jsxs)("div",{id:"aria_header",className:(0,r.AK)("relative box-border flex h-14 min-h-14 w-full items-center justify-center border-b border-secondary-s1-selected-stroke p-3",i.headerWrapper),children:[(0,o.jsx)("div",{className:"absolute left-3",children:(0,o.jsx)(c.xE,{onClick:t})}),(0,o.jsx)("span",{className:(0,r.AK)("text-subheader-m",i.title),children:n})]})},s=(n(93919),function(e){var t=e.render,n=(0,a.u)(),r=n.handleScreenshotClipboard,i=n.screenshotClipboardAreaRef,s=n.clipboardPending;return(0,o.jsx)("div",{ref:i,children:t({handleScreenshotClipboard:r,clipboardPending:s})})}),c=n(70437),l=(n(61393),n(61401),n(10181)),d=(n(24871),n(67294)),u=(0,d.forwardRef)((function(e,t){var n=e.className,i=e.onFocus,s=e.onChange,c=e.onKeyDown,l=e.onKeyUp,d=e.value,u=e.maxLength,f=e.placeholder,p=e.defaultValue,v=(0,a.o6)({element:"outline-none px-2 py-1 min-w-10",background:"bg-secondary-s2-tertiary-need-to-fix",text:"text-text-t1-text-active-icons text-body-m",rounded:"rounded-aria-radius-3",operaGx:{background:"bg-levels-l0-extension-bg"},operaAir:{rounded:"rounded-full",background:"bg-levels-l4-message-bg"}},["element","background","text","rounded"]);return(0,o.jsx)("input",{ref:t,className:(0,r.AK)(v.element,v.background,v.text,v.rounded,n),type:"text",maxLength:u,value:d,onFocus:i,onChange:s,onKeyDown:c,onKeyUp:l,placeholder:f,defaultValue:p})})),f=(0,d.forwardRef)((function(e,t){var n=e.className,i=e.id,s=e.name,c=e.testId,l=e.onInput,d=e.onFocus,u=e.onChange,f=e.onKeyDown,p=e.onKeyUp,v=e.value,m=e.disabled,h=e.maxLength,g=e.placeholder,x=e.defaultValue,b=e.invalid,y={outer:"rounded-aria-radius-3 bg-levels-l3-cards overflow-hidden py-2 pl-2 pr-2 border",outerBorderColor:b?"border-states-error":"border-transparent",textarea:"text-body-m outline-none p-1 placeholder-text-t3-text-gray text-text-t1-text-active-icons bg-transparent",scrollbar:"hover-scrollbar box-border resize-none"},w=(0,a.o6)(y,["outer","textarea","scrollbar","outerBorderColor"]);return(0,o.jsx)("div",{className:(0,r.AK)(w.outer,w.outerBorderColor,n),children:(0,o.jsx)("textarea",{ref:t,name:s,id:i,"data-testid":c,"data-invalid":!!b,className:(0,r.AK)("h-full w-full resize-none",w.textarea,w.scrollbar),maxLength:h,value:v,onFocus:d,onChange:u,onKeyDown:f,onKeyUp:p,onInput:l,placeholder:g,defaultValue:x,disabled:m,children:v})})})),p=n(4942),v=n(47643),m=n(30811),h=n(23586),g=n(31372),x=n(72075),b=n(58489),y=n(16634),w=n(27411),j=n(50198);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,p.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=new Map;const O=function(){var e=(0,h.fvp)().networkEnvironment,t=(0,h.Uwy)().userCapabilities,n=(0,h.HhX)().setAccountlessLoginData,i=(0,m.$G)().t,s=(0,a.lm)(),l=s.closeNotification,u=s.notificationIcon,f=s.notifications,p=(0,a.oH)().isAriaInTabView,_={error:"bg-states-error",info:"bg-secondary-s1-selected-stroke",success:"bg-states-correct"},O=(0,d.useCallback)((function(e){return function(){l(e)}}),[l]),A=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:j.YE,n=window.setTimeout((function(){window.clearTimeout(n),k.delete(e),l(e)}),t);k.set(e,n)},E=function(e){var t=k.get(e);window.clearTimeout(t),k.delete(e)},I=function(e){return function(){E(e)}},S=function(e){return function(){k.get(e)&&E(e),A(e,3*j.sh)}};(0,d.useEffect)((function(){f.forEach((function(e){k.has(e.id)||A(e.id)}))}),[f]);var N=(0,d.useCallback)((function(){var e=p?g.hG.BROWSER_TAB:g.hG.SIDEBAR;n({context:e,initTime:Date.now(),source:"limit_message"}),(0,b.vH)({action:g.VV.CLICK,context:e,element:g.Y3.ONBOARDING,str_value:"start:log_in:limit_message",ai_provider:(0,b.V_)(null==t?void 0:t.ai_provider)})}),[p,n,null==t?void 0:t.ai_provider]),R=(0,a.o6)({notification:"bg-levels-l5-primary",text:"text-text-t1-text-active-icons text-body-s",border:"border border-secondary-s1-selected-stroke rounded-aria-radius-3",separator:"border-l border-solid border-secondary-s1-selected-stroke",icon:"!w-6 !h-6 min-w-6 rounded-aria-radius-2",operaAir:{notification:"bg-levels-l5-primary air-level-02 border-secondary-s1-selected-stroke border",border:"rounded-aria-radius-3",separator:""}},["notification","border","text","separator","icon"]);return f.length?(0,o.jsx)("div",{className:(0,r.AK)("absolute right-0 top-14 z-[11] w-full",!p&&"notifications-wrapper"),children:f.map((function(t){var n=t.id,a=t.link,s=t.text,l=t.type;return(0,o.jsxs)("div",{className:(0,r.AK)("mx-auto mb-2 flex max-w-fit items-center justify-between overflow-hidden pl-2  text-center",R.text,R.border,R.notification),onMouseEnter:I(n),onMouseLeave:S(n),children:[(0,o.jsx)("div",{className:(0,r.AK)("flex items-center justify-center",_[l],R.icon),children:(0,o.jsx)(w.S,{color:"info"===l?"var(--text-t1-text-active-icons)":void 0,src:u(l)})}),(0,o.jsx)("div",{className:"mx-2",children:a?(0,o.jsx)(m.cC,{i18nKey:i(s),components:{link1:(0,o.jsx)(x.h,C({className:"font-bold underline",to:a},a===(0,y.B9)(j.FU.EMAIL,e)&&{onClick:N}))}}):s}),(0,o.jsxs)("div",{className:"flex h-10 items-center",children:[(0,o.jsx)("div",{className:(0,r.AK)("h-full",R.separator)}),(0,o.jsx)(c.hU,{type:"context-menu",onClick:O(n),icon:v,title:i("close"),className:"h-full rounded-none"})]})]},n)}))}):null};var A=function(e){var t=e.onClick,n=e.children;return(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)("div",{className:"absolute bottom-0 left-0 right-0 top-0 z-1 -m-2",onClick:t,onKeyDown:t,role:"button",tabIndex:-1}),n]})},E=(n(70639),n(56393));const I=n.p+"assets/fc4b6918bb12d4616ef5.svg";var S=n(19712);function N(e){var t=e.active,n=e.className,i=e.rotation,s={icon:I,animation:"transition-transform duration-300",rotate:i?t?i.active:i.base:t?"-rotate-90":"rotate-90",color:"var(--text-t3-text-gray)",operaGx:{icon:S,color:"var(--text-t1-text-active-icons)"},operaAir:{color:"var(--text-t1-text-active-icons)"}},c=(0,a.o6)(s,["rotate","animation"]);return(0,o.jsx)(w.S,{config:s,className:(0,r.AK)(c.animation,c.rotate,n)})}var R={active:"rotate-90",base:"-rotate-90"},T=function e(t){var n=t.children,i=t.onClick,s=t.isOpened,c=t.headingLabel,l=t.headingLabelSlot,d=t.collapsibleEnabled,u=void 0===d||d,f=t.scrollViewContent,p=void 0!==f&&f,v=(0,a.o6)({headingLabel:"text-text-t3-text-gray",operaGx:{headingLabel:"text-text-t1-text-active-icons"}},["headingLabel"]);return(0,o.jsxs)("div",{children:[(0,o.jsxs)("button",{type:"button",tabIndex:-1,className:"text-header-s flex w-full cursor-pointer flex-row items-center gap-1 p-aria-4 outline-none","data-testid":(0,r.wE)(e,"button","toggle"),onClick:function(){return i(!s)},children:[(0,o.jsxs)("div",{className:"flex-1",children:[c&&(0,o.jsx)("p",{className:(0,r.AK)("text-header-s text-left",v.headingLabel),children:c}),l]}),u&&(0,o.jsx)("div",{children:(0,o.jsx)(N,{rotation:R,active:s,className:"!block"})})]}),(0,o.jsx)("div",{className:(0,r.AK)("w-full px-aria-4",s?"block":"hidden",p?"pb-aria-3":"pb-aria-4"),"data-testid":(0,r.wE)(e,"div","content"),children:n})]})},M=(n(81209),n(65910)),P={Wrapper:n(80865).M,Section:M.v},D=n(16981)},14396:(e,t,n)=>{n.d(t,{x:()=>x,J:()=>b.Z});var r=n(89062),a=n(93324),o=n(4942),i=n(38856),s=n(67294),c=n(30811),l=n(86645),d=n(23586),u=n(31372),f=n(55970),p=n(53744),v=n(58489),m=n(68279),h=n(50198),g=n(85893);function x(){var e,t,n=(0,c.$G)().t,x=(0,p.L1)().isCurrentThemeDark,b=(0,m.oH)().isAriaInTabView,y=(e={},(0,o.Z)(e,h.b$.POSITIVE,[{id:"helpful",uiText:n("helpful")},{id:"detailed",uiText:n("detailed")},{id:"informative",uiText:n("informative")},{id:"knowledgeable",uiText:n("knowledgeable")},{id:"quick_solution",uiText:n("quick_solution")},{id:"humorous",uiText:n("humorous")},{id:"relevant",uiText:n("relevant_content")}]),(0,o.Z)(e,h.b$.NEGATIVE,[{id:"out_of_date",uiText:n("out_of_date")},{id:"inaccurate",uiText:n("inaccurate")},{id:"dangerous",uiText:n("dangerous_or_problematic")},{id:"false",uiText:n("factually_incorrect")},{id:"denial",uiText:n("denial_when_it_should_not_happen")},{id:"harmful",uiText:n("harmful_or_offensive")},{id:"not_helpful",uiText:n("not_helpful")}]),e),w=(0,m.o6)({container:"rounded-aria-radius-3 border border-secondary-s1-selected-stroke",feedbackKind:"bg-secondary-s4-surface-overlay text-text-t3-text-gray",feedbackOptionButton:"text-header-s",selectedFeedbackKind:"bg-secondary-s1-selected-stroke text-text-t1-text-active-icons",operaGx:{feedbackOptionButton:"text-body-s !uppercase"}},["container","feedbackKind","feedbackOptionButton","selectedFeedbackKind"]),j=(0,s.useState)(""),_=(0,a.Z)(j,2),C=_[0],k=_[1],O=(0,d.hsz)(),A=O.feedbackData,E=O.saveFeedbackLoading,I=O.saveFeedbackSuccessful,S=(null!=A?A:{}).comment,N=(0,d.Uwy)().userCapabilities,R=(0,d.tkH)(),T=R.clearFeedbackState,M=R.handleSaveFeedback,P=R.setFeedbackData,D=(0,s.useState)(!1),G=(0,a.Z)(D,2),L=G[0],B=G[1],Z=(0,s.useRef)(null),H=(0,s.useCallback)((function(){var e=Z.current;e&&(S||(e.style.height="".concat(38,"px"),e.style.overflow="hidden"),e.style.height="".concat(Math.min(e.scrollHeight,60),"px"),e.style.overflow=e.scrollHeight>60?"auto":"hidden")}),[S]),F=function(e){var t;return null!=A&&null!==(t=A.kind)&&void 0!==t&&t.includes(e.id)?w.selectedFeedbackKind:w.feedbackKind};(0,s.useEffect)((function(){return Z.current&&(0,i.F1)(Z.current),window.addEventListener("beforeunload",T),function(){window.removeEventListener("beforeunload",T)}}),[T]),(0,s.useEffect)((function(){!S&&Z.current&&(Z.current.value=""),H()}),[H,S]),(0,s.useEffect)((function(){var e,t;I?(B(!0),e=window.setTimeout((function(){T()}),3*h.sh),(0,v.vH)({action:u.VV.SEND_FEEDBACK,element:u.Y3.CHAT,context:b?u.hG.BROWSER_TAB:u.hG.SIDEBAR,model:"Aria",ai_provider:(0,v.V_)(null==N?void 0:N.ai_provider),str_value:"".concat(null==A?void 0:A.rate,":").concat(null==A||null===(t=A.kind)||void 0===t?void 0:t.join(","))})):B(!1);return function(){clearTimeout(e)}}),[T,I,b]);return(0,g.jsx)("div",{className:(0,i.AK)("my-2 w-full bg-inherit p-3",w.container),children:L?(0,g.jsx)("p",{className:"text-body-m text-center text-text-t3-text-gray",children:n("thanks_for_your_feedback")}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)("div",{className:(0,i.AK)("rounded-aria-radius-3 border border-secondary-s1-selected-stroke"),children:(0,g.jsx)("textarea",{className:(0,i.AK)("hover-scrollbar text-body-m block w-full resize-none bg-transparent p-3 text-text-t1-text-active-icons outline-none placeholder:text-text-t3-text-gray"),placeholder:n("type_your_feedback_here"),ref:Z,maxLength:1e3,onChange:function(e){k(e.target.value),P({comment:e.target.value})},value:C,onInput:H})}),(0,g.jsx)("div",{className:(0,i.AK)("mt-3 flex flex-wrap gap-1"),children:(null==A?void 0:A.rate)&&y[A.rate].map((function(e){return(0,g.jsx)("button",{className:(0,i.AK)("flex h-6 cursor-pointer select-none flex-row items-center justify-center whitespace-nowrap rounded-full px-3",w.feedbackOptionButton,F(e)),onClick:function(){return function(e){var t,n,a,o;n=null!==(t=A.kind)&&void 0!==t&&t.includes(e.id)?null==A||null===(a=A.kind)||void 0===a?void 0:a.filter((function(t){return t!==e.id})):[].concat((0,r.Z)(null!==(o=null==A?void 0:A.kind)&&void 0!==o?o:[]),[e.id]),P({kind:n})}(e)},children:e.uiText},e.id)}))}),"boolean"==typeof I&&!I&&(0,g.jsx)("p",{className:"mt-4 text-other-warning",children:n("chat_error_processing_request")}),(0,g.jsxs)("div",{className:(0,i.AK)("mt-4 flex flex-row justify-end gap-1.5"),children:[(0,g.jsx)(l.zx,{type:"tertiary",onClick:T,size:"xs",children:n("cancel")}),(0,g.jsx)(l.zx,{type:"primary",disabled:!(null!=A&&null!==(t=A.kind)&&void 0!==t&&t.length),onClick:M,size:"xs",children:E?(0,g.jsx)(f.Z,{spinnerColoring:x?"white-gray":"gray-accent"}):n("send_feedback")})]})]})})}var b=n(17570)},55970:(e,t,n)=>{n.d(t,{Z:()=>i});var r=n(38856),a=n(68279),o=n(85893);const i=function e(t){var n=t.spinnerColoring,i=t.sizeClass,s=void 0===i?"h-4 w-4":i,c=(0,a.o6)({grayAccent:"before:border-primary-p1-cobalt-buttons before:border-t-secondary-s1-selected-stroke after:border-secondary-s1-selected-stroke after:border-t-primary-p1-cobalt-buttons",whiteGray:"before:border-secondary-s1-selected-stroke before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-s1-selected-stroke",operaAir:{grayAccent:"before:border-secondary-[#00000014] before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-[#00000014]",whiteGray:"before:border-secondary-[#00000014] before:border-t-levels-l1-chat-bg-bg-elements after:border-levels-l1-chat-bg-bg-elements after:border-t-secondary-[#00000014]"}},["grayAccent","whiteGray"]),l=c.grayAccent,d=c.whiteGray;return(0,o.jsx)("span",{"data-testid":(0,r.wE)(e,"span","spinner"),className:(0,r.AK)(s,"gray-accent"===n?l:d,"after:content relative inline-block before:absolute before:block before:h-full before:w-full before:animate-spin before:rounded-full before:border-2 before:border-solid before:content-[''] after:absolute after:block after:h-full after:w-full after:animate-spin after:rounded-full after:border-2 after:border-solid after:delay-150 after:content-['']")})}},44282:(e,t,n)=>{n.d(t,{$:()=>A});var r=n(4942),a=n(6501),o=n(29522),i=n(9470),s=n(45386),c=n(13934),l=n(60153),d=n(91701),u=n(4445),f=n(22196),p=n(59006),v=n(26017),m=n(28163),h=n(35703),g=n(50653),x=n(72090),b=(n(16611),n(78338)),y=n(86667),w=n(38856),j=n(76711),_=n(99079),C=n(85893);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=e.links,n=e.message,r=e.isGenerating,k=void 0!==r&&r,A=e.components,E=e.isNonTempDisplayedMessage,I=e.wrapperClass,S=e.isTextless,N=e.isAnalyzingOverride,R=(0,y.E)().isAriaAnalyzing,T=N||R,M=(0,b.e)({message:n,isResponseInProgress:k,isAriaAnalyzing:R}).displayedText,P=t&&Object.values(t).flat();return(0,C.jsx)("span",{className:(0,w.AK)(I,"markdown",T&&!E&&(k||N)&&"animate-wavyBlinking"),children:(0,C.jsx)(a.U,{className:"[&>p:not(:first-child)]:mt-4",remarkPlugins:[s.Z,[c.Z,{singleDollarTextMath:!1}],[d.N,{links:P,disabled:k}],[l.s,{disabled:!k}],[_.W,{disabled:!S}]],rehypePlugins:[o.Z,i.Z,[x.Z,{target:"_blank"}]],components:O({ul:f.Ik,ol:f.Ic,th:u.U,td:u.H,pre:p.Z,h1:v.Z,h2:v.Z,h3:v.Z,h4:v.Z,h5:v.Z,h6:v.Z,table:k?j.Z:h.Z,blockquote:m.Z,img:g.Z},A),children:M})})}},22196:(e,t,n)=>{n.d(t,{Ic:()=>f,Ik:()=>p,Tf:()=>v});var r=n(4942),a=n(45987),o=n(38856),i=n(85893),s=["node","className"],c=["node","className"],l=["node","className"];function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){e.node;var t=e.className,n=(0,a.Z)(e,s);return(0,i.jsx)("ol",u({className:(0,o.AK)(t,"list-decimal pl-[18px] rtl:pr-[18px]")},n))}function p(e){e.node;var t=e.className,n=(0,a.Z)(e,c);return(0,i.jsx)("ul",u({className:(0,o.AK)(t,"[&>li]:custom-bullet pl-[18px] rtl:pr-[18px]")},n))}function v(e){e.node;var t=e.className,n=(0,a.Z)(e,l);return(0,i.jsx)("ul",u({className:(0,o.AK)(t,"pl-[18px] rtl:pr-[18px] [&>li]:list-disc")},n))}},87014:(e,t,n)=>{n.d(t,{xb:()=>C.x,bZ:()=>j,tN:()=>_.t});var r=n(68279),a=n(38856),o=n(85893),i=function(e){var t=e.children,n=(0,r.o6)({wrapper:{operaOne:"right-aria-3",operaGx:"right-aria-4"}},["wrapper"]);return(0,o.jsx)("div",{className:(0,a.AK)("absolute top-0 z-1 -translate-y-1/2",n.wrapper),children:t})},s=n(4773),c={increase:"mask-chevron-right",decrease:"mask-chevron-left"},l=function(e){var t=e.onClick,n=e.strategy;return(0,o.jsx)(s.u1,{onClick:t,children:(0,o.jsx)("i",{className:(0,a.AK)(c[n],"icon")})})},d=function(e){var t=e.activeAnswer,n=e.answersCount;return(0,o.jsxs)("span",{className:"text-header-s-bold select-none text-text-t1-text-active-icons",children:[t+1,"/",n]})},u=n(58489),f=n(23586),p=n(31372),v=function(e){var t=e.activeAnswer,n=e.answersCount,a=e.setActiveAnswer,i=e.answerCategory,s=function(e){var t=e.answersCount,n=e.setActiveAnswer,a=e.activeAnswer,o=(0,r.T4)({itemsCount:t,setActiveItem:n,activeItem:a});return{onNextAnswer:o.onNext,onPreviousAnswer:o.onPrevious}}({answersCount:n,setActiveAnswer:a,activeAnswer:t}),c=s.onNextAnswer,v=s.onPreviousAnswer;return function(e){var t=e.activeAnswer,n=e.answerCategory,a=(0,r.oH)().isAriaInTabView,o=(0,f.Uwy)().userCapabilities;(0,r.rf)((function(){(0,u.vH)({action:p.VV.CLICK,element:p.Y3.MULTIMODAL_ANSWER,context:a?p.hG.BROWSER_TAB:p.hG.SIDEBAR,model:"Aria",str_value:n,int_value:t,ai_provider:(0,u.V_)(null==o?void 0:o.ai_provider)})}),[t],[n,a])}({activeAnswer:t,answerCategory:i}),(0,o.jsx)("div",{className:"rounded-aria-radius-2 border border-secondary-s1-selected-stroke bg-levels-l3-cards p-aria-2",children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(l,{onClick:v,strategy:"decrease"}),(0,o.jsx)(d,{activeAnswer:t,answersCount:n}),(0,o.jsx)(l,{onClick:c,strategy:"increase"})]})})},m=n(44282),h=n(67294),g=n(53979);const x=function e(t){var n=t.image,r=t.richResponseId,i=(0,h.useCallback)((function(){(0,g.RB)(n.link)}),[n.link]);return(0,o.jsx)("div",{className:"rich-response-image w-full","data-test-id":(0,a.wE)(e,"div","rich-response-image-".concat(r)),onClick:i,onKeyUp:i,role:"button",tabIndex:-1,children:(0,o.jsx)("img",{alt:n.title,className:"mx-auto max-h-70 rounded-aria-radius-3",src:n.imageUrl,title:n.title})})};var b=function(e){var t=e.href,n=e.children,r=e.target;return(0,o.jsx)("a",{href:t,className:"!bg-secondary-s3-bg-icons",target:r,children:(0,o.jsx)("span",{children:n})})},y=function e(t){var n=t.branchContent,r=t.links,i=n.images_list||[];return(0,o.jsxs)("div",{"data-test-id":(0,a.wE)(e,"div","rich-response"),children:[i.length>0&&(0,o.jsx)("div",{className:"rich-response-images mb-aria-5",children:i.map((function(e,t){return(0,o.jsx)(x,{image:e,richResponseId:n.id},"".concat(n.id,"-").concat(t,"-rich-response-image"))}))}),(0,o.jsx)(m.$,{message:n.text,links:r,components:{a:function(e){var t=e.children,n=e.href,r=e.target;return(0,o.jsx)(b,{href:n,target:r,children:t})}}})]})},w=function(e){var t=e.text,n=e.links;return(0,o.jsx)("div",{children:(0,o.jsx)(m.$,{message:t,links:n})})},j=function(e){var t=e.selectedAnswerIndex,n=e.content,s=e.updateRichResponseSelectedIndex,c=e.isLocked,l=e.answerCategory,d=e.links,u=t||0,f=n.main_texts.length,p=(0,r.o6)({answerCard:{operaOne:"bg-levels-l3-cards",operaGx:"bg-levels-l5-primary"}},["answerCard"]);return(0,o.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,o.jsx)("div",{children:(0,o.jsx)(w,{text:n.first_message,links:d})}),(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:(0,a.AK)("relative w-full rounded-aria-radius-3 p-aria-4",p.answerCard),children:[!c&&(0,o.jsx)(i,{children:(0,o.jsx)(v,{activeAnswer:u,answersCount:f,setActiveAnswer:s,answerCategory:l})}),(0,o.jsx)(y,{branchContent:n.main_texts[u],links:d})]})}),n.last_message&&(0,o.jsx)("div",{children:(0,o.jsx)(w,{text:n.last_message,links:d})})]})},_=n(47845),C=n(29098)},86645:(e,t,n)=>{n.d(t,{P_:()=>r.P_,hU:()=>r.hU,u:()=>r.u,zx:()=>r.zx});var r=n(4773)},15669:(e,t,n)=>{n(7090),n(49110);var r=n(44985),a=n(20745),o=n(94122),i=n(67294),s=n(23586),c=n(7226),l=n(68279),d=function(e){var t=e.children,n=(0,l.Su)().loggerService,r=(0,s.Pt2)().handleAriaOpened,a=(0,s.Qck)().setLocalModelsServiceStatus,o=(0,i.useCallback)((function(e){var t=e?"RUNNING":"UNAVAILABLE";n.info("LOCAL MODELS SERVICE STATUS CHANGED TO",t),a(t)}),[a]);return(0,i.useEffect)((function(){return(0,c.OZ)(o),r(!0),(0,c.ff)().then(o),function(){r(!1),(0,c.n5)(o)}}),[]),t},u=n(15861),f=n(64687),p=n.n(f),v=n(60243),m=n(38856),h=n(79655),g=n(89250),x=n(50198),b=n(43144),y=n(15671),w=n(4942),j=n(76324),_=(0,b.Z)((function e(t){var n=this;(0,y.Z)(this,e),(0,w.Z)(this,"handle",(function(e){var t,r;switch(e.data.message.cmd){case"already-logged-in":n.storeCommandsOverrides.authStateChanged({details:{email:e.data.message.email,fullname:e.data.message.fullname,picture:null!==(t=e.data.message.picture)&&void 0!==t?t:"",username:e.data.message.username},productionOnly:!1,status:"loggedIn",autoAcceptConsent:!0}),chrome.runtime.sendMessage({cmd:"use-mock-auth",token:null!==(r=e.data.message.token)&&void 0!==r?r:""});break;case"use-oa-auth":n.storeCommandsOverrides.authStateChanged({details:void 0,productionOnly:!0,status:"notLoggedIn"}),chrome.runtime.sendMessage({cmd:"use-oa-auth"});break;default:n.loggerService.error("Unknown command")}})),this.loggerService=new j.m({name:"External Command Service",env:(0,m.a)()}),this.storeCommandsOverrides=t})),C=n(30811);const k=n.p+"assets/6912698b643838d06158.svg";var O=n(75282),A=n(27411),E=n(85893);const I=function(){return(0,E.jsx)("div",{id:"aria_logo",className:"h-8 w-8 leading-8",children:(0,E.jsx)(A.S,{config:{operaOne:{icon:k,color:"default"},operaGx:{icon:O}},size:32})})};var S=n(86645);function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const T=function(e){var t=e.shadowEffectClasses,n=e.shadowEffectGradient,r=e.shapesClasses;return(0,E.jsx)("div",{className:(0,m.AK)("absolute inset-x-0 top-0 z-0 h-full",(0,l.o6)({logoShapeWrapper:{operaGx:"bg-other-o7"}},"logoShapeWrapper")),children:(0,E.jsxs)("svg",{viewBox:"0 0 740 9999",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-full",children:[(0,E.jsx)("g",{filter:"url(#filter0_f_105_16361)",children:(0,E.jsx)("path",{className:n?void 0:(0,m.AK)(t),fill:n?"url(#shadowEffectGradient)":"",d:"M548.289 227.337C495.446 284.283 428.281 339.83 394.016 314.141C359.751 288.453 357.634 181.159 321.187 108.499C284.526 36.3634 213.159 -1.32313 197.871 -66.0695C181.995 -130.477 221.986 -221.42 277.215 -309.883C332.445 -398.346 402.325 -483.99 481.389 -515.44C560.24 -546.366 648.112 -523.807 680.114 -450.196C712.327 -377.108 688.294 -253.152 679.09 -160.239C669.509 -67.5116 674.169 -5.48844 657.263 54.0797C640.356 113.648 601.296 171.1 548.289 227.337Z"})}),(0,E.jsx)("path",{d:"M488.116 -105.991H473.215C441.051 -105.991 420.922 -67.3482 436.952 -36.3732L617.226 311.988C633.21 342.878 673.257 343.111 689.532 312.409L769.54 161.483C777.245 146.95 777.254 128.92 769.565 114.377L736.581 51.9915C684.835 -45.8804 590.296 -105.991 488.116 -105.991Z",className:(0,m.AK)(r)}),(0,E.jsx)("path",{d:"M460.066 250.178L386.785 110.562C371.807 82.025 334.572 82.0112 319.576 110.537L5.59781 707.812C-1.45194 721.223 -1.43095 737.796 5.65275 751.184L78.8125 889.461C93.84 917.864 130.946 917.83 145.931 889.4L460.03 293.463C467.077 280.092 467.091 263.562 460.066 250.178Z",className:(0,m.AK)(r)}),(0,E.jsxs)("defs",{children:[(0,E.jsxs)("filter",{id:"filter0_f_105_16361",x:"84.3606",y:"-638.911",width:"722.013",height:"1069.5",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"55",result:"effect1_foregroundBlur_105_16361"})]}),n&&(0,E.jsx)("linearGradient",R(R({id:"shadowEffectGradient"},null==n?void 0:n.gradientProps),{},{children:n.gradientColorsProps.map((function(e,t){var n;return(0,E.jsx)("stop",R({},e),null!==(n=e.id)&&void 0!==n?n:"shadow-effect-gradient-color-".concat(t))}))}))]})]})})};const M=function(){var e=(0,C.$G)().t,t=(0,s.YZY)().isGx,n=(0,c.Bh)(),r={privateModeAvailability:{operaOne:"text-text-t1-text-active-icons",operaGx:"text-text-t1-text-active-icons",operaAir:"text-text-t2-text-secondary"},productDescription:{operaOne:"mb-aria-7",operaGx:" mb-aria-7",operaAir:"mb-aria-6"},productName:{operaOne:"mt-aria-3 mb-1",operaGx:"mt-aria-3 mb-1",operaAir:"my-aria-3"},switchModeButton:{operaOne:"mt-aria-5 px-aria-4 rounded-aria-radius-3 justify-center",operaGx:"mt-aria-5 rounded min-w-36 !justify-start",operaAir:"mt-aria-6 justify-center px-aria-6"},wrapper:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg"},bgShapeShadowEffectClasses:{operaGx:"fill-[--other-o7]",operaOne:"fill-[--aria-bg-shape-shadow-color]"},bgShapesClasses:{operaGx:"fill-[--other-o7]",operaOne:"fill-[--aria-bg-shape-fill-color]"}},a=(0,l.o6)(r,"switchModeButton"),o=(0,l.o6)(r,["bgShapesClasses","bgShapeShadowEffectClasses"]);return(0,E.jsxs)("div",{id:"private_mode",className:(0,m.AK)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,l.o6)(r,"wrapper")),children:[(0,E.jsx)(T,{shadowEffectClasses:o.bgShapeShadowEffectClasses,shapesClasses:o.bgShapesClasses,shadowEffectGradient:t?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--secondary-s4-surface-overlay)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--secondary-s4-surface-overlay)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,E.jsx)("div",{className:"flex basis-64"}),(0,E.jsxs)("div",{className:"z-1 flex flex-col",children:[(0,E.jsx)(I,{}),(0,E.jsx)("div",{className:(0,m.AK)("text-header-xxl !uppercase text-text-t1-text-active-icons",(0,l.o6)(r,"productName")),children:e("product_name.opera")}),(0,E.jsx)("div",{className:(0,m.AK)("text-header-xl !uppercase text-text-t1-text-active-icons",(0,l.o6)(r,"productDescription")),children:e("onboarding_description".concat(t?".opera_gx":""))}),(0,E.jsxs)("div",{className:(0,m.AK)("text-body-l",(0,l.o6)(r,"privateModeAvailability")),children:[e("private_mode_availability"),n&&" ".concat(e("private_mode_help"))]}),n&&(0,E.jsx)(S.zx,{className:(0,m.AK)("box-border flex !h-10 w-fit items-center rounded border-none bg-buttons-primary-bg py-aria-3 text-text-tb",a),onClick:function(){(0,c.Vy)(),(0,c.$T)()},type:"primary",children:e("private_mode_button_title")})]})]})};var P=n(45477),D=n(65515);const G=function(){var e,t=(0,s.YZY)(),n=t.isOperaOne,r=t.isGx,a=(0,s.Uwy)().userCapabilities,o=(0,s.Itl)().fetchedCloudModels,c=(e=(0,P.TL)(),{handleResolveCloudModels:(0,i.useCallback)((function(){e(D.u.request())}),[e])}).handleResolveCloudModels,l=!(null==a||!a.has_internal_access);(0,i.useEffect)((function(){(n||r)&&l&&0===(null==o?void 0:o.length)&&c()}),[a])},L=n.p+"assets/d7a6c05a1e25e642f6ab.svg";var B=function(){var e=(0,C.$G)().t,t=(0,s.YZY)().isGx,n={bgShapeShadowEffectClasses:{operaGx:"fill-[--other-o7]",operaOne:"fill-[--aria-bg-shape-shadow-color]"},bgShapesClasses:{operaGx:"fill-[--other-o7]",operaOne:"fill-[--aria-bg-shape-fill-color]"},wrapper:{operaOne:"bg-levels-l1-chat-bg-bg-elements",operaGx:"bg-levels-l0-extension-bg"}},r=(0,l.o6)(n,["bgShapesClasses","bgShapeShadowEffectClasses"]);return(0,E.jsxs)("div",{id:"oops_view",className:(0,m.AK)("relative box-border flex min-h-screen flex-col overflow-hidden px-aria-12",(0,l.o6)(n,"wrapper")),children:[(0,E.jsx)(T,{shadowEffectClasses:r.bgShapeShadowEffectClasses,shapesClasses:r.bgShapesClasses,shadowEffectGradient:t?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--secondary-s4-surface-overlay)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--secondary-s4-surface-overlay)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,E.jsxs)("div",{className:"z-1 mt-60 flex flex-col gap-8 text-text-t1-text-active-icons",children:[(0,E.jsx)("div",{children:(0,E.jsx)("p",{className:"text-header-xxl my-0",children:e("ooops")})}),(0,E.jsxs)("div",{className:"flex flex-row items-center gap-3",children:[(0,E.jsx)("img",{className:"h-8 w-8",src:L,alt:"error icon"}),(0,E.jsxs)("div",{className:"text-body-l flex w-full flex-col justify-center gap-1",children:[(0,E.jsx)("p",{className:"my-0",children:e("your_ai_chat_got_tired_and_stopped_working")}),(0,E.jsx)("p",{className:"my-0",children:e("please_try_refreshing")})]})]}),(0,E.jsx)("div",{className:"mt-8",children:(0,E.jsx)(S.zx,{onClick:function(){return window.location.reload()},type:"tertiary",children:e("refresh")})})]})]})},Z=(0,E.jsx)(B,{}),H=n(93324),F=Object.keys(x.Lz).filter((function(e){return"production"!==e}));const U=function(){var e=(0,s.fvp)().networkEnvironment,t=(0,s.FQG)().handleNetworkEnvironmentChanged,n=(0,i.useCallback)((function(e){e.preventDefault(),t(e.target.value)}),[t]);return(0,E.jsx)("select",{className:"text-header-l relative z-1 h-5 w-full overflow-hidden bg-levels-l1-chat-bg-bg-elements text-text-t1-text-active-icons",onChange:n,value:e,children:F.map((function(e){return(0,E.jsx)("option",{className:"endpoint-option",value:e,children:x.Lz[e]},e)}))})};var K=n(72075),V=function e(t){var n=t.checked,r=t.setChecked,a=t.disabled,o=t.testName,s=void 0===o?"":o,c={wrapperStatic:{operaOne:"rounded-aria-radius-2",operaGx:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-5"},cursorDisabled:a?"cursor-not-allowed":"cursor-pointer",wrapperStatus:{operaOne:n?"bg-primary-p1-cobalt-buttons":"bg-secondary-s2-tertiary-need-to-fix",operaAir:n?"bg-text-tb":"bg-secondary-s2-tertiary-need-to-fix"},headStatic:{operaOne:"rounded-aria-radius-1 h-3.5 w-3.5",operaGx:"rounded-aria-radius-1 h-[17px] w-[17px]",operaAir:"w-4.5 h-4.5 rounded-full"},headStaticDisabled:{operaOne:{dark:a?"bg-text-t3-text-gray":"bg-text-tb",light:a?"bg-text-t4":"bg-text-tb"},operaAir:a?"bg-secondary-s3-bg-icons":" bg-text-t1-text-active-icons"},headStatus:{operaOne:n?"translate-x-[22px]":"translate-x-1",operaGx:n?"translate-x-[20px]":"translate-x-[3px]",operaAir:n?"translate-x-4 left-1":"translate-x-0 left-0.5"}};return(0,i.useEffect)((function(){a&&r(!1)}),[a,n,r]),(0,E.jsx)("label",{className:(0,m.AK)("flex select-none items-center"),children:(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("input",{"data-testid":"".concat((0,m.wE)(e,"input",s),"-").concat(n),type:"checkbox",role:"switch",checked:n,onChange:function(){return!a&&r(!n)},className:"sr-only",tabIndex:0}),(0,E.jsx)("div",{className:(0,m.AK)("box block h-5.5 w-10",(0,l.o6)(c,"wrapperStatic"),(0,l.o6)(c,"cursorDisabled"),(0,l.o6)(c,"wrapperStatus"))}),(0,E.jsx)("div",{className:(0,m.AK)("absolute inset-y-0 my-auto flex items-center justify-center transition",(0,l.o6)(c,"headStatic"),(0,l.o6)(c,"headStaticDisabled"),(0,l.o6)(c,"cursorDisabled"),(0,l.o6)(c,"headStatus"))})]})})};const W=function(e){var t=e.toggleConfig,n=e.settingName,r=t.checked,a=t.setChecked;return(0,E.jsxs)("div",{className:(0,m.AK)("flex w-full justify-between border-surface-selected"),children:[(0,E.jsx)("div",{className:"flex flex-col justify-center",children:(0,E.jsx)("p",{className:"font-mono text-xxs font-bold uppercase text-text-t1-text-active-icons",children:n})}),(0,E.jsx)(V,{checked:r,setChecked:a})]})};function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const q=function(e){var t,n,r=e.setRemoteConfigOverrideAvailable,a=(0,s.ljr)().remoteConfigOverride,o=(0,s.FLN)().setRemoteConfigOverride,i=(0,s.YZY)().isGx,c=(0,C.$G)().t;return(0,E.jsxs)("div",{className:(0,m.AK)("menu-footer gap-4.5 absolute z-3 mx-4 box-border flex h-fit w-3/4 flex-col items-center justify-center border border-solid border-[--opera-chatbot-message-info-border] bg-levels-l0-extension-bg",i?"mt-2 rounded px-6 py-4":"rounded-lg p-4 shadow-settings"),children:[(0,E.jsxs)("div",{className:"flex flex-col items-center space-y-1 text-center text-black dark:text-white",children:[(0,E.jsxs)("p",{className:"text-base",children:["Aria ",null!==(t=null===(n="production")?void 0:n.toUpperCase())&&void 0!==t?t:""]}),(0,E.jsx)("small",{className:"text-xs",children:"Remote config override"}),(0,E.jsx)("small",{className:"text-xs",children:(0,E.jsx)(K.h,{className:"cursor-pointer !text-blue-400 text-inherit underline underline-offset-1",to:"https://wiki.opera.software/display/DNA/Aria+Remote+Config",children:"Wiki"})})]}),(0,E.jsx)("div",{className:"max-h-[75%] w-full overflow-y-auto",children:(0,m.FR)(a).filter((function(e){return"boolean"==typeof(0,H.Z)(e,2)[1]})).map((function(e){var t=e,n=(0,H.Z)(t,2),r=n[0],i=n[1];return(0,E.jsx)("div",{className:"mx-1.5 my-3",children:(0,E.jsx)(W,{settingName:r,toggleConfig:{checked:a[r],setChecked:function(){return o(Y(Y({},a),{},(0,w.Z)({},r,!i)))}}})},r)}))}),(0,E.jsx)("div",{className:"flex space-x-4",children:(0,E.jsx)(S.zx,{type:"tertiary",onClick:function(){return r(!1)},children:c("close")})})]})};var $=function(){var e=(0,i.useState)(!1),t=(0,H.Z)(e,2),n=t[0],r=t[1],a=(0,i.useState)(!1),o=(0,H.Z)(a,2),s=o[0],c=o[1];return(0,i.useEffect)((function(){function e(e){var t=e.key;"F1"===t&&r((function(e){return!e})),"F2"===t&&c((function(e){return!e}))}return(0,m.BB)()||window.addEventListener("keydown",e),function(){(0,m.BB)()||window.removeEventListener("keydown",e)}}),[]),(0,E.jsxs)(i.Fragment,{children:[n&&(0,E.jsx)(U,{}),s&&(0,E.jsx)(q,{setRemoteConfigOverrideAvailable:c})]})},X=n(31372),J=n(73781);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var ee=function(e){var t=e.activeConversationId,n=(0,s.B9q)().newConversationRequest,r=(0,s.j$h)().handleMenuOpenStateChanged,a=(0,l.oH)().isAriaInTabView,o=(0,s.L6l)().handleCleanConversationRequest,i=(0,s.bWQ)().handleActiveConversationChanged,d=(0,J.Z)({conversationId:t}).sendMessage;(0,l.rf)((function(){var e=!("selected-content-prompt"===(null==n?void 0:n.message.source));if(n)if(e)if(n.message.id===t){switch(r(!1),n.message.source){case"selected-content-prompt":(0,s.VvH)(X.hG.HIGHLIGHT);break;case"command-line":(0,s.VvH)(X.hG.COMMAND_BAR);break;default:(0,s.VvH)(a?X.hG.BROWSER_TAB:X.hG.SIDEBAR)}o(),d(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n.message))}else i(n.message.id,"sidebar");else if("selected-content-prompt"===n.message.source)return(0,s.VvH)(X.hG.HIGHLIGHT),void(0,c.z4)()}),[n,t,a],[d])},te=n(89062),ne=n(26382),re=n(44282),ae=n(12294),oe=function(e){var t=e.title,n=e.id,r=e.sender,a=e.progress,o=e.countryCode,i=e.message,s=e.contextType,c=e.links,l=e.children,d=e.isNonTempDisplayedMessage,u=r===ne.CI.aria,f=r===ne.CI.user,p=r===ne.CI.localModel;return(0,E.jsxs)(E.Fragment,{children:[t&&(0,E.jsx)("div",{className:"title",children:t}),(0,E.jsxs)("div",{className:"content flex min-h-8 flex-col justify-center",children:[f&&(0,E.jsx)("span",{children:i}),p&&(0,E.jsx)("span",{children:i}),u&&(i||a)&&(0,E.jsx)(re.$,{isNonTempDisplayedMessage:d,links:c,message:i,isGenerating:a,isAnalyzingOverride:"file-loading-in-progress"===n,components:{a:function(e){var t=e.children,n=e.href;return(0,E.jsx)(ae.Z,{href:null!=n?n:"",progress:a,contextType:s,countryCode:null!=o?o:navigator.language,children:t})}}}),l]})]})};const ie=(0,i.memo)(oe);var se=n(78546),ce=n(47643);const le=function(e){var t=e.onChipRemove,n=e.title,r=e.variant,a=void 0===r?"normal":r,o=Boolean(t),s=(0,i.useCallback)((function(e){e.stopPropagation(),t()}),[t]),c=(0,l.o6)({padding:"p-1",operaGx:{padding:"p-1 px-2"},operaAir:{padding:"p-1 px-2",shadow:"air-level-02-shadow"}},["border","padding","shadow"]);return(0,E.jsxs)("button",{title:n,className:(0,m.AK)("text-body-s flex !h-7 max-w-[175px] cursor-pointer select-none items-center rounded-aria-radius-2 bg-levels-l2-hover text-text-t1-text-active-icons",c.padding,c.shadow,"message"===a&&"mr-2.5 mt-2.5 !cursor-auto !bg-transparent","message"===a&&"border border-secondary-s1-selected-stroke"),onClick:o?s:function(){},children:[(0,E.jsx)("span",{className:"shrink-0 flex-grow basis-0 select-none truncate",children:n}),o&&(0,E.jsx)(A.S,{src:ce,color:"default",className:"ml-0.5 shrink-0",title:"Remove"})]})};var de=n(17519),ue=n(62655);const fe=n.p+"assets/0632be293d6893eef9b9.svg",pe=n.p+"assets/17d820f0ebf3196a58c6.svg";var ve=n(95928),me=n(55970),he=function e(t){var n=t.type,r=t.file,a=t.readonly,o=t.onRemove,s=(0,i.useRef)(null),c=(0,l.XI)(s),d=function(){return null==o?void 0:o(r.image_id)},u=!(x.v5.includes(n)||x.Go.includes(n)),f=r.status!==x.bb.FINISHED,p=c||f;return(0,E.jsxs)("div",{ref:s,className:(0,m.AK)("flex h-12 w-42 items-center gap-aria-2 rounded-aria-radius-3 border border-secondary-s1-selected-stroke bg-levels-l5-primary p-aria-3",!a&&"hover:bg-levels-l2-hover hover:bg-none"),children:[(0,E.jsx)("div",{className:"flex h-8 w-8 items-center justify-center rounded-aria-radius-3 bg-secondary-s3-bg-icons p-aria-3",children:(0,E.jsx)(A.S,{config:u?pe:fe,color:"var(--text-t1-text-active-icons)"})}),(0,E.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-2",children:[(0,E.jsx)("p",{className:(0,m.AK)("text-body-m max-h-4 overflow-hidden text-ellipsis text-nowrap text-text-t1-text-active-icons",p&&!a?"max-w-22":"max-w-28"),children:r.name}),(0,E.jsx)("p",{className:"text-body-s text-text-t3-text-gray",children:n})]}),p&&!a&&(f&&!c?(0,E.jsx)(me.Z,{spinnerColoring:"gray-accent"}):!!o&&(0,E.jsx)(S.hU,{dataTestId:(0,m.wE)(e,"button","remove-btn"),type:"transparent",icon:ve,iconSize:16,tabIndex:-1,onClick:d,onKeyUp:d,className:"-ml-1 h-full items-center self-end"}))]})},ge=n(96531),xe=n(4773),be=n(69185),ye=function e(t){var n=t.image,r=t.onRemove,a=t.visualQuestionResponseImage,o=void 0!==a&&a,s=(0,i.useState)("default"),c=(0,H.Z)(s,2),d=c[0],f=c[1],v=(0,i.useState)("cover"),h=(0,H.Z)(v,2),g=h[0],b=h[1],y=(0,i.useState)(""),w=(0,H.Z)(y,2),j=w[0],_=w[1],C=(0,i.useState)(!1),k=(0,H.Z)(C,2),O=k[0],A=k[1],I=!!n.isLocalModel,S=n.status!==x.bb.FINISHED,N=function(){return null==r?void 0:r(n.image_id)},R=function(){var e=(0,u.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ge.zj)(t);case 2:(n=e.sent)&&_(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){I&&R(n.image_id)}),[n.image_id]);var T=(0,l.o6)({radius:"rounded-aria-radius-3",operaGx:{radius:"rounded-aria-radius-3"},operaAir:{radius:"rounded-aria-radius-3"}},["radius"]),M=Boolean(n.image_original_size_url),P=M?function(){A(!0)}:void 0;return(0,E.jsx)("div",{"data-testid":(0,m.wE)(e,"div","container"),className:(0,m.AK)("relative overflow-clip border-stroke-components","landscape"===d&&"flex items-center",o?"h-29 w-29":"h-aria-9 w-aria-9",T.radius),children:S?(0,E.jsx)("div",{"data-testid":"Loader-image-wave",className:(0,m.AK)("h-full w-full animate-imageHolderShimmer bg-shimmer",T.radius)}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:(0,m.AK)("group absolute inset-0 flex items-center justify-center bg-transparent transition-all",S&&"bg-black bg-opacity-50",!!r&&"hover:bg-black hover:bg-opacity-50",M&&"cursor-pointer"),role:M?"button":void 0,onClick:P,onKeyUp:P,children:!!r&&(0,E.jsx)(xe.hU,{dataTestId:(0,m.wE)(e,"button","remove-btn"),type:"transparent",icon:ce,className:"invisible h-full w-full opacity-0 transition-opacity group-hover:visible group-hover:opacity-100",tabIndex:-1,onClick:N,onKeyUp:N})}),(!!n.image_thumbnail_url||!!j)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("img",{alt:"",className:(0,m.AK)("h-full w-full bg-secondary-s1-selected-stroke","center-crop"===g&&"object-cover object-center","cover"===g&&"object-cover"),src:I?j:n.image_thumbnail_url,onLoad:function(e){var t=e.target,n=t.naturalHeight,r=t.naturalWidth;f(r<114?"default":r>n?"landscape":"portrait"),b(r>=48&&n>=48?"center-crop":"cover")}}),M&&O&&(0,E.jsx)(be.Z,{onClose:function(){A(!1)},previewImageAlt:n.name,previewImageSrc:n.image_original_size_url})]})]})})},we=n(57406),je=function(e){var t=e.files,n=e.isMessageResponse,r=void 0!==n&&n,a=e.onRemove,o=e.readonly,i=(0,l.Su)().filesService;return(0,E.jsx)("div",{className:"flex w-fit flex-row gap-1",children:!!t.length&&(0,E.jsx)("div",{className:"flex w-fit flex-row flex-wrap gap-2",children:t.map((function(e){var t,n;return i.isImage(null!==(t=e.name)&&void 0!==t?t:"")?(0,E.jsx)(ye,{image:e,onRemove:a,visualQuestionResponseImage:r},e.image_id):(0,E.jsx)(he,{file:e,onRemove:a,readonly:o,type:we.nS.getFileExtension(null!==(n=e.name)&&void 0!==n?n:"")},e.image_id)}))})})},_e=n(9192),Ce=n(60387),ke=n(40054),Oe=n(87014),Ae=n(84588),Ee=n(38824),Ie=(0,i.createContext)(null),Se=function(){var e=(0,i.useContext)(Ie);if(!e)throw new Error("useScrollActions is used outside of context of value is undefined inside Provider");var t=(0,i.useCallback)((function(){e.current&&(0,m.qf)(e.current,"start")}),[e]);return{scrollIntoEnd:(0,i.useCallback)((function(){e.current&&(0,m.qf)(e.current,"end")}),[e]),scrollIntoStart:t}},Ne=function(e){var t=e.children,n=Se().scrollIntoEnd;return t({layoutUpdateCallbackByCollapsibleStatus:(0,i.useCallback)((function(e){e&&n()}),[n])})},Re=function(e){var t=e.children,n=e.enabled,r=e.strategy,a=Se(),o=a.scrollIntoEnd,s=a.scrollIntoStart;return(0,i.useEffect)((function(){n&&("bottom-focused"===r?o():s())}),[n,o,s,r]),t},Te=n(86667),Me=n(62857),Pe=n(58489),De=function(){var e,t,n,r=(0,C.$G)().t,a=(0,g.s0)(),o=(e=function(){a("/".concat(x.n5.MAIN,"/").concat(x.n5.SETTINGS),{state:{initialTab:r("profile_settings_tab")}})},t=(0,l.oH)().isAriaInTabView,n=(0,s.Uwy)().userCapabilities,(0,i.useCallback)((function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.PROFILE_MEMORY,context:t?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:memory_updated_indication",ai_provider:(0,Pe.V_)(null==n?void 0:n.ai_provider)}),e()}),[e,t,null==n?void 0:n.ai_provider]));return(0,E.jsx)("div",{className:"cursor-pointer rounded-aria-radius-2 bg-secondary-s3-bg-icons p-aria-2 transition-colors hover:bg-levels-l2-hover",onClick:o,onKeyUp:o,tabIndex:-1,role:"button",children:(0,E.jsxs)("div",{className:"flex flex-row items-center gap-aria-2",children:[(0,E.jsx)("div",{children:(0,E.jsx)(A.S,{config:Me,className:"!block stroke-text-t1-text-active-icons"})}),(0,E.jsx)("div",{className:"flex-1",children:(0,E.jsx)("span",{className:"text-header-s uppercase text-text-t1-text-active-icons","data-ignore-highlighter":!0,children:r("profile_memory_message_indicator")})})]})})},Ge=n(55777),Le=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=(0,i.useRef)(n);(0,i.useEffect)((function(){r.current=n}),[n]);var a=(0,i.useCallback)((function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e.apply(void 0,n.concat([r.current]))}),t);return a};function Be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ze(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Be(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var He=(0,i.forwardRef)((function(e,t){var n,r=e.audioAvailable,a=e.countryCode,o=void 0===a?navigator.language:a,c=e.title,d=e.conversationId,f=e.conversationSource,v=e.children,h=e.isLastMessage,g=e.sender,x=e.error,b=e.errorType,y=e.id,j=e.progress,_=e.noAvatar,k=e.message,O=void 0===k?"":k,A=e.contextType,I=e.responseInProgress,S=void 0!==I&&I,N=e.isActive,R=void 0!==N&&N,T=e.aborted,M=void 0!==T&&T,P=e.suggestions,D=e.sources,G=e.handleScreenshotClipboard,L=e.screenshotClipboardPending,B=e.highlightedTexts,Z=e.links,H=e.quotation,F=e.model,U=e.files,K=e.originLink,V=e.addNewChat,W=e.writingModeState,z=e.rich_response,Y=e.richResponseSelectedIndex,q=e.shopping_list,$=e.images_list,X=e.games_list,J=e.layout,Q=e.withNewFactsIndicator,ee=e.userRequestMessage,te=(0,l.Su)(),re=te.loggerService,ae=te.clipboardService,oe=(0,C.$G)().t,ce=(0,l.lm)().pushNotification,fe=(0,Ae.d)({conversationId:d}).saveMessage,pe=(0,Ee.H)({messageSpecificLayout:J}).messageLayout,ve=(0,Te.E)().isAriaAnalyzing,me=(0,l.Cg)().consentNeeded,he=(0,s.GgQ)().isSiaEnabled,ge=(0,s.J0e)().isSourceLinksEnabled,xe=(0,s.coc)().chatContext,be=(0,s.WGj)().rephraseMessagePatch,ye=(0,s.ljr)().remoteConfig,we=(0,s.tkH)().clearFeedbackState,Se=(0,i.useRef)(null);(null==be?void 0:be.messageId)==="message-".concat(y)&&be.message&&(O=be.message);var Me=(0,i.useCallback)((0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!z){e.next=6;break}return e.next=4,ae.writeSeparatedTitleDescription({title:z.first_message,description:z.main_texts[Y||0].text});case 4:e.next=8;break;case 6:return e.next=8,ae.formatRespectingCopy(O,document.querySelector("#message-".concat(y," .body .content")));case 8:ce(oe("copied"),"info"),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),re.error("Copy message error:",e.t0),ce(oe("error_occurred_message"),"error");case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),[y,O,Y,z,ae]),Pe=(0,i.useCallback)((function(e){fe({message:"",sender:ne.CI.aria,id:y,richResponseSelectedIndex:e})}),[fe,y]),Be=(0,Ge.Z)({conversationId:d}).sendMessage,Fe=Le((function(){ee&&Be({text:ee.message,source:f,files:ee.files})}),[ee,f],[Be]);(0,i.useEffect)((function(){we()}),[we,d]);var Ue=H&&!!H.length,Ke=xe.message,Ve=g===ne.CI.aria&&h&&xe.messageId===y&&["tab-view","sidebar","selected-content-prompt"].includes(f),We=!j&&!S&&g===ne.CI.aria&&!me,ze=(0,i.useMemo)((function(){var e,t=M?O||oe("empty_interrupted_message"):S?O||"":O;null!=W&&W.action?(t=W.action+": \n"+O,t=(e={},(0,w.Z)(e,ke.o9.GENERATE_TEXT,oe("generate_text")),(0,w.Z)(e,ke.o9.TWEAK,oe("tweak_it")),(0,w.Z)(e,ke.o9.SPELLCHECK,oe("spellcheck")),(0,w.Z)(e,ke.Hr.OUTPUT_EDITING,oe("output_editing")),(0,w.Z)(e,ke.Hr.LONGER,oe("make_it_longer")),(0,w.Z)(e,ke.Hr.SHORTER,oe("make_it_shorter")),(0,w.Z)(e,ke.Hr.ADD_EMOJI,oe("add-emoji")),(0,w.Z)(e,ke.Hr.ADD_HASHTAGS,oe("add_hashtags")),e)[null==W?void 0:W.action]+": \n"+O):(ve||"file-loading-in-progress"===y)&&h&&xe.working&&(t=oe("constructing_response"));return Ve&&Ke||t}),[null==W?void 0:W.action,xe.working,Ve,Ke,M,S,oe,O,ve,h]),Ye=he&&(null==P?void 0:P.suggestionList.length),qe=!(S&&h)&&(ge&&((null==D||null===(n=D.sourceList)||void 0===n?void 0:n.length)||$||q||X)||Ye),$e=(0,l.o6)({ariaMessageHover:"",backgroundFromUser:"message-from bg-transparent",backgroundFromAria:"message-to bg-levels-l4-message-bg",operaGx:{ariaMessageHover:""},operaAir:{ariaMessageHover:"",backgroundFromAria:"message-to bg-transparent"}},["ariaMessageHover","backgroundFromUser","backgroundFromAria"]);return"USER_LIMIT"===b||"IMAGES_LIMIT"===b?null:(0,E.jsx)(Ie.Provider,{value:Se,children:(0,E.jsx)(Re,{enabled:Boolean(h&&x),strategy:Boolean(null==P?void 0:P.suggestionList.length)?"bottom-focused":"options-focused",children:(0,E.jsx)("div",Ze(Ze({"data-testid":h&&(0,m.wE)(He,"div","is-last-message"),className:(0,m.AK)(Boolean(x)&&"bg-transparent",g===ne.CI.aria&&$e.ariaMessageHover,R&&"active","group/message text-body-l message relative box-border rounded-aria-radius-3 border border-solid border-transparent px-4 py-5 text-text-t1-text-active-icons",g==ne.CI.user?$e.backgroundFromUser:$e.backgroundFromAria),id:"message-".concat(y),"data-sentry-ignore":!0,ref:t},S&&h&&{"data-testid":(0,m.wE)(He,"div","response-in-progress")}),{},{children:(0,E.jsxs)("div",{className:"wrap flex flex-row gap-aria-4",children:[!_&&(0,E.jsx)("div",{className:"block shrink-0",children:(0,E.jsx)(de.P,{error:x,sender:g,model:F,includeFileLoadingState:h})}),(0,E.jsxs)("div",{ref:Se,className:(0,m.AK)("body",Boolean(x)&&"flex flex-col-reverse"),children:[We&&(0,E.jsx)(se.Z,{ariaReadVoiceAvailable:r,isLastMessage:h,conversationId:d,messageId:y,onRetry:Fe,onCopy:Me,error:x,errorType:b,isEmptyMessage:!O.trim()&&!z,clipboardScreenshotButtonDisabled:L,handleScreenshotClipboard:G,addNewChat:V}),(0,E.jsx)(ie,{links:Z,title:c,isNonTempDisplayedMessage:!(!Ve||!Ke),sender:g,progress:j,message:ze,countryCode:o,contextType:A,id:y,children:z&&(0,E.jsx)(Oe.bZ,{content:z,selectedAnswerIndex:Y,updateRichResponseSelectedIndex:Pe,isLocked:!Boolean(h),answerCategory:(0,Oe.tN)({rich_response:z,images_list:$,shopping_list:q,games_list:X}),links:Z})}),g===ne.CI.user&&Boolean(null==B?void 0:B.length)&&(0,E.jsx)("div",{className:"flex flex-wrap",children:B.map((function(e){return(0,E.jsx)(le,{variant:"message",title:e},"".concat(y,"-highlighted_text-").concat(e))}))}),g===ne.CI.user&&!(null==U||!U.length)&&(0,E.jsx)(je,{files:U,readonly:!0,isMessageResponse:!0}),K&&K.url&&(0,E.jsx)(_e.H,{sources:{sourceList:[K]},id:"context-mode-link",source:f}),v&&v,!S&&Ue&&(0,E.jsx)(Ce.Z,{quotation:H}),qe&&(0,E.jsx)(Ne,{children:function(e){var t=e.layoutUpdateCallbackByCollapsibleStatus;return(0,E.jsx)(ue.Z,{suggestions:P,sources:D,id:y,source:f,images_list:$,shopping_list:q,games_list:X,messageLayout:pe,layoutUpdateCallbackByCollapsibleStatus:t})}}),Q&&ye.longterm_memory&&(0,E.jsx)("div",{className:"flex",children:(0,E.jsx)(De,{})})]})]})}))})})}));const Fe=(0,i.memo)(He),Ue=n.p+"assets/b1a49f1790d1b4a705cb.svg";const Ke=function e(t){var n=t.conversationId,r=t.inputRef,a=t.messagesContainerRef,o=t.message,s=t.isUpgradeBannerVisible,c=(0,i.useState)(!1),l=(0,H.Z)(c,2),d=l[0],u=l[1],f=(0,i.useState)(!1),p=(0,H.Z)(f,2),v=p[0],h=p[1],g=(0,i.useRef)(null),b=null==r?void 0:r.current;function y(){(0,m.Mx)(a),u(!1),h(!0),setTimeout((function(){h(!1)}),x.DH)}return(0,i.useEffect)((function(){var e;if(g.current){var t=o?+(null==b?void 0:b.clientHeight):x.bX;t+=b?x.un:x.YO,t+=s?x.gp:0,g.current.style.setProperty("bottom","".concat(null!==(e=t)&&void 0!==e?e:0,"px"))}}),[b,o,n,s]),(0,i.useEffect)((function(){var e=null==a?void 0:a.current;if(e){var t=function(){var t=e.scrollHeight-(e.clientHeight+e.scrollTop);u(t>e.clientHeight/2&&!v)};return t(),e.addEventListener("scroll",t),function(){return e.removeEventListener("scroll",t)}}}),[a,n,v]),(0,E.jsx)("div",{className:"relative m-auto w-full max-w-tab-view ",children:(0,E.jsx)("div",{ref:g,className:"absolute bottom-8 right-5",children:(0,E.jsx)(xe.hU,{dataTestId:(0,m.wE)(e,"button","scrollDown"),className:(0,m.AK)(d?"z-1 opacity-100":"-z-1 cursor-none opacity-0"),tabIndex:0,onClick:y,onKeyUp:y,icon:Ue,type:"secondary"})})})};var Ve=n(93379),We=n.n(Ve),ze=n(7795),Ye=n.n(ze),qe=n(90569),$e=n.n(qe),Xe=n(68575),Je=n.n(Xe),Qe=n(19216),et=n.n(Qe),tt=n(44589),nt=n.n(tt),rt=n(41807),at={attributes:{source:"aria-extension"}};at.styleTagTransform=nt(),at.setAttributes=Je(),at.insert=$e().bind(null,"head"),at.domAPI=Ye(),at.insertStyleElement=et();We()(rt.Z,at);rt.Z&&rt.Z.locals&&rt.Z.locals;const ot=n.p+"assets/637f22f6137db0081579.svg",it=n.p+"assets/046461fc1a778fe43d99.svg",st=n.p+"assets/823d989847c2950d3b26.svg",ct=n.p+"assets/9abe40fc417dcd471d7d.svg";const lt=function(e){var t=e.children,n=e.isAriaModel,r=(0,i.useState)(!1),a=(0,H.Z)(r,2),o=a[0],c=a[1],l=(0,i.useRef)(null),d=(0,s.YZY)().isOperaOne,u=["orange","pink","purple","green"],f=2*x.sh,p=3*x.sh;return(0,E.jsxs)("div",{className:"input-animation-wrapper ".concat(o?"active":""),ref:l,id:"input-animation-wrapper",children:[(0,E.jsx)("div",{className:"input-wrapper",onFocus:function(){o||(u.forEach((function(e){l.current&&(l.current.style.setProperty("--input-animation-position-".concat(e,"-left"),(0,m.cL)(25,75)+"%"),l.current.style.setProperty("--input-animation-position-".concat(e,"-top"),(0,m.cL)(45,55)+"%"),l.current.style.setProperty("--input-animation-duration-".concat(e),(0,m.cL)(f,p)/x.sh+"s"))})),c(!0),setTimeout((function(){return c(!1)}),1100))},children:t}),o&&d&&n&&(0,E.jsxs)("div",{className:"gradient-wrapper",children:[(0,E.jsx)("img",{src:it,alt:"",className:"gradient",draggable:"false"}),(0,E.jsx)("img",{src:st,alt:"",className:"gradient",draggable:"false"}),(0,E.jsx)("img",{src:ct,alt:"",className:"gradient",draggable:"false"}),(0,E.jsx)("img",{src:ot,alt:"",className:"gradient",draggable:"false"})]})]})};var dt=n(16634);const ut=function(e){var t=e.reusableHighlights,n=(0,s.lUI)().removeReusableHighlight,r=(0,i.useCallback)((function(e){return function(){return n(e)}}),[n]),a=(0,l.o6)({container:""},["container"]);return(0,E.jsx)("div",{className:(0,m.AK)("flex w-fit select-none flex-nowrap items-end justify-start gap-1",a.container),children:t.map((function(e){var t=e.id,n=e.title;return(0,E.jsx)(le,{onChipRemove:r(t),title:n},t)}))})},ft=n.p+"assets/71530e764db142499250.svg",pt=n.p+"assets/662c2eab0596ae6d6ead.svg";var vt=(0,i.forwardRef)((function(e,t){var n=e.disabled,r=e.onAction,a=(0,s.ljr)().remoteConfig,o={icon:ft,color:n?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",iconClass:{light:"light",dark:"dark"},button:"rounded-aria-radius-2 hover:bg-surface-on-hover dark:hover:bg-buttons-secondary-border-hover",operaGx:{icon:pt,button:"rounded-aria-radius-3 hover:bg-classic-gx-no-77 dark:hover:bg-classic-gx-no-20"},operaAir:{color:n?"var(--text-t3-text-gray)":"var(--text-t1-text-active-icons)",button:"rounded-aria-radius-5 hover:bg-levels-l2-hover dark:hover:bg-buttons-secondary-border-hover"}};return(0,E.jsxs)("label",{className:(0,m.AK)("flex h-10 min-w-10 items-center justify-center p-2",(0,l.o6)(o,"button"),n?"cursor-not-allowed":"cursor-pointer"),"data-testid":(0,m.wE)(vt,"label","upload"),children:[(0,E.jsx)("input",{id:"upload-image-input",ref:t,type:"file",className:"sr-only",accept:(0,x.Cr)([].concat((0,te.Z)(x.v5),(0,te.Z)(a.read_and_save_files?[].concat((0,te.Z)(x.Go),(0,te.Z)(x.vH)):[]))),multiple:!0,disabled:n,onChange:function(e){n||null==r||r(e.target.files)}}),(0,E.jsx)(A.S,{config:o})]})}));vt.displayName="UploadImageButton";const mt=function e(t){var n=t.content,r={container:"px-[10px] pt-[2px] bg-secondary-s1-selected-stroke",text:"text-text-t1-text-active-icons text-body-s !leading-[20px]",rounded:t.middle?"rounded-none":"rounded-t-[8px]",operaGx:{container:"px-[10px] py-[4px] bg-secondary-s1-selected-stroke mb-[4px]",text:"text-text-t1-text-active-icons text-body-s text-center",rounded:"rounded-aria-radius-1"},operaAir:{container:"px-[10px] py-[4px] bg-secondary-s1-selected-stroke mb-[4px]",text:"text-text-t1-text-active-icons text-body-s text-center",rounded:"rounded-aria-radius-3"}},a=(0,l.o6)(r,["rounded","text","container"]);return(0,E.jsx)("p",{className:(0,m.AK)("w-full",a.container,a.text,a.rounded),"data-testid":(0,m.wE)(e,"p","disclaimer"),children:n})};var ht=n(93075),gt=n(85983),xt=n(66037);const bt=n.p+"assets/5c2425d1f6cda1251f8c.svg";var yt=function(e){var t=e.content,n=e.isOpen,r=e.setIsOpen,a=(0,ht.YF)({middleware:[(0,gt.cv)({mainAxis:16})],placement:"top-end",open:n,onOpenChange:r,whileElementsMounted:xt.Me}),o=a.refs,s=a.floatingStyles,c=(0,i.useRef)(null),d=(0,l.XI)(c),u={button:"mb-1 h-10 hover:bg-buttons-secondary-border-hover",moreIconColor:"default",operaGx:{button:"mb-1 h-10 rounded-sm hover:bg-levels-l2-hover",moreIconColor:d?"var(--text-t1-text-active-icons)":"default"},operaAir:{button:"mb-1 h-10 hover:bg-primary-p2-hover-buttons",moreIconColor:d?"var(--text-tb)":"default"}},f=(0,l.o6)(u,["button","moreIconColor"]);return(0,E.jsxs)("div",{className:"flex h-full items-end",children:[(0,E.jsx)("div",{ref:c,children:(0,E.jsx)("button",{ref:o.setReference,className:(0,m.AK)("flex w-6 items-center justify-center rounded-md",f.button),type:"button",onClick:function(){r((function(e){return!e}))},tabIndex:-1,children:(0,E.jsx)("span",{className:(0,m.AK)("flex items-center justify-center transition-all duration-200"),children:(0,E.jsx)(A.S,{src:bt,size:16,color:f.moreIconColor})})})}),n&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(ht.y0,{className:"z-1",onClick:function(){return r(!1)}}),(0,E.jsx)(ht.ll,{children:(0,E.jsx)("div",{ref:o.setFloating,className:"z-2",style:s,children:t})})]})]})},wt=function(e){return e.LEFT="left-0",e.TOP_RIGHT="top-0 right-0",e.BOTTOM_RIGHT="bottom-0 right-0",e}({});function jt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({action:X.VV.CLICK,element:X.Y3.COMPOSE,context:X.hG.SIDEBAR},e||{});(0,Pe.vH)(t)}function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:":";return Array.from(e).map((function(e){var n=(0,H.Z)(e,2),r=n[0],a=n[1];return 0===a||Boolean(a)?[r,a].join(t):r})).join(n)}const Ct=n.p+"assets/bd0504d286f5e3431f45.svg",kt=n.p+"assets/4f310ff7d409a774155a.svg",Ot=n.p+"assets/788ddd8d45c0c1c2e66d.svg",At=n.p+"assets/662586e44213220a20a2.svg";function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var St=function(e){var t=e.message,n=e.disabled,r=e.isComposeAvailable,a=e.isTextVisible,o=void 0===a||a,c=e.onAction,d=(0,i.useRef)(null),u=(0,l.XI)(d),f=(0,C.$G)().t,p=(0,g.s0)(),v=(0,l.oH)().isAriaInTabView,h=(0,s.Uwy)().userCapabilities,b=n||!r,y={composeIcon:{operaGx:{color:b?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)",icon:Ot},icon:Ct,size:32,color:b?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},composeDisabledHoverIcon:{operaGx:{color:b?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)",icon:At},icon:kt,size:32,color:b?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},caption:{operaAir:"!capitalize"}},w=(0,l.o6)(y,["caption"]);return(0,E.jsxs)(xe.zx,{ref:d,type:"context-menu",disabled:b,onClick:function(e){b?e.preventDefault():(null==c||c(),p("/".concat(x.n5.MAIN,"/").concat(x.n5.PROMPT_STUDIO),{state:{message:t}}),jt({context:v?X.hG.BROWSER_TAB:X.hG.SIDEBAR,ai_provider:(0,Pe.V_)(null==h?void 0:h.ai_provider)}))},className:(0,m.AK)("justify-between gap-1"),children:[!r&&u?(0,E.jsx)(S.u,{className:"max-w-[250px] leading-5",offsetValue:15,title:f("compose_not_available"),children:function(e){var t=e.ref,n=e.referenceProps;return(0,E.jsx)("span",It(It({ref:t},n),{},{children:(0,E.jsx)(A.S,{config:y.composeDisabledHoverIcon})}))}}):(0,E.jsx)(A.S,{config:y.composeIcon}),o&&(0,E.jsx)("span",{className:(0,m.AK)("text-header-s",w.caption),children:f("compose")})]})};const Nt=n.p+"assets/73a295398a2e696b7910.svg";var Rt=function(e){var t=e.onAction,n=e.disabled,r=e.sendMessage,a=(0,s.coc)().chatContext,o=(0,s.Uwy)().userCapabilities,i=(0,C.$G)().t,c=(0,l.oH)().isAriaInTabView,d=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null==t||t(),r({source:c?"tab-view":"sidebar",text:i("summarize_this_chat"),isRetryDisabled:!0,endpointType:"endpointSummarizeChatV2"}),(0,Pe.vH)({action:X.VV.WRITING,element:X.Y3.CHAT,context:c?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"summary",ai_provider:(0,Pe.V_)(null==o?void 0:o.ai_provider)});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),f={summarizeIcon:{icon:Nt,size:32,color:n?"var(--text-t2-text-secondary)":"var(--primary-p1-cobalt-buttons)"},container:"justify-between gap-1",caption:{operaAir:"!capitalize"}},v=(0,l.o6)(f,["container","caption"]);return(0,E.jsxs)(xe.zx,{type:"context-menu",className:(0,m.AK)(v.container),disabled:a.working||n,onClick:d,children:[(0,E.jsx)(A.S,{config:f.summarizeIcon}),(0,E.jsx)("span",{className:(0,m.AK)("text-header-s",v.caption),children:i("summarize_chat")})]})};const Tt=n.p+"assets/b4651ee163c27a993521.svg";var Mt=function(e){var t,n,r,a=e.onAction,o=(0,C.$G)().t,c=(0,g.s0)(),d=(t=function(){a(),c("/".concat(x.n5.MAIN,"/").concat(x.n5.SETTINGS),{state:{initialTab:o("profile_settings_tab")},replace:!0})},n=(0,l.oH)().isAriaInTabView,r=(0,s.Uwy)().userCapabilities,(0,i.useCallback)((function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.PROFILE_MEMORY,context:n?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:input_action_clicked",ai_provider:(0,Pe.V_)(null==r?void 0:r.ai_provider)}),t()}),[t,n,null==r?void 0:r.ai_provider])),u={summarizeIcon:{icon:Tt,size:32,color:"var(--primary-p1-cobalt-buttons)"},container:"justify-between gap-1",caption:{operaAir:"!capitalize"}},f=(0,l.o6)(u,["container","caption"]);return(0,E.jsxs)(xe.zx,{type:"context-menu",className:(0,m.AK)(f.container),onClick:d,children:[(0,E.jsx)(A.S,{config:u.summarizeIcon}),(0,E.jsx)("span",{className:(0,m.AK)("text-header-s",f.caption),children:o("profile_memory_input_action")})]})},Pt=(0,E.jsx)("div",{className:"my-1 h-px bg-secondary-s1-selected-stroke"}),Dt=function(e){var t=e.message,n=e.disabled,r=e.isComposeAvailable,a=e.isChatEmpty,o=e.sendMessage,c=(0,i.useState)(!1),d=(0,H.Z)(c,2),u=d[0],f=d[1],p=(0,s.ljr)().remoteConfig,v=function(){f(!1)},h=(0,l.o6)({content:"bg-levels-l5-primary p-1",contentBorder:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-3",separator:"bg-secondary-s1-selected-stroke my-1 h-px",moreIconColor:"default",operaAir:{content:"bg-levels-l5-primary p-1 air-level-02",contentBorder:"rounded-aria-radius-4",separator:"bg-transparent h-1"}},["content","contentBorder","separator","moreIconColor"]);return(0,E.jsx)(yt,{content:(0,E.jsx)("div",{className:(0,m.AK)("flex flex-col",h.content,h.contentBorder),children:(0,E.jsxs)(xe.hn,{separator:Pt,children:[(0,E.jsx)(St,{message:t,disabled:n,isComposeAvailable:r,onAction:v}),!a&&(0,E.jsx)(Rt,{onAction:v,disabled:n,sendMessage:o}),p.longterm_memory&&(0,E.jsx)(Mt,{onAction:v})]})}),isOpen:u,setIsOpen:f})},Gt=n(39157),Lt=function(e){var t=e.conversationId,n=e.conversation,r=(0,s.Itl)().checkIfExistInRegistry,a=(0,s.J7o)().currentModel,o=(0,i.useMemo)((function(){return"_new"===t||n.data.length<=2&&!n.model}),[t,n]),c=(0,i.useMemo)((function(){return o?"Aria"===a:(0,dt.wO)(n.model)}),[o,a,n.model]),l=(0,i.useMemo)((function(){return r(o?a:n.model)}),[o,a,n.model,r]),d=(0,i.useMemo)((function(){return o?a:n.model||"cloud"}),[o,a,n.model]),u=(0,i.useMemo)((function(){var e=d.split("/");return(null==e?void 0:e.length)<2?d:e[1]}),[d]);return{isAriaModel:c,isCloudModel:l,modelName:d,parsedModelName:u}};const Bt=function(e){var t=e.handleImageUpload,n=e.setMessage,r=e.addNewChat,a=(0,C.$G)().t,o=(0,l.Su)().loggerService,c=(0,s.nT6)().selectedImageDataUrl,d=(0,s.zLZ)().handleImageFromPageDeleted;(0,i.useEffect)((function(){var e=function(){var e=(0,u.Z)(p().mark((function e(){var i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!c){e.next=16;break}if(r(),n(a("hey_aria_whats_on_this_image")),i=null,!c.startsWith("http")){e.next=11;break}return e.next=8,(0,ge.q$)(c);case 8:i=e.sent,e.next=12;break;case 11:i=(0,ge.gk)(c);case 12:if(!i){e.next=15;break}return e.next=15,t([i],!1);case 15:d();case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(0),o.error("Error fetching image:",e.t0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(){return e.apply(this,arguments)}}();c&&e()}),[c])};var Zt=n(73935),Ht=n(11549),Ft=n(50320),Ut=(n(57567),n(50653)),Kt=n(88247),Vt=n(25108);const Wt=function(e){var t=e.children;return(0,E.jsx)("p",{className:"text-subheader-m flex h-5 w-full items-center justify-center text-text-t3-text-gray",children:t})};var zt=(0,i.memo)((function(e){var t=e.isSpeaking,n=e.scale,r=function(e){return t?"":"gradient_".concat(e,"-turn")};return(0,E.jsx)("span",{className:(0,m.AK)("blob"),style:{transform:"scale(".concat(n,")")},children:(0,E.jsxs)("svg",{width:"500",height:"500",viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,E.jsx)("g",{filter:"url(#filter0_f_7257_25)",id:"flare_7257_25",children:(0,E.jsx)("ellipse",{cx:"213.333",cy:"210",rx:"96.6667",ry:"93.3333",fill:"#82F8FF",fillOpacity:"0.4"})}),(0,E.jsx)("g",{filter:"url(#filter1_f_7257_25)",id:"circle_7257_25",children:(0,E.jsx)("circle",{cx:"276.667",cy:"276.667",r:"93.3333",fill:"#5021FF",fillOpacity:"0.4"})}),(0,E.jsx)("mask",{id:"mask0_7257_25",maskUnits:"userSpaceOnUse",x:"130",y:"130",width:"234",height:"234",children:(0,E.jsx)("circle",{cx:"246.667",cy:"246.667",r:"116.667",fill:"#5021FF"})}),(0,E.jsxs)("g",{mask:"url(#mask0_7257_25)",id:"main_7257_25",children:[(0,E.jsx)("g",{filter:"url(#filter2_f_7257_25)",id:r("7257_25_1"),children:(0,E.jsx)("path",{d:"M504.214 89.033C528.721 142.667 505.108 206.013 451.473 230.52C397.839 255.026 467.324 332.996 309.987 177.779C152.65 22.562 309.093 60.7988 362.728 36.2923C416.362 11.7859 479.708 35.3987 504.214 89.033Z",fill:"#F17532"})}),(0,E.jsx)("g",{filter:"url(#filter3_f_7257_25)",id:r("7257_25_2"),children:(0,E.jsx)("path",{d:"M210.209 254.785C115.75 341.021 162.406 361.556 103.438 361.556C44.4699 361.556 -3.33301 313.753 -3.33301 254.785C-3.33301 195.817 44.4699 148.014 103.438 148.014C162.406 148.014 304.667 168.55 210.209 254.785Z",fill:"#82F8FF"})}),(0,E.jsx)("g",{filter:"url(#filter4_f_7257_25)",id:r("7257_25_3"),children:(0,E.jsx)("path",{d:"M223.07 289.462C345.798 253.451 312.895 214.518 365.876 240.406C418.857 266.294 440.82 330.231 414.932 383.212C389.044 436.193 325.107 458.156 272.126 432.268C219.145 406.38 100.342 325.473 223.07 289.462Z",fill:"#4902F4"})})]}),(0,E.jsx)("g",{filter:"url(#filter5_i_7257_25)",id:"shine_7257_25",children:(0,E.jsx)("circle",{cx:"246.667",cy:"246.667",r:"116.667",fill:"#5021FF",fillOpacity:"0.01"})}),(0,E.jsxs)("defs",{children:[(0,E.jsxs)("filter",{id:"filter0_f_7257_25",x:"34.3998",y:"34.4",width:"357.867",height:"351.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"41.1333",result:"effect1_foregroundBlur_7257_25"})]}),(0,E.jsxs)("filter",{id:"filter1_f_7257_25",x:"101.067",y:"101.067",width:"351.2",height:"351.2",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"41.1333",result:"effect1_foregroundBlur_7257_25"})]}),(0,E.jsxs)("filter",{id:"filter2_f_7257_25",x:"81.6831",y:"-133.391",width:"592.214",height:"565.257",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,E.jsxs)("filter",{id:"filter3_f_7257_25",x:"-163.333",y:"-11.9857",width:"565.073",height:"533.542",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,E.jsxs)("filter",{id:"filter4_f_7257_25",x:"9.37744",y:"72.0044",width:"576.418",height:"531.128",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"80",result:"effect1_foregroundBlur_7257_25"})]}),(0,E.jsxs)("filter",{id:"filter5_i_7257_25",x:"130",y:"130",width:"236.667",height:"236.667",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,E.jsx)("feOffset",{dx:"3.33333",dy:"3.33333"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"1.66667"}),(0,E.jsx)("feComposite",{in2:"hardAlpha",operator:"arithmetic",k2:"-1",k3:"1"}),(0,E.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 0.25 0"}),(0,E.jsx)("feBlend",{mode:"normal",in2:"shape",result:"effect1_innerShadow_7257_25"})]})]})]})})})),Yt=n(7013);const qt=function(e){var t=e.transcribedMessage,n=e.isUserSpeaking,r=e.partialTranscribedMessage,a=e.handleMicrophoneButton;return(0,E.jsxs)("div",{className:"flex min-h-20 flex-col items-center justify-center gap-aria-5",children:[(0,E.jsx)("p",{className:"text-subheader-m flex h-5 w-full items-center justify-center text-text-t3-text-gray",children:!!t&&n&&r}),(0,E.jsxs)("div",{className:"relative flex items-center justify-center",children:[n&&(0,E.jsx)("div",{className:"absolute",children:(0,E.jsx)("div",{className:"h-7 w-7 animate-ping rounded-full bg-[#AD45FF] blur-sm"})}),(0,E.jsx)(S.hU,{type:"primary",className:n?"animate-size-down":"",disabled:n,disabledClickable:!0,onClick:a,children:(0,E.jsx)(A.S,{color:n?"var(--text-t1-text-active-icons)":"",src:Yt,size:16,bgSize:"100% 100%"})})]})]})};var $t=n(95579);function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Qt=function e(t){var n=t.onClose,r=t.sendMessage,a=t.conversation,o=t.showOnCloseError,c=(0,$t.Z)().isAriaInTabView,d=(0,C.$G)().t,f=(0,l.Su)(),v=f.loggerService,h=f.networkService,g=(0,l.lm)(),b=g.pushNotification,y=g.notifications,w=g.closeNotification,j=(0,i.useState)(!0),_=(0,H.Z)(j,2),k=_[0],O=_[1],A=(0,i.useState)(""),I=(0,H.Z)(A,2),N=I[0],R=I[1],T=(0,i.useState)(""),M=(0,H.Z)(T,2),P=M[0],D=M[1],G=(0,i.useState)(!0),L=(0,H.Z)(G,2),B=L[0],Z=L[1],F=(0,i.useRef)(),U=(0,i.useRef)(),K=(0,s.R_9)().isVoiceMode,V=(0,s.coc)().chatContext,W=(0,s.Uwy)().userCapabilities,z=(0,s.dQQ)().setIsVoiceMode,Y=(0,i.useMemo)((function(){return a.data.at(-1)}),[a.data]),q=(0,i.useMemo)((function(){return(null==Y?void 0:Y.sender)===X.CI.aria?Y.message:""}),[Y]),$=function(e,t){var n=(0,i.useState)(!1),r=(0,H.Z)(n,2),a=r[0],o=r[1],c=(0,i.useState)(!1),d=(0,H.Z)(c,2),f=d[0],v=d[1],m=(0,i.useState)(1),h=(0,H.Z)(m,2),g=h[0],x=h[1],b=(0,i.useState)([]),y=(0,H.Z)(b,2),w=y[0],j=y[1],_=(0,l.Su)().audioQueueService,C=(0,i.useRef)([]),k=(0,i.useRef)(null),O=(0,i.useRef)(null),A=(0,i.useRef)(0),E=(0,i.useRef)(-1),I=(0,i.useRef)(null),S=(0,i.useRef)(null),N=(0,i.useRef)(new Set),R=(0,i.useRef)(g),T=(0,s.coc)().chatContext,M=(0,i.useCallback)((function(e){j((function(t){return[].concat((0,te.Z)(t),(0,te.Z)(e))}))}),[]);(0,i.useEffect)((function(){return T.working&&_.onNewAudio(e,M),function(){_.offNewAudio(e,M)}}),[T.working]);var P=function(){C.current=[],A.current=0,E.current=-1,N.current.clear(),x(1),j([])};(0,i.useEffect)((function(){var t=function(e){j((function(t){return[].concat((0,te.Z)(t),(0,te.Z)(e))}))};return _.onNewAudio(e,t),function(){P(),_.offNewAudio(e,t)}}),[e]),(0,i.useEffect)((function(){return k.current||(k.current=new AudioContext),function(){G()}}),[]),(0,i.useEffect)((function(){t&&G()}),[t]),(0,i.useEffect)((function(){var e;if(!(0===w.length||f||A.current>=w.length)){var t=w.slice(A.current).filter((function(e){return!N.current.has(e)&&(N.current.add(e),!0)}));if(0!==t.length){A.current=w.length;var n=t.map(Kt.J);(e=C.current).push.apply(e,(0,te.Z)(n)),a||D()}}}),[w]);var D=(0,i.useCallback)((0,u.Z)(p().mark((function e(){var t,n,r,a,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.current&&0!==C.current.length){e.next=4;break}return o(!1),P(),e.abrupt("return");case 4:if(o(!0),t=C.current.shift()){e.next=10;break}return o(!1),P(),e.abrupt("return");case 10:return E.current=A.current-C.current.length,e.prev=11,e.next=14,k.current.decodeAudioData(t);case 14:n=e.sent,(r=k.current.createBufferSource()).buffer=n,(a=k.current.createAnalyser()).fftSize=1024,O.current=a,i=new Uint8Array(a.frequencyBinCount),r.connect(a),a.connect(k.current.destination),I.current=r,function e(){a.getByteFrequencyData(i);var t=1+i.reduce((function(e,t){return e+t}),0)/i.length/255*.8,n=R.current,r=n+.3*(t-n);x(r),R.current=r,S.current=requestAnimationFrame(e)}(),r.start(),r.onended=function(){S.current&&cancelAnimationFrame(S.current),D()},e.next=35;break;case 30:e.prev=30,e.t0=e.catch(11),Vt.error("Audio decoding error:",e.t0),o(!1),P();case 35:case"end":return e.stop()}}),e,null,[[11,30]])}))),[]),G=(0,i.useCallback)((function(){var t;_.offNewAudio(e,M),I.current&&(I.current.stop(),null===(t=I.current)||void 0===t||t.disconnect()),P(),o(!1),v(!1)}),[_,M,e]);return{isSpeaking:a,scale:Number(g.toFixed(2)),stop:G,pause:function(){k.current&&"running"===k.current.state&&(k.current.suspend(),v(!0),o(!1))},resume:function(){k.current&&"suspended"===k.current.state&&(k.current.resume(),v(!1),o(!0),D())}}}(a.id,k),J=$.isSpeaking,Q=$.stop,ee=$.scale,ne=(0,i.useCallback)((function(){F.current&&F.current.getTracks().forEach((function(e){e.stop()})),ie(),z(!1),h.removeWSListener("message",ce),h.removeWSListener("error",le),h.removeWSListener("close",de),n()}),[n,F.current]),ae=function(e){var t=function(e){for(var t=e.length,n=new Int16Array(t),r=0;r<t;r++)n[r]=32767*Math.min(1,e[r]);return n.buffer}(e.inputBuffer.getChannelData(0));h.sendWSMessage(t)},oe=function(){var e=(0,u.Z)(p().mark((function e(){var t,n,r,a,o,i;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.mediaDevices.getUserMedia({audio:!0});case 3:t=e.sent,F.current=t,n=new AudioContext({sampleRate:x.jE}),(r=n.createAnalyser()).fftSize=2048,a=r.frequencyBinCount,o=new Uint8Array(a),r.getByteTimeDomainData(o),i=n.createMediaStreamSource(t),U.current=n.createScriptProcessor(x.qB,1,1),i.connect(r),i.connect(U.current),U.current.connect(n.destination),U.current.addEventListener("audioprocess",ae),O(!0),v.debug("User starts to speak"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(0),v.error("Unknown error occurred",e.t0);case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(){return e.apply(this,arguments)}}(),ie=function(){var e,t;O(!1),U.current||v.error("No scriptProcessor to unmount"),null===(e=U.current)||void 0===e||e.removeEventListener("audioprocess",ae),null===(t=U.current)||void 0===t||t.disconnect(),h.getWSReadyState()===WebSocket.OPEN&&h.closeWSConnection(1e3,"User finished speaking"),F.current&&F.current.getTracks().forEach((function(e){e.stop()})),v.debug("Stopped recording")},se=(0,i.useMemo)((function(){return N.length>=x.tX?N.slice(0,x.tX):N}),[N]),ce=function(e){if("data"in e){var t=N+e.data,n=t.slice(t.length-x.E$,t.length);R(t),D(n)}else v.error("No data found in WS message")},le=function(e){v.error("Unexpected WS error occurred",e),o(d("error_occurred_message"),"error"),ne()},de=function(e){v.debug("WS connection closed - stopping recording",e),ie()},ue=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q(),V.working||J?(V.working&&r({text:"",source:c?"tab-view":"sidebar",sourceRequestOverride:"voice"}),pe()):N||k?(se&&(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.VOICE,context:c?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:"voice_in_out:message_send",ai_provider:(0,Pe.V_)(null==W?void 0:W.ai_provider)}),fe()):(r({text:"",source:c?"tab-view":"sidebar",sourceRequestOverride:"voice"}),pe());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){Z(!1);var e=se;r({text:e,source:c?"tab-view":"sidebar",sourceRequestOverride:"voice"}),e||k||(v.debug("User didn't say anything",e),ie()),R(""),ie()},pe=function(){var e=(0,u.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),O(!0),t="/api/ws/v1/speech-to-text/transcribe",e.next=7,h.openWSConnection({subUrl:t});case 7:h.addWSListener("open",oe),h.addWSListener("message",ce),h.addWSListener("error",le),h.addWSListener("close",de);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){N.length>=x.tX?(setTimeout((function(){o(d("your_question_reached_maximum_length",{maxInputLength:x.tX}),"error")}),.5*x.sh),fe()):N.length>=x.V6&&(y.length&&y.forEach((function(e){return w(e.id)})),b(d("your_question_approaches_maximum_length",{transcribedMessageLength:N.length,maxInputLength:x.tX}),"info"))}),[N]),(0,i.useEffect)((function(){pe()}),[]),(0,i.useEffect)((function(){J||!K||V.working||B||(v.debug("Listening next users voice message"),pe())}),[J,K]),(0,i.useEffect)((function(){k?Q():fe()}),[k]);var ve=(0,l.o6)({closeImagePreview:{dark:Ft,light:Ht}},["closeImagePreview"]),me=(0,i.useMemo)((function(){return k?"i_m_listening":J?"i_m_speaking":V.working?"i_m_thinking":(v.debug("Voice mode encountered unexpected state","chatContext.working, lastAriaMessage, isSpeaking, isUserSpeaking",V.working,q,J,k),"")}),[k,J,V.working,v,q]),he=(0,i.useMemo)((function(){return!!q&&q.includes("![](")&&!B&&!V.working&&(k||J||!me)}),[V.working,B,J,k,q,me]);return(0,Zt.createPortal)((0,E.jsx)("dialog",{tabIndex:-1,id:"voice-overlay",className:(0,m.AK)("fixed inset-x-0 inset-y-0 z-10 h-screen w-screen bg-secondary-s4-surface-overlay","flex flex-col items-center justify-center","gap-3",c?"px-[52px]":"px-[24px]"),open:!0,ref:function(e){null==e||e.focus()},children:(0,E.jsxs)("div",{className:"relative flex h-full w-full flex-col justify-between p-aria-7",children:[(0,E.jsxs)("div",{className:"z-50",children:[(0,E.jsx)("div",{className:"flex w-full flex-row justify-end",children:(0,E.jsx)(S.hU,{dataTestId:(0,m.wE)(e,"button","close-voice-preview"),type:"tertiary",onClick:function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.VOICE,context:c?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:"voice_in_out:close",ai_provider:(0,Pe.V_)(null==W?void 0:W.ai_provider)}),ne()},icon:ve.closeImagePreview,iconSize:32})}),(0,E.jsx)("div",{className:"flex w-full items-center justify-center",children:(0,E.jsx)("p",{className:"text-header-m min-h-5 animate-wavyBlinking text-text-t1-text-active-icons",children:d(me)})})]}),(0,E.jsxs)("div",{className:"relative flex w-full flex-col items-center",children:[(0,E.jsx)("div",{className:(0,m.AK)("relative max-h-[500px] items-center transition-transform duration-500 ease-in-out",he&&"-translate-y-[100px] items-end"),children:(0,E.jsx)(zt,{isSpeaking:J,scale:ee})}),he&&(0,E.jsx)("div",{className:"relative mb-24 translate-y-0 animate-appear-slowly transition-all duration-500 ease-in-out",children:(0,E.jsx)(re.$,{wrapperClass:"max-h-32",message:q,isTextless:!0,components:Jt(Jt({},x.Z$),{},{img:Ut.Z,p:Wt})})})]}),(0,E.jsx)(qt,{transcribedMessage:N,handleMicrophoneButton:ue,isUserSpeaking:k,partialTranscribedMessage:P})]})}),document.body)};var en=function(e){return"string"==typeof e?e:Array.isArray(e)?e.includes(x.vR)?x.vR:e.includes(x._e)?x._e:e[0]||"":""},tn=(0,i.forwardRef)((function(e,t){var n,r,a,o,c=e.hideFileUploadPreview,d=e.addNewChat,f=e.imageHandlers,v=e.readOnly,h=e.message,g=e.setMessage,b=e.sendMessage,y=e.conversation,w=e.messagesContainerRef,j=e.onActiveUserMessageIndexChange,_=e.conversationId,k=e.disabled,O=f.files,A=f.upload,I=f.removeFile,S=f.reset,N=f.limitReached,R=(0,l.oH)().isAriaInTabView,T=(0,C.$G)().t,M=Lt({conversationId:_,conversation:y}),P=M.isAriaModel,D=M.isCloudModel,G=M.parsedModelName,L=(0,l.Su)(),B=L.ariaVoiceReaderService,Z=L.networkService,F=(0,l.lm)().pushNotification,U=(0,i.useRef)(null),K=(0,i.useRef)(null),V=(0,s.coc)().chatContext,W=(0,s.J7o)(),z=W.currentModel,Y=W.fetchedModels,q=(0,s.kGW)(y.id).reusableHighlights,$=(0,l.Cg)().consentNeeded,J=(0,s.cpB)(y.id).promptStudioConfig,Q=(0,s.w8B)().isMenuOpen,ee=(0,s.ljr)().remoteConfig,te=(0,s.Uwy)().userCapabilities,ne=(0,i.useState)(!1),re=(0,H.Z)(ne,2),ae=re[0],oe=re[1],ie=(0,i.useState)(!1),se=(0,H.Z)(ie,2),ce=se[0],le=se[1],de=(0,i.useState)(!1),ue=(0,H.Z)(de,2),fe=ue[0],pe=ue[1],ve=(0,i.useState)(x.V5?x.vR:x._e),me=(0,H.Z)(ve,2),he=me[0],ge=me[1],be=(0,i.useState)(null),ye=(0,H.Z)(be,2),we=ye[0],_e=ye[1],Ce=""===he?T("type_here"):T("chat_input_placeholder",{shortcut:he,interpolation:{escapeValue:!1}}),ke=V.working&&V.conversationId===_,Oe=function(e){if(!ke||"enter"!==e){var t=ke?"":h;b({text:t,source:R?"tab-view":"sidebar",files:O}),U.current,t&&t.length>=x.Fb&&(null==O||!O.some((function(e){return"in_progress"===e.status||void 0===e.status})))&&S(),(0,m.X0)(w),le(!1)}},Ae=(0,i.useCallback)((function(){if((0,m.N2)(null==w?void 0:w.current)&&(0,m.Mx)(w,"instant"),(null==U?void 0:U.current)instanceof HTMLTextAreaElement){U.current.style.height="0px";var e=x.uj;h?(U.current.scrollHeight>x.uj&&(e=Math.min(U.current.scrollHeight,x.$Y)),U.current.style.height="".concat(e,"px")):U.current.style.height="".concat(e,"px")}}),[h,V.working,P]);(0,i.useEffect)((function(){if(we){var e=(0,H.Z)(we,2),t=e[0],n=e[1];F(t,n),_e(null)}}),[we]),(0,i.useEffect)((function(){opr.shodanPrivate.getCommandLineShortcut&&opr.shodanPrivate.getCommandLineShortcut((function(e){ge(en(e))}))}),[]),(0,i.useEffect)((function(){if(opr.shodanPrivate.getCommandLineShortcut){var e=function(){opr.shodanPrivate.getCommandLineShortcut((function(e){ge(en(e))}))};return window.addEventListener("focus",e),function(){window.removeEventListener("focus",e)}}}),[]),(0,i.useEffect)((function(){var e=function(){if((null==U?void 0:U.current)instanceof HTMLTextAreaElement){var e=U.current.placeholder,t=Math.floor((0,dt.VU)(e)),n=U.current.clientWidth-20;pe(t>n)}};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[fe]),(0,i.useEffect)((function(){y.mode===Gt.E.pageContext||y.mode===Gt.E.writingMode?(0,m.Cp)(w):(0,m.Mx)(w),setTimeout((function(){var e;null===(e=U.current)||void 0===e||e.focus()}),0)}),[y.id,y.mode,g,w]),(0,i.useEffect)((function(){Ae()}),[Ae]),(0,i.useEffect)((function(){U.current&&U.current.focus()}),[y.id,y.data.length]),(0,i.useEffect)((function(){var e,t=function(){var e;null===(e=U.current)||void 0===e||e.focus()};return null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.addListener(t),function(){var e;null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.removeListener(t)}}),[]),(0,i.useEffect)((function(){if(!Q){var e=setTimeout((function(){var e;null===(e=U.current)||void 0===e||e.focus()}),300);return function(){return clearTimeout(e)}}}),[Q]);var Ee=(0,i.useCallback)((function(){K.current&&(K.current.value="")}),[K]),Ie=(0,i.useCallback)((function(e){Ee(),I(e)}),[Ee,I]),Se=(0,i.useCallback)(function(){var e=(0,u.Z)(p().mark((function e(t){var n,r=arguments;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A(t,!(r.length>1&&void 0!==r[1])||r[1]),null===(n=U.current)||void 0===n||n.focus(),Ee();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[A,U,Ee]);Bt({handleImageUpload:Se,setMessage:g,addNewChat:d});var Ne=!P&&!(null===(n=Y.find((function(e){return e.family_name===(0,m.zn)("Aria"!==z?z:y.model||"").split(":")[0]})))||void 0===n||null===(n=n.kind)||void 0===n||!n.includes(X.kk.MULTIMODAL)),Re=(0,i.useMemo)((function(){return(null==y?void 0:y.mode)===Gt.E.pageContext}),[null==y?void 0:y.mode]),Te=(0,i.useMemo)((function(){var e;return null!=y&&null!==(e=y.originLink)&&void 0!==e&&e.url?(0,m.z7)(y.originLink.url):T("page_context")}),[null==y||null===(r=y.originLink)||void 0===r?void 0:r.url,T]),Me=(0,i.useMemo)((function(){return!P||Re}),[P,Re]),De=function(){return h.trim().length>=x.Fb||ke?ke?"processing":"default":ee.voice_in_and_out&&!R?"voice":"disabled"},Ge=(null!==(a=null==U||null===(o=U.current)||void 0===o||null===(o=o.value)||void 0===o?void 0:o.length)&&void 0!==a?a:0)>x.V6&&!v&&P,Le=function(){var e=(0,u.Z)(p().mark((function e(t){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),null===(n=U.current)||void 0===n||n.focus(),"voice"!==De()){e.next=25;break}return(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.CHAT,context:R?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:"voice_in_out:open",ai_provider:(0,Pe.V_)(null==te?void 0:te.ai_provider)}),B.stopRead(),e.prev=5,e.next=8,Z.getAuthorized({subUrl:"/api/ws/v1/speech-to-text/health"});case 8:return e.next=10,navigator.permissions.query({name:"microphone"});case 10:if("denied"!==e.sent.state){e.next=14;break}return F({text:T("microphone_access_has_been_denied"),link:"opera://settings/content/siteDetails?site=".concat(encodeURI(x.U8))},"error"),e.abrupt("return");case 14:if(!$){e.next=17;break}return b({text:T("voice_consent_query"),source:R?"tab-view":"sidebar",sourceRequestOverride:"voice"}),e.abrupt("return");case 17:oe(!0),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(5),F(T("error_occurred_message"),"error");case 23:e.next=26;break;case 25:Oe("submitButton");case 26:case"end":return e.stop()}}),e,null,[[5,20]])})));return function(t){return e.apply(this,arguments)}}(),Be={outerContainer:"rounded-aria-radius-3 bg-levels-l1-chat-bg-bg-elements",inputContainer:"rounded-aria-radius-3 bg-levels-l0-extension-bg",textarea:"text-body-l text-text-t1-text-active-icons",textareaPaddingCorrection:"pl-2 pt-[10.2px]",textareaPlaceholderText:"placeholder:text-text-t3-text-gray",modelDisclaimerInputContainer:Me&&"rounded-t-none",operaGx:{textarea:"text-body-l text-text-t2-text-secondary",textareaPaddingCorrection:"pl-2 pt-[10px] !leading-[20px]",modelDisclaimerInputContainer:""},operaAir:{outerContainer:"",inputContainer:"rounded-aria-radius-5 bg-levels-l0-extension-bg",textarea:"text-body-l text-text-t2-text-secondary",textareaPaddingCorrection:"pl-4 pt-[12px]",modelDisclaimerInputContainer:""}},Ze=(0,l.o6)(Be,["outerContainer","inputContainer","textarea","textareaPaddingCorrection","textareaPlaceholderText","modelDisclaimerInputContainer"]);return(0,E.jsxs)("div",{className:"chat-input-wrapper flex flex-col justify-end",children:[(0,E.jsx)("div",{className:"relative z-50 mx-3",children:(0,E.jsxs)("div",{className:"absolute -bottom-2 flex flex-col gap-1",children:[!!q.length&&(0,E.jsx)(ut,{reusableHighlights:q}),!!O.length&&!c&&(0,E.jsx)(je,{files:O,onRemove:Ie})]})}),(0,E.jsxs)("div",{className:(0,m.AK)("z-1 box-border flex w-full select-none items-center justify-center gap-1 p-3",R&&"mb-3",Ze.outerContainer),children:[(0,E.jsx)("div",{className:"grow",children:(0,E.jsx)(lt,{isAriaModel:P,children:(0,E.jsxs)("div",{className:"flex flex-col items-center",children:[!P&&(0,E.jsx)(mt,{content:T(D?"cloud_model_input_disclaimer":"using_local_model",{modelName:G})}),Re&&(0,E.jsx)(mt,{middle:!P,content:T("page_context_disclaimer",{pageName:Te})}),(0,E.jsxs)("div",{ref:t,className:(0,m.AK)("input-container relative flex w-full select-none items-end",Ze.inputContainer,Ze.modelDisclaimerInputContainer),children:[Ge&&(0,E.jsx)("div",{className:"text-body-s absolute -bottom-3 left-2 !text-[8px] text-text-t1-text-active-icons",children:"".concat(h.length,"/").concat(x.tX)}),(0,E.jsx)("textarea",{"data-testid":(0,m.wE)(tn,"textarea","chat-input"),className:(0,m.AK)("hover-scrollbar chat-input m-0 my-1 h-10 w-full resize-none overflow-auto border-none bg-transparent pb-2.5 pr-1 outline-none",Ze.textarea,Ze.textareaPaddingCorrection,Ze.textareaPlaceholderText),placeholder:P?q.length>0?T("type_new_prompt_about_selected_content"):Ce:T("type_here_to_local_model"),maxLength:P?x.tX:void 0,onChange:function(e){g(e.target.value)},value:h,ref:U,onKeyDown:function(e){"Enter"===e.key&&!1===e.shiftKey?(e.preventDefault(),Oe("enter")):"ArrowUp"!==e.key||ce?"ArrowDown"!==e.key||ce?setTimeout((function(){var e;le(Boolean(null===(e=U.current)||void 0===e?void 0:e.value))}),0):(e.preventDefault(),j(1)):(e.preventDefault(),j(-1))},onInput:Ae,onPaste:function(){return le(!0)},disabled:k}),(0,E.jsxs)("div",{className:"mb-1 ml-1 flex flex-row items-center gap-1",children:[(Ne||P)&&!k&&(0,E.jsx)(vt,{disabled:N,onAction:Se,ref:K}),(0,E.jsx)(xe.Rg,{className:"mr-1 h-10 w-10",state:De(),onClick:Le})]})]})]})})}),P&&!$&&(0,E.jsx)(Dt,{message:h,disabled:V.working,isComposeAvailable:J&&Boolean(J.length),isChatEmpty:0===y.data.length,sendMessage:b}),ae&&(0,E.jsx)(Qt,{showOnCloseError:function(e,t){_e([e,t])},onClose:function(){return oe(!1)},sendMessage:b,conversation:y})]})]})}));tn.displayName="InputContainer";const nn=(0,i.memo)(tn),rn=n.p+"assets/ad709c15ec059a326c61.svg",an=n.p+"assets/ac7229d3476fb848ffa0.svg",on=n.p+"assets/3c2395b3f2a83825f3bb.svg";var sn=function e(t){var n=t.menuStatus,r=t.setMenuStatus,a=(0,s.YZY)().isAir,o=(0,i.useCallback)((function(){r(!n)}),[n,r]);return(0,E.jsx)(xe.hU,{dataTestId:(0,m.wE)(e,"button","menu-button"),border:!n,className:"flex h-8 w-8 items-center justify-center !p-0",type:n||a?"secondary":"tertiary",onClick:o,onKeyUp:o,iconSize:12,icon:(0,l.o6)({operaOne:rn,operaAir:an,operaGx:on})})};sn.displayName="SwitchMenuButton";const cn=sn,ln=n.p+"assets/e54584d220911040e9a8.svg";var dn=n(22258);const un=function e(t){var n=t.isBordered,r=void 0===n||n,a=t.id,o=t.currentLabel,c=t.setEditId,d=(0,i.useState)(o),f=(0,H.Z)(d,2),v=f[0],h=f[1],g=(0,C.$G)().t,b=(0,i.useRef)(null),y=(0,s.Jin)().handleUpdateConversation,w=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y({conversationId:a,updateData:{label:v.trim()||g("empty_title"),isLabelGenerated:!1}}),c(null);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){var e=function(e){b.current&&!b.current.contains(e.target)&&c(null)};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[c,b]);var j={container:{operaOne:"py-aria-3",operaGx:"py-aria-3",operaAir:"py-aria-3"},input:"!h-8 flex-grow",border:{operaOne:r?"px-aria-3 border-secondary-s1-selected-stroke border border-solid rounded-aria-radius-3":"",operaGx:r?"px-aria-3 border-levels-l2-hover border border-solid rounded-aria-radius-3":"",operaAir:r?"px-2 border-secondary-s1-selected-stroke border border-solid rounded-aria-radius-5":""}},_=(0,l.o6)(j,["container","input","border"]);return(0,E.jsxs)("div",{className:(0,m.AK)("flex w-full flex-row gap-2",_.container,_.border),ref:b,children:[(0,E.jsx)(xe.oi,{className:_.input,maxLength:x.wN,value:v,ref:function(e){e&&(e.focus(),e.scrollLeft=e.scrollWidth)},onFocus:function(e){return e.currentTarget.setSelectionRange(e.currentTarget.value.length,e.currentTarget.value.length)},onChange:function(e){return t=e.target.value,void h(t);var t},onKeyDown:function(e){!function(e){"Enter"==e.key&&0==e.shiftKey&&(e.preventDefault(),w())}(e)}}),(0,E.jsxs)("div",{className:"flex flex-row gap-aria-2",children:[(0,E.jsx)(xe.hU,{dataTestId:(0,m.wE)(e,"button","decline"),border:!0,icon:ve,type:"secondary",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:function(){return c(null)}}),(0,E.jsx)(xe.hU,{dataTestId:(0,m.wE)(e,"button","submit"),border:!0,icon:dn,type:"primary",className:"flex h-8 w-8 items-center justify-center !p-0",onClick:w})]})]})};var fn=n(53896),pn=n(36609);function vn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vn(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var hn=(0,i.memo)((function(e){var t=e.textStyle,n=e.value,r=e.isTooltipEnabled,a=e.isAnimated,o=r?e.onClick:void 0,s=a?e.onAnimationFinish:void 0,c=a?e.animationDuration:void 0,d=a?e.animationDelay:void 0,u=(0,i.useState)(!0),f=(0,H.Z)(u,2),p=f[0],v=f[1];(0,i.useEffect)((function(){v(!0)}),[n]),(0,i.useEffect)((function(){if(a){var e=setTimeout((function(){v(!1),setTimeout((function(){v(!0),null==s||s()}),c)}),d);return function(){clearTimeout(e)}}}),[a,s,c,d]);var h=(0,l.o6)({container:"box-border inline-block max-w-full overflow-hidden text-nowrap p-2 transition duration-250",rounded:"rounded-aria-radius-3",hover:"hover:bg-levels-l2-hover hover:cursor-pointer",operaGx:{rounded:"rounded-aria-radius-2",hover:"hover:bg-text-t3-text-gray hover:cursor-pointer"},operaAir:{rounded:"rounded-aria-radius-4",hover:"hover:bg-secondary-s3-bg-icons hover:cursor-pointer"}},["container","hover","rounded"]);return r?(0,E.jsx)(S.u,{className:(0,m.AK)("max-w-[250px] animate-appear"),title:(0,pn.t)("click_to_edit_name"),offsetValue:8,children:function(e){var r=e.ref,i=e.referenceProps;return(0,E.jsx)("span",mn(mn({className:(0,m.AK)(t||"",h.container,h.hover,h.rounded,p?"text-ellipsis":"animate-typing ease-typing"),style:a?{animationDuration:"".concat(c,"ms")}:void 0,role:"button",tabIndex:-1,onClick:o,onKeyUp:o,ref:r},i),{},{children:n}))}}):(0,E.jsx)("span",{className:(0,m.AK)(h.container,h.rounded,p?"text-ellipsis":"animate-typing ease-typing"),style:a?{animationDuration:"".concat(c,"ms")}:void 0,children:n})})),gn=n(53744),xn=n(96885),bn=n(61401);function yn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yn(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const jn=function(e){var t=e.model,n=e.currentModel,r=e.onClick,a=(0,i.useRef)(null),o=(0,xn.d)(a),s="Aria"===t.name?["Aria",""]:(0,m.zn)(t.name).split(":"),c=(0,H.Z)(s,2),l=c[0],d=c[1],u=(0,i.useMemo)((function(){return n===(null==t?void 0:t.name)}),[n,t]);return(0,E.jsx)("div",{className:(0,m.AK)("mx-2 flex flex-row items-center justify-between gap-2 border-b border-solid border-secondary-s1-selected-stroke py-2 text-text-t1-text-active-icons last:border-none","Aria"===t.name&&"text-text-gray"),children:(0,E.jsxs)("div",wn(wn({className:"flex w-full flex-row items-center justify-between gap-2 overflow-hidden"},o&&{title:(0,m.zn)(t.name)}),{},{children:[(0,E.jsxs)("div",{className:(0,m.AK)("flex flex-col justify-between overflow-hidden"),children:[(0,E.jsx)("p",{className:"text-body-s text-t1-text-active-icons overflow-hidden text-ellipsis whitespace-nowrap !capitalize",ref:a,children:l}),d&&(0,E.jsx)("p",{className:"text-body-s mt-1 overflow-hidden text-ellipsis whitespace-nowrap text-text-gray",ref:a,children:d})]}),(0,E.jsx)("div",{children:(0,E.jsx)(bn.Z,{id:"radio_input_type",checked:u,onChange:function(){r(t)}})})]}))})};function _n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+e)return"0 Bytes";var n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,r)).toFixed(n))," ").concat(["Bytes","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"][r])}var Cn=n(30845),kn=n(68209);function On(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function An(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?On(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):On(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var En=function(e){return e.map((function(e){var t=e.name,n=e.size,r=e.name.split("/"),a=r[r.length-1];return An(An({},e),{},{id:t,name:a,tag:a,size:_n(n),download:{timestamp:Date.parse(e.modified_at),inProgress:null,status:null,total:null}})}))},In=function(e,t,n){return e&&t?Math.round(e/t*100):n?0:void 0},Sn=function(e,t){var n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:new TextDecoder("utf-8")).decode(e).split("\n").filter((function(e){return e.length}));return t.push.apply(t,(0,te.Z)(n)),t[t.length-1]},Nn=function(e,t){var n,r,a,o,i,s;if(!e.download||!t.download)return NaN;var c=!(null!==(n=e.download)&&void 0!==n&&n.timestamp)&&(null===(r=t.download)||void 0===r?void 0:r.timestamp),l=(null===(a=e.download)||void 0===a?void 0:a.timestamp)&&!(null!==(o=t.download)&&void 0!==o&&o.timestamp),d=!(null!==(i=e.download)&&void 0!==i&&i.timestamp||null!==(s=t.download)&&void 0!==s&&s.timestamp);return c?-1:l?1:d?In(e.download.inProgress,e.download.total,e.download)-In(t.download.inProgress,t.download.total,t.download):t.download.timestamp-e.download.timestamp},Rn=(0,Cn.Z)((function(e,t,n){return{items:e,handleItemToggling:t,getItemState:n}}));const Tn=function(e){var t=e.isAvailable,n=e.testId,r=e.headerText,a=e.models,o=e.currentModel,i=e.handleKeyDown,s=e.handleOnClick;return t?(0,E.jsxs)("div",{"data-testid":n,children:[(0,E.jsx)("p",{className:"mb-0.5 whitespace-nowrap font-be-vietnam text-xxs font-normal text-text-t1-text-active-icons",children:r}),(0,E.jsx)("div",{className:"flex max-h-[124px] w-full flex-col overflow-auto rounded-aria-radius-3 bg-levels-l3-cards font-be-vietnam",children:a.map((function(e){return(0,E.jsx)(jn,{model:{id:e.name,name:e.name},currentModel:o,onKeyDown:function(){return i(e)},onClick:function(){return s(e)}},e.name)}))})]}):null};const Mn=function e(t){var n=t.conversationId,r=t.conversation,a=t.addNewChat,o=(0,g.s0)(),c=(0,C.$G)().t,l=(0,s.coc)().chatContext,d=(0,s.J7o)(),f=d.currentModel,h=d.localModels,b=d.localModelsServiceStatus,y=(0,s.MII)().isLocalModelsEnabled,w=(0,s.ljr)().remoteConfig,j=(0,s.Itl)().fetchedCloudModels,_=(0,s.pb4)().audience,k=(0,s.Qck)().setModel,O=(0,s.Qck)().addModelList,A=(0,i.useState)(!1),I=(0,H.Z)(A,2),N=I[0],R=I[1],T=(0,i.useRef)(null),M=Lt({conversationId:n,conversation:r}).isAriaModel,P=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!y||"RUNNING"!==b){e.next=8;break}return e.t0=O,e.t1=En,e.next=5,(0,m._f)();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(e){var t=kn.D.IMAGE_GENERATION,n=kn.D.TEXT,r=kn.$.AI_CLUSTER;return e?e.reduce((function(e,a){var o=a.type,i=a.provider;return o===t?e.imageModels.push(a):i===r?e.aiClusterModels.push(a):o===n&&i!==r&&e.otherTextModels.push(a),e}),{imageModels:[],aiClusterModels:[],otherTextModels:[]}):{imageModels:[],aiClusterModels:[],otherTextModels:[]}}(j),G=D.imageModels,L=D.aiClusterModels,B=D.otherTextModels;(0,i.useEffect)((function(){P()}),[y,b]),(0,gn.O8)(T,(function(){N&&R(!1)})),(0,i.useEffect)((function(){l.working||(r.data.length>1&&r.model?k(r.model):r.data.length>1&&"_new"!==n&&!r.model&&k("Aria"))}),[r.model,n]);var Z=(null==_?void 0:_.identifier)===v.$p,F=!M||"Aria"!==f&&"_new"===n||"Aria"!==r.model&&"Aria"!==f,U=j&&(null==j?void 0:j.length)>0,K=G&&(null==G?void 0:G.length)>0,V=L&&(null==L?void 0:L.length)>0,W=B&&(null==B?void 0:B.length)>0,z=function(){R(!N)},Y=F?(0,m.zn)(r.model||f).split(":"):["Aria",""],q=(0,H.Z)(Y,2),$=q[0],X=q[1],J=(0,i.useCallback)((function(e){R(!1),"_new"!==n&&a(),k(e.name)}),[a,n,k]),Q=(0,i.useCallback)((function(e){R(!1),k(e.name),a()}),[a,k]);return(0,E.jsxs)("div",{ref:T,className:(0,m.AK)("absolute -top-4 z-2 rounded-aria-radius-3 border border-solid border-secondary-s1-selected-stroke bg-levels-l5-primary text-text-t1-text-active-icons shadow-md",N&&"overflow-hidden",!N&&F?"max-w-[85px]":"max-w-[153px]"),children:[(0,E.jsx)("div",{role:"button",onKeyDown:z,tabIndex:-1,onClick:z,children:F?(0,E.jsx)("div",{className:"flex flex-col items-center justify-center py-2",children:(0,E.jsx)("div",{className:"w-full gap-2 text-center",children:(0,E.jsxs)("div",{className:(0,m.AK)("flex h-6 flex-col justify-between",X?"h-6":"h-auto"),children:[(0,E.jsx)("p",{className:"text-body-s text-t1-text-active-icons overflow-hidden text-ellipsis whitespace-nowrap px-2 !capitalize",children:$}),X&&(0,E.jsx)("p",{className:"text-body-s mt-1 overflow-hidden text-ellipsis whitespace-nowrap px-2 text-text-gray",children:X})]})})}):(0,E.jsx)("div",{className:"flex h-7 w-full flex-row items-center justify-center px-aria-2 py-aria-4",children:(0,E.jsx)("p",{"data-testid":(0,m.wE)(e,"p","choose-title"),className:"text-header-s-bold text-center",children:c(U?"choose_model":"choose_local_model")})})}),(0,E.jsx)("div",{className:(0,m.AK)("grid overflow-hidden transition-all duration-300",N?"h-auto":"h-0"),style:{gridTemplateRows:N?"1fr":"0fr"},children:(0,E.jsx)("div",{className:"flex min-h-0 w-full overflow-hidden",children:(0,E.jsxs)("div",{className:"flex flex-col gap-2 overflow-hidden p-aria-4 pt-0",children:[N&&F&&(0,E.jsx)("div",{className:"flex w-full flex-row items-center justify-center",children:(0,E.jsx)("p",{"data-testid":(0,m.wE)(e,"p","choose-title"),className:"text-header-s-bold whitespace-nowrap text-center",children:c(U?"choose_model":"choose_local_model")})}),(0,E.jsx)(Tn,{isAvailable:V,testId:(0,m.wE)(e,"div","cloud-text-models-section"),headerText:c("cloud_models_opera_cluster"),models:L,currentModel:r.model||f,handleKeyDown:Q,handleOnClick:J}),(0,E.jsx)(Tn,{isAvailable:K,testId:(0,m.wE)(e,"div","cloud-image-models-section"),headerText:c("cloud_models_image"),models:G,currentModel:r.model||f,handleKeyDown:Q,handleOnClick:J}),(0,E.jsx)(Tn,{isAvailable:W,testId:(0,m.wE)(e,"div","cloud-api-models-section"),headerText:c("cloud_models_api"),models:B,currentModel:r.model||f,handleKeyDown:Q,handleOnClick:J}),Z&&w.local_models&&(0,E.jsxs)(E.Fragment,{children:[h.length?y&&(0,E.jsx)("div",{"data-testid":(0,m.wE)(e,"div","local-models-section"),className:"flex w-full flex-col overflow-clip rounded-aria-radius-3 bg-levels-l3-cards font-be-vietnam",children:h.filter((function(e){var t;return!(null!==(t=e.download)&&void 0!==t&&t.inProgress)&&e.size})).map((function(e){return(0,E.jsx)(jn,{model:e,currentModel:r.model||f,onKeyDown:function(){return Q(e)},onClick:function(){return J(e)}},e.name)}))}):(0,E.jsx)("p",{className:"text-body-s mx-auto max-w-[130px] text-text-t3-text-gray",children:c("download_local_models_in_aria_settings")}),(0,E.jsx)(S.zx,{type:"tertiary",onClick:function(){return o("/".concat(x.n5.MAIN,"/").concat(x.n5.SETTINGS),{state:{initialTab:c("local_models")}})},className:"h-8",children:c("go_to_settings")})]})]})})})]})};const Pn=function(e){var t=e.addNewChat,n=e.conversation,a=e.conversationId,o=e.conversationTitle,c=e.isAnimated,d=void 0!==c&&c,u=e.onAnimationFinish,f=(0,C.$G)().t,p=(0,l.oH)().isAriaInTabView,v=(0,s.j$h)().handleMenuOpenStateChanged,h=(0,l.H9)(),g=h.isMenuPinned,x=h.isMenuOpen,b=(0,s.ljr)().remoteConfig,y=(0,s.MII)().isLocalModelsEnabled,w=(0,s.Itl)().fetchedCloudModels,j=(0,s.Qck)().setModel,_=(0,i.useState)(!1),k=(0,H.Z)(_,2),O=k[0],A=k[1],I=function(){j("Aria"),t()},N=function(){A("_new"!==a)},R=(0,l.o6)({header:"border-b border-b-secondary-s1-selected-stroke",headerProductName:"ml-1 font-mono text-xs font-bold uppercase leading-3.5",headerMenu:"dark:text-white",headerChatTitle:"text-sm",operaGx:{header:"box-border border-b border-secondary-s1-selected-stroke border-image-1-header",headerMenu:"",headerProductName:"ml-2 font-sf-pro text-sm font-semibold leading-4.5 text-classic-gx-no-00 dark:text-classic-gx-no-100",headerChatTitle:"text-lg"},operaAir:{headerProductName:"ml-2 leading-4.5 text-[14px] text-text-t1-text-active-icons"}},["header","headerProductName","headerChatTitle","headerMenu"]);return(0,E.jsxs)("div",{className:"relative",children:[(0,E.jsx)("div",{className:(0,m.AK)("header relative z-1 flex h-[56px] select-none items-center gap-11 p-3",R.header,p?"justify-between":"justify-center"),children:O?(0,E.jsx)(un,{isBordered:!1,id:a,currentLabel:o,setEditId:function(e){null===e&&A(!1)}}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:(0,m.AK)("flex h-5 basis-28 items-center sidebarless:visible",R.headerMenu,x?"invisible":"visible"),children:[p&&(0,E.jsxs)("button",{onClick:I,className:"flex items-center",children:[(0,E.jsx)(fn.Z,{}),(0,E.jsx)("span",{className:(0,m.AK)("mr-2",R.headerProductName),children:f("product_name.opera")})]}),!g&&!x&&(0,E.jsx)(cn,{menuStatus:x,setMenuStatus:v})]}),(0,E.jsxs)("div",{className:(0,m.AK)("text-body-l flex grow flex-col items-center justify-center overflow-hidden text-ellipsis whitespace-nowrap font-be-vietnam text-text-t1-text-active-icons sidebarless:max-w-[400px]",R.headerChatTitle),children:[r.e&&(0,E.jsx)("div",{className:"absolute -top-[2px]",children:(0,E.jsx)("small",{children:a})}),d&&u?(0,E.jsx)(hn,{isTooltipEnabled:"_new"!==a,value:o,isAnimated:!0,animationDelay:0,animationDuration:1e3,onAnimationFinish:u,onClick:N}):(0,E.jsx)(hn,{isTooltipEnabled:"_new"!==a,value:o,isAnimated:!1,onClick:N})]}),(0,E.jsx)("div",{className:"flex basis-28 flex-col items-end",children:(0,E.jsx)(S.hU,{icon:ln,type:"primary",onClick:I,className:"h-8 w-8 !p-0"})})]})}),(b.local_models&&y||(null==w?void 0:w.length)>0)&&(0,E.jsx)("div",{className:"absolute bottom-0 flex w-full items-center justify-center",children:(0,E.jsx)(Mn,{conversationId:a,conversation:n,addNewChat:t})})]})};var Dn=n(36459);const Gn=function(e){(0,Dn.Z)(e);var t=(0,C.$G)().t;return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{className:"text-body-s mt-3 w-full select-none text-center text-text-t3-text-gray",children:[(0,E.jsx)("span",{children:t("chat_misleading_responses")}),(0,E.jsx)("a",{className:"cursor-pointer underline underline-offset-1",href:"http://help.opera.com/ai-chat-faq",target:"_blank",rel:"noopener noreferrer",draggable:"false",children:t("learn_more")})]})})};const Ln=function(e){(0,Dn.Z)(e);var t=(0,C.$G)().t;return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)("div",{className:"text-body-s w-full select-none text-center text-text-t3-text-gray",children:(0,E.jsx)("span",{children:t("chat_read_only")})})})};var Bn=n(59295),Zn=n(25108);function Hn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hn(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Un(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Kn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kn(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Kn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vn(e,t,n){for(var r=document.createNodeIterator(e,NodeFilter.SHOW_ALL),a="",o="",i=!1,s=r.nextNode(),c=function(e){if(zn(e))if(e===t){var r=e.textContent||"",s=r.substring(0,n),c=r.substring(n);a+=s,o+=c,i=!0}else i||e===t?i&&e!==t&&(o+=e.textContent):a+=e.textContent};s;)c(s),s=r.nextNode();return{prevTextContent:a,nextTextContent:o,messageChildNodeOffset:n}}function Wn(e){if(e.nodeType===Node.TEXT_NODE)return e;for(var t=0;t<e.childNodes.length;t++){var n=Wn(e.childNodes[t]);if(n)return n}for(var r=e.nextSibling;r;){var a=Wn(r);if(a)return a;r=r.nextSibling}return null}var zn=function(e){var t;if(!e)return!1;if(e.nodeType!==Node.TEXT_NODE)return!1;var n=e.parentElement;if(n){if(n.dataset.ignoreHighlighter)return!1;if("none"!==window.getComputedStyle(n).getPropertyValue("user-select"))return!!(null===(t=e.parentElement)||void 0===t?void 0:t.closest(".message"))}},Yn=function e(t){if(!t)return null;if(zn(t))return t;for(var n=t.lastChild;n;){var r=e(n);if(r)return r;n=n.previousSibling}return null};function qn(e,t){var n;if(!t){var r=Yn(e);if(zn(r))return r}for(var a=e.previousSibling;a;){var o=qn(a,!1);if(zn(o))return o;a=a.previousSibling}for(var i=e.parentNode;i&&!i.previousSibling;)i=i.parentNode;return null!==(n=i)&&void 0!==n&&n.previousSibling?qn(i.previousSibling,!1):null}function $n(e){var t=e.cloneRange();if(t.startContainer.nodeType!==Node.TEXT_NODE){var n=Wn(t.startContainer);n&&t.setStart(n,0)}if(t.endContainer.nodeType!==Node.TEXT_NODE){var r,a=qn(t.endContainer,!0);if(a)t.setEnd(a,(null===(r=a.textContent)||void 0===r?void 0:r.length)||0)}return t}function Xn(e){for(var t,n,r,a,o=(e=$n(e)).startContainer,i=e.endContainer,s=document.createNodeIterator(e.commonAncestorContainer,NodeFilter.SHOW_ALL),c=s.nextNode(),l=!1,d=function(s){var c=s.parentElement;if(c&&"none"!==window.getComputedStyle(c).getPropertyValue("user-select")){var l=null==c?void 0:c.closest(".message");if(l){if(s===o){var d=Vn(l,s,e.startOffset);t=l,n=d.prevTextContent.length}if(s===i){var u=Vn(l,s,e.endOffset);r=l,a=u.prevTextContent.length}}}};c;){if(c===o&&(l=!0),l&&c.nodeType===Node.TEXT_NODE&&d(c),c===i){l=!1;break}c=s.nextNode()}if(void 0!==t&&void 0!==r&&void 0!==n&&void 0!==a){var u="message-to",f=t.classList.contains(u),p=r.classList.contains(u);return{firstMessageId:t.id,firstMessageIsAriaResponse:f,firstMessageOffset:n,lastMessageId:r.id,lastMessageIsAriaResponse:p,lastMessageOffset:a}}Zn.warn("WARN: could not convert browser range to chat messages range",{range:e,firstParentMessageElement:t,lastParentMessageElement:r,firstParentMessageElementStartOffset:n,lastParentMessageElementEndOffset:a})}function Jn(e){var t=e.firstMessageId,n=e.firstMessageOffset,r=e.lastMessageId,a=e.lastMessageOffset,o=document.getElementById(t),i=document.getElementById(r);if(o&&i){var s=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"preffer_prev",r=e,a=0,o=function(e){if(e.nextSibling)return e.nextSibling;for(var t=e.parentNode;t&&!t.nextSibling;)t=t.parentNode;return t?t.nextSibling:null};r;){if(zn(r)){var i=r.textContent.length;if("preffer_next"===n){if(a+i>t)return{textNode:r,actualOffset:t-a}}else if(a+i>=t)return{textNode:r,actualOffset:t-a};a+=i}r=r.firstChild||o(r)}},c=s(o,n,"preffer_next"),l=s(i,a);if(c&&l){var d=new Range;return d.setStart(c.textNode,c.actualOffset),d.setEnd(l.textNode,l.actualOffset),d}Zn.warn("WARN: Could not locate text nodes for range",{startMessageElement:o,firstMessageOffset:n,startResult:c,endMessageElement:i,lastMessageOffset:a,endResult:l})}else Zn.warn("WARN: Could not find message elements in DOM",{firstMessageId:t,lastMessageId:r})}function Qn(e,t){if(!t)return"";var n=t.firstMessageId,r=t.firstMessageOffset,a=t.lastMessageOffset;return"hl_".concat(e,"_").concat(n,"_").concat(r,"_").concat(a)}function er(e){for(var t,n="",r=document.createNodeIterator(e,NodeFilter.SHOW_TEXT,{acceptNode:function(e){return zn(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});t=r.nextNode();)n+=t.textContent;return n}var tr=["rephrase"];function nr(e,t,n,r){var a,o=e.chatMessagesRange,i=o.firstMessageId,s=o.lastMessageId,c=o.firstMessageOffset,l=o.lastMessageOffset,d=0,u=Un((0,Bn.Kx)(n,r));try{for(u.s();!(a=u.n()).done;){var f=a.value;i===t&&c>d&&(f.added&&f.count&&(c+=f.count),f.removed&&f.count&&(c-=f.count)),s===t&&l>=d&&(f.added&&f.count&&(l+=f.count),f.removed&&f.count&&(l-=f.count)),!f.removed&&f.count&&(d+=f.count)}}catch(e){u.e(e)}finally{u.f()}var p=Fn(Fn({},o),{},{firstMessageOffset:c,lastMessageOffset:l});return Fn(Fn({},e),{},{chatMessagesRange:p,id:tr.includes(e.id)?e.id:Qn(e.conversationId,p)})}function rr(e,t){for(var n,r,a=[],o=0,i=0;i<e.length;i+=1){var s=!1;do{if(n=e[i],r=t[o],n===r||" "===n&&"\n"===r)s=!0,a[i]=o,"\n"!==e[i]&&(o+=1);else{var c;o+=1;var l=t.substring(o).match(/^\```[\w]+/);if(null!=l&&null!==(c=l[0])&&void 0!==c&&c.length&&(o+=l[0].length),o>t.length-1){if(""!==e.substring(o).trim()){var d="Cannot map output to source txt at index ".concat(o);throw Zn.error(d,{outputLength:e.length,outputIndex:i,sourceIndex:o,opart:e.substring(i-10,i+10),sourceLength:t.length,lettersMap:a,so:{output_text:e,source_text:t}}),new Error(d)}o=t.length-1,s=!0}}}while(!s)}return a}function ar(e){return e?e.nodeType!==Node.TEXT_NODE?e:e.parentNode?ar(e.parentNode):null:null}function or(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}function ir(e){var t=(0,te.Z)(e.matchAll(/<link(?:\s+category="([^"]*)"?)?>/g)),n=(0,te.Z)(e.matchAll(/<\/link>/g));if(n.length>t.length){var r=n[0];void 0!==r.index&&(e=or(e,r.index,r[0].length,""))}if(n.length<t.length){var a=t[t.length-1];void 0!==a.index&&(e=or(e,a.index,a[0].length,""))}return e}function sr(e,t,n){for(var r=[" ","!","#","(",")","*","+","-",".","=",">","?","[","\f","\n","\r","\t","\v","]","_","`","|","~","'","/","<",'"',"\\","{","}",","];t>0&&!r.includes(e[t-1]);)t--;for(;n<e.length&&!r.includes(e[n]);)n++;return[t,n]}var cr=function(e){var t=document.createElement("canvas").getContext("2d");return t?(t.font="400 14px 'Be Vietnam'",t.measureText(e).width):-1},lr=function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".replace(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",""),t=e.length;return e.charAt(Math.floor(Math.random()*t))},dr=function(e){for(var t,n=e.length,r=cr(e),a=e,o=0,i=Math.abs(o-r),s=0;s<10;s+=1){t=e;for(var c=(0,te.Z)(t),l=0;l<1;l+=1){var d=Math.floor(Math.random()*n);c[d]=lr(c[d])}t=c.join(""),o=cr(t);var u=Math.abs(o-r);u<i&&(i=u,a=t)}return a},ur=n(29403),fr={attributes:{source:"aria-extension"}};fr.styleTagTransform=nt(),fr.setAttributes=Je(),fr.insert=$e().bind(null,"head"),fr.domAPI=Ye(),fr.insertStyleElement=et();We()(ur.Z,fr);const pr=ur.Z&&ur.Z.locals?ur.Z.locals:void 0;function vr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){throw e})),f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){s=!0,o=e})),f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var hr=new we.mQ({env:"development",name:"HIGHLIGHTER DOM UTILS"});function gr(e,t,n){var r=t.id,a=t.chatMessagesRange;if(e){var o=function(e,t){if(e){for(var n=t.firstMessageId,r=t.lastMessageId,a=t.firstMessageOffset,o=t.lastMessageOffset,i=[],s=document.createNodeIterator(e,NodeFilter.SHOW_ALL),c=!1,l=!1,d=0,u=0,f=!1,p=function(e){if(zn(e)){var t=e.parentElement;if(t){var s=null==t?void 0:t.closest(".message");if(s&&"none"!==window.getComputedStyle(t).getPropertyValue("user-select")&&(s.id===n&&(c=!0),c)){var p=void 0,v=void 0,m=e.textContent||"";s.id===r&&(o-u>m.length?u+=m.length:(v=o-u,f=!0)),!l&&a-d>m.length?d+=m.length:(l||(l=!0,p=a-d),p!==m.length&&i.push({node:e,startOffset:p,endOffset:v}))}}}},v=s.nextNode();v&&!f;)p(v),v=s.nextNode();return i}}(e,a);if(o){var i,s=vr(o);try{for(s.s();!(i=s.n()).done;){var c,l=i.value;if(null!=l&&null!==(c=l.node)&&void 0!==c&&c.textContent){var d=document.createElement("span");d.className="outer-highlight";var u=document.createElement("span"),f=document.createElement("span"),p=document.createElement("span"),v=(0,m.AK)(pr.highlighter,t.selectionColor&&pr[t.selectionColor]);if(f.id=r,f.className=v,"rephrase"===t.type){var h=Date.now()-t.timestamp;Object.assign(f.style,{animationDelay:"-".concat(h,"ms")})}else f.addEventListener("click",(function(e){var r=window.getSelection();null!=r&&r.toString()||n(e,t)}));var g,x="",b="",y=l.node.textContent;void 0!==l.startOffset&&(x=y.substring(0,l.startOffset)),g=y.substring(l.startOffset||0,l.endOffset),void 0!==l.endOffset&&(b=y.substring(l.endOffset)),x&&(u.textContent=x,d.appendChild(u)),f.textContent=g,d.appendChild(f),b&&(p.textContent=b,d.appendChild(p));var w=l.node.parentNode;if(w)d._origTextNode=l.node,w.replaceChild(d,l.node)}}}catch(e){s.e(e)}finally{s.f()}}}}function xr(e){if(e){var t=e.querySelectorAll(".outer-highlight");if(t.length){var n,r=vr(t);try{for(r.s();!(n=r.n()).done;){var a=n.value,o=a.parentNode;if(o){var i=a;o.replaceChild(i._origTextNode,a)}else hr.info("PARENT OF .outer-highlight span NOT FOUND")}}catch(e){r.e(e)}finally{r.f()}}}}function br(){if(!window.renderingHighlights&&window.highlightsRendered){window.highlightsRendered=!1;var e=document.getElementById("messages-container");e&&xr(e)}}var yr=n(71002);const wr=function(e){var t=e.option,n=void 0===t?"default":t,r=e.selectedOption,a=void 0===r?"":r,o=e.size,c=void 0===o?24:o,d=e.onClick,u=(0,s.Uwy)().userCapabilities,f=(0,s._gZ)().contextType,p=(0,l.oH)().isAriaInTabView,v=(0,i.useCallback)((function(){d(n),(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.REFINER,context:p?X.hG.BROWSER_TAB:f,str_value:"ColorSelected",ai_provider:(0,Pe.V_)(null==u?void 0:u.ai_provider)})}),[d,n,p,f,null==u?void 0:u.ai_provider]),h={shape:{operaOne:"svg",operaGx:"rect",operaAir:"circle"},default_fill:"fill-[--opera-chatbot-message-highlight-bg-default]",custom1_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-1]",custom2_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-2]",custom3_fill:"fill-[--opera-chatbot-message-highlight-bg-custom-3]",stroke:a===n?"stroke-[--primary-p1-cobalt-buttons]":"stroke-[--secondary-s1-selected-stroke]",default_bg:"bg-[--opera-chatbot-message-highlight-bg-default]",custom1_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-1]",custom2_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-2]",custom3_bg:"bg-[--opera-chatbot-message-highlight-bg-custom-3]",border_bg:a===n?"bg-[--primary-p1-cobalt-buttons]":"bg-[--secondary-s1-selected-stroke]"},g=(0,l.o6)(h,"shape"),x=(0,l.o6)(h,"".concat(n,"_fill")),b=(0,l.o6)(h,"stroke"),y=(0,l.o6)(h,"".concat(n,"_bg")),w=(0,l.o6)(h,"border_bg"),j=(0,m.AK)(x,b);return"svg"===g?(0,E.jsx)("svg",{className:"cursor-pointer hover:scale-110 hover:duration-150",xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",onClick:v,children:(0,E.jsx)("path",{d:"M4.46447 4.46447C3.66191 5.26702 3.31672 6.27752 3.15536 7.47766C2.99995 8.63362 2.99997 10.1034 3 11.9268L3 12L3 12.0732C2.99997 13.8966 2.99995 15.3664 3.15536 16.5223C3.31672 17.7225 3.66191 18.733 4.46447 19.5355C5.26702 20.3381 6.27752 20.6833 7.47766 20.8446C8.63363 21 10.1034 21 11.9269 21H12H12.0731C13.8966 21 15.3664 21 16.5223 20.8446C17.7225 20.6833 18.733 20.3381 19.5355 19.5355C20.3381 18.733 20.6833 17.7225 20.8446 16.5223C21 15.3664 21 13.8966 21 12.0731V12V11.9269C21 10.1034 21 8.63363 20.8446 7.47766C20.6833 6.27752 20.3381 5.26702 19.5355 4.46447C18.733 3.66191 17.7225 3.31672 16.5223 3.15536C15.3664 2.99995 13.8966 2.99997 12.0732 3L12 3L11.9268 3C10.1034 2.99997 8.63362 2.99995 7.47766 3.15536C6.27752 3.31672 5.26702 3.66191 4.46447 4.46447Z",className:j,strokeWidth:"2"})}):"rect"===g?(0,E.jsx)("button",{className:(0,m.AK)("flex items-center justify-center outline-none","h-5 w-5 rounded-aria-radius-1",w,"cursor-pointer hover:scale-110 hover:duration-150"),onClick:v,children:(0,E.jsx)("div",{className:(0,m.AK)("h-4 w-4 rounded-aria-radius-1",y)})}):(0,E.jsx)("button",{className:(0,m.AK)("flex items-center justify-center outline-none","h-5 w-5 rounded-aria-radius-3",w,"cursor-pointer hover:scale-110 hover:duration-150"),onClick:v,children:(0,E.jsx)("div",{className:(0,m.AK)("h-4 w-4 rounded-aria-radius-3",y)})})};var jr=n(44971);const _r=function(e){var t=e.setShowBorder,n=e.optionHandler,r=e.optionText,a=e.disabled,o=(0,l.o6)({text:"text-button-m",radius:"rounded-aria-radius-1",height:"h-4",background:"hover:bg-levels-l2-hover",separator:"opacity-100 mx-[3px]",padding:"px-1",operaAir:{text:"text-header-s",radius:"rounded-aria-radius-3",separator:"opacity-0",height:"h-6",padding:"px-2"},operaGx:{text:"text-header-s",height:"h-5",separator:"opacity-100 mx-[2px]"}},["text","radius","background","separator","height","padding"]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:(0,m.AK)("h-4 w-[1px] bg-secondary-s1-selected-stroke duration-150",o.separator)}),(0,E.jsx)("div",{onMouseEnter:function(){return t(!1)},onMouseLeave:function(){return t(!0)},className:(0,m.AK)(!a&&o.background,"flex items-center text-center transition-all duration-150",o.radius,o.height,a&&"pointer-events-none opacity-50"),children:(0,E.jsx)("button",{className:(0,m.AK)(o.text,o.padding,"h-full cursor-pointer select-none bg-transparent text-text-t1-text-active-icons"),type:"button",onClick:n,children:r})})]})};var Cr=n(25108);function kr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kr(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ar(e){return e&&"object"===(0,yr.Z)(e)&&"current"in e}var Er=(0,i.forwardRef)((function(e,t){var n,r,a=e.align,o=e.highlightData,c=e.x,d=e.y,u=e.conversation,f=e.readOnly,p=e.setClickedHighlighter,v=(0,s.Uwy)().userCapabilities,h=(0,l.Su)().loggerService,g=o.chatMessagesRange,b=o.conversationId,y=o.id,w=o.selectionColor,j=o.text,_=(0,C.$G)().t,k=(0,l.oH)().isAriaInTabView,O=(0,s.uEF)(),A=O.setHighlight,I=O.removeHighlight,S=(0,s.okl)().rephraseHighlight,N=(0,s.kGW)(b).reusableHighlights,R=(0,s.lUI)(),T=R.reuseHighlight,M=R.removeReusableHighlight,P=(0,s._gZ)().contextType,D=(0,s.WGj)().highlightToRephrase,G=g.firstMessageIsAriaResponse,L=g.lastMessageIsAriaResponse,B=g.firstMessageId,Z=g.lastMessageId,F=j.length<=x.B7&&!f,U=!!N.find((function(e){return e.id===y})),K=document.getElementById(B),V=g.firstMessageId.split("-"),W=(0,H.Z)(V,2)[1],z=u.data.findIndex((function(e){return e.id===W})),Y=-1===z?void 0:u.data[z],q=null==Y?void 0:Y.message,$=q&&(0,jr.Ku)(q),J=K&&er(K),Q=null===(n=u.id)||void 0===n||null===(r=n.split)||void 0===r||null===(r=r.call(n,"-"))||void 0===r?void 0:r[0],ee=J&&J.substring(g.firstMessageOffset,g.lastMessageOffset).trim(),te=!1,ne=!1,re=null,ae=null,oe=null,ie=".code-box",se=".table-wrapper",ce=window.getSelection(),le=Jn(g);le&&(null==ce||ce.removeAllRanges(),null==ce||ce.addRange(le));var de="";null!=ce&&ce.rangeCount&&(oe=ce.getRangeAt(0),de=oe.toString(),re=ar(oe.startContainer),ae=ar(oe.endContainer),re&&re.closest(ie)&&(te=!0),ae&&ae.closest(ie)&&(te=!0),re&&re.closest(se)&&(ne=!0),ae&&ae.closest(se)&&(ne=!0));var ue,fe,pe,ve,me,he,ge,xe=!te,be="",ye="";if(J&&$&&q)try{ue=g.firstMessageOffset,fe=g.lastMessageOffset,void 0!==ue&&void 0!==fe&&(be=$.substring(ue,fe));var we=rr(J,$);if(pe=we[g.firstMessageOffset],ve=we[g.lastMessageOffset-1]+1,void 0!==pe&&void 0!==ve){var je=sr($,pe,ve),_e=(0,H.Z)(je,2);pe=_e[0],ve=_e[1],ye=$.substring(pe,ve)}var Ce=rr(J,q);if(me=Ce[g.firstMessageOffset],he=Ce[g.lastMessageOffset-1]+1,void 0!==me&&void 0!==he){var ke=sr(q,me,he),Oe=(0,H.Z)(ke,2);me=Oe[0],he=Oe[1]}}catch(e){Cr.error("mapSelectableTextToMarkdownSource error",e)}if(q&&void 0!==me&&void 0!==he){var Ae=ir(q.substring(0,me)),Ee=ir(q.substring(he));ge=Ae+ye+Ee,me=Ae.length,he=Ae.length+ye.length}if(void 0!==me&&void 0!==he){var Ie,Se=null===(Ie=ge)||void 0===Ie?void 0:Ie.substr(me,he-me);h.infoColor("REPHRASE SELECTION DEBUG","red",Se)}(ye=ye.trim()).startsWith("```")&&(ye=ye.substring(3)),ye.endsWith("```")&&(ye=ye.substring(0,ye.length-3)),ye=ye.trim();var Ne,Re,Te,Me,De=(Ne=B===Z,Re=G&&L,Te=null==Y?void 0:Y.server_id,Me=!D&&Te&&j.length>=x.CX&&Re&&Ne&&!x.Dv.includes(B)&&K&&$&&ee&&ye&&!te&&!ne&&("prompt"!==Q||z>2)&&!f&&de,Cr.info("%c[rephrase] checkIfRephraseIsAvailable:selection","background: tomato; color: white",{messageSourceWithLinkifyTextWithoutSelectedLink:ge,selectedSource:ye,chatMessagesRange:g,sourceTextStartOffset:pe,sourceTextEndOffset:ve,isSameMessageHighlighted:Ne,isAriaResponseHighlighted:Re,messageServerId:Te,selectedText:ee,sourceText:$,sourceTextWithLinkifyText:q,sourceTextWithLinkifyStartOffset:me,sourceTextWithLinkifyEndOffset:he,sourceTextWithLinkifyTextSelection:void 0!==me&&(null==q?void 0:q.substring(me,he)),selectableText:J,linkify:xe,range:oe,startNode:re,endNode:ae,selectedSourceBlock:te,selectedTableBlock:ne,isPrompt:"prompt"===Q,readOnly:f,nativeTextSelected:de}),!!Me&&!!(re===ae||null!=$&&$.includes(ee)));function Ge(e){var t;if(null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),w===e)return I(y),void p(null);A(Or(Or({},o),{},{selectionColor:e}))}var Le=a.split("-"),Be=(0,H.Z)(Le,2),Ze=Be[0],He=Be[1],Fe="-50%",Ue="".concat(x.dl,"px");switch(Ze){case"left":Fe="-100%";break;case"right":Fe="0%";break;case"center":Fe="-50%"}switch(He){case"top":Ue="calc(-100% - ".concat(x.dl,"px)");break;case"bottom":Ue="".concat(1.5*x.dl,"px")}var Ke=(0,i.useState)(!0),Ve=(0,H.Z)(Ke,2),We=Ve[0],ze=Ve[1],Ye=(0,i.useState)(!0),qe=(0,H.Z)(Ye,2),$e=qe[0],Xe=qe[1];(0,i.useEffect)((function(){var e=document.getElementById("messages-container");if(e){if(Ar(t)&&t.current){var n=(document.body.clientWidth>x.Fz?x.Fz:document.body.clientWidth)-e.clientWidth-6,r=n>6?n:6,a=new IntersectionObserver((function(e){return function(e){if(t.current){if(e.rootBounds){var n=e.boundingClientRect,r=e.rootBounds;n.right>r.right?t.current.style.transform="translateX(".concat(r.right-n.right,"px)"):n.left<r.left&&(t.current.style.transform="translateX(".concat(r.left-n.left,"px)"))}a.unobserve(t.current)}}((0,H.Z)(e,1)[0])}),{root:null,rootMargin:"0px -".concat(6,"px 0px -").concat(r,"px"),threshold:1});return a.observe(t.current),function(){Ar(t)&&t.current&&a.unobserve(t.current)}}}}),[t,De,F]);var Je=(0,l.o6)({container:{operaOne:"h-9",operaGx:"h-8",operaAir:"h-8"},colorsMr:{operaOne:"mr-px",operaGx:"mr-1",operaAir:"mr-0.5"},padding:{operaOne:"px-1.5",operaGx:"pl-1.5 pr-1",operaAir:"pl-1.5 pr-1"},backgroundColor:{operaOne:"bg-levels-l5-primary"},radius:{operaOne:"rounded-aria-radius-3",operaAir:"rounded-aria-radius-4"},shadow:{operaOne:"shadow-highlightMenu",operaAir:"air-level-02"},border:{operaOne:"",operaGx:"border border-solid border-secondary-s1-selected-stroke"}},["backgroundColor","radius","shadow","border","container","padding","colorsMr"]);return(0,E.jsx)("div",{className:(0,m.AK)("fixed inline-block select-none",Je.container),style:{left:"".concat(c,"px"),top:"".concat(d,"px")},children:(0,E.jsxs)("div",{ref:t,id:y,className:(0,m.AK)("relative left-1/2 z-1 flex h-full min-w-max max-w-max items-center justify-center overflow-hidden",Je.padding,Je.backgroundColor,Je.radius,Je.shadow,Je.border),style:{left:Fe,top:Ue},children:[(0,E.jsxs)("div",{className:(0,m.AK)("flex items-center justify-center gap-[4px]",Je.colorsMr),children:[(0,E.jsx)(wr,{selectedOption:w,option:"custom1",onClick:Ge}),(0,E.jsx)(wr,{selectedOption:w,option:"custom2",onClick:Ge}),(0,E.jsx)(wr,{selectedOption:w,option:"custom3",onClick:Ge})]}),F&&(0,E.jsx)(_r,{showBorderCondition:We,setShowBorder:ze,isLastOption:!De,optionHandler:function(){if(!U){N.length&&M(N[0].id),T({id:o.id,title:o.text});var e,t=Jn(g);if(t)null===(e=window.getSelection())||void 0===e||e.addRange(t);(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.REFINER,context:k?X.hG.BROWSER_TAB:P,str_value:"Reuse",ai_provider:(0,Pe.V_)(null==v?void 0:v.ai_provider)})}},optionText:_("reuse"),disabled:U}),De&&(0,E.jsx)(_r,{showBorderCondition:We&&$e,setShowBorder:Xe,isLastOption:De,optionHandler:function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.REFINER,context:k?X.hG.BROWSER_TAB:P,str_value:"Rephrase",ai_provider:(0,Pe.V_)(null==v?void 0:v.ai_provider)}),K&&$&&ee&&ye&&void 0!==pe&&void 0!==ve&&void 0!==me&&void 0!==he&&void 0!==ue&&void 0!==fe&&void 0!==ge&&S({highlight:o,sourceTextWithLinkifyStartOffset:me,sourceTextWithLinkifyEndOffset:he,sourceTextStartOffset:pe,sourceTextEndOffset:ve,selectableText:J,selectedText:be,selectableTextStartOffset:ue,selectableTextEndOffset:fe,sourceText:$,sourceTextWithLinkify:q,selectedSource:ye,linkify:xe,messageSourceWithLinkifyTextWithoutSelectedLink:ge})},optionText:_("rephrase")})]},y)})}));const Ir=Er;var Sr=n(53159);function Nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nr(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Tr=new we.mQ({env:"development",name:"HIGHLIGHTER REPHRASE UTILS"});function Mr(e){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,u.Z)(p().mark((function e(t){var n,r,a,o,i,s,c,l,d;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.conversationData,r=t.messageId,a=t.oldContent,o=t.newContentFromServerWithoutLinkify,i=t.textFrom,s=t.textTo,c=t.updateConversation,l=a.split(i).join(s),d=n.data.map((function(e){var t=e.id,n=e.message;return t===r&&(Tr.info("RESPONSE WITH REPHRASED DATA READY",{id:t,message:n,oldContent:a,newContent:l,textFrom:i,textTo:s,messageData:e,_newContentFromServerWithoutLinkify:o}),e.message=l),Rr({},e)})),c({conversationId:n.id,updateData:{data:d}}),e.abrupt("return",{conversationId:n.id,messageId:r,messageContent:l});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Dr(e){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,u.Z)(p().mark((function e(t){var n,r,a,o,i,s,c,l,d,u,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.endpoint,r=t.conversationData,a=t.messageId,o=t.messageServerId,i=t.selectedText,s=t.sourceToReplace,c=t.linkify,l=void 0!==c&&c,d=t.updateConversation,e.t0=Rr,e.t1={conversation_id:r.server_id,message_id:o,selected_text:i,linkify:l},e.next=5,(0,Sr.Fg)();case 5:return e.t2=e.sent,u=(0,e.t0)(e.t1,e.t2),l&&Object.assign(u,{linkify_version:3}),e.next=10,(0,m.Ur)("".concat(n,"/").concat(X.Cm.REPHRASE),{method:"POST",body:u});case 10:if(!(f=e.sent).message){e.next=15;break}return e.next=14,Mr({conversationData:r,messageId:a,oldContent:s,newContentFromServerWithoutLinkify:f.message,textFrom:i,textTo:f.rephrased_text,updateConversation:d});case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Lr(){return(Lr=(0,u.Z)(p().mark((function e(t){var n,r,a,o,i,s,c,l,d,u,f,v,m,h,g;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.endpoint,r=t.rephraseHighlightData,a=t.sourceToReplace,o=t.updateConversation,i=t.conversationData,s=r.highlight,c=r.selectedSource,e.prev=2,l=s.conversationId,d=s.chatMessagesRange,u=d.firstMessageId.split("-"),f=(0,H.Z)(u,2),v=f[1],!((m=i.data.findIndex((function(e){return e.id===v})))>-1)){e.next=18;break}if(h=i.data,!(g=h[m].server_id)){e.next=15;break}return e.next=12,Dr({endpoint:n,conversationData:i,messageId:v,messageServerId:g,selectedText:c,sourceToReplace:a,linkify:!1,updateConversation:o});case 12:return e.abrupt("return",e.sent);case 15:throw new Error("No server_id for message");case 16:e.next=19;break;case 18:throw new Error("No message with id ".concat(v," in conversation ").concat(l));case 19:e.next=25;break;case 21:throw e.prev=21,e.t0=e.catch(2),Tr.error("[REPHRASE][ERROR]",e.t0),e.t0;case 25:case"end":return e.stop()}}),e,null,[[2,21]])})))).apply(this,arguments)}var Br=n(25108),Zr=Node.prototype.insertBefore;Node.prototype.insertBefore=function(e,t){var n;br();try{n=Zr.call(this,e,t)}catch(t){n=null,Br.info("ERROR: Inserting an element before another element.",{newNode:e,err:t})}return n};var Hr=Node.prototype.removeChild;Node.prototype.removeChild=function(e){var t;br();try{t=Hr.call(this,e)}catch(n){t=null,Br.info("ERROR: Deleting an element.",{remNode:e,err:n})}return t};var Fr=Node.prototype.appendChild;Node.prototype.appendChild=function(e){var t;br();try{t=Fr.call(this,e)}catch(n){t=null,Br.info("ERROR: Adding a child to the element.",{newNode:e,err:n})}return t};var Ur=Node.prototype.replaceChild;Node.prototype.replaceChild=function(e,t){var n;br();try{n=Ur.call(this,e,t)}catch(r){n=null,Br.info("ERROR: Replacing a child in the element.",{node:e,child:t,err:r})}return n},Br.info("%cHIGHLIGHTER DOM GUARD READY","background:tomato;color:white");var Kr=n(25108);function Vr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const qr=function(e){var t=e.children,n=e.messagesContainerRef,r=e.readOnly,a=(0,l.Su)().loggerService,o=(0,s.Uwy)().userCapabilities,c=(0,s.UMN)(),d=c.activeConversationData,f=c.activeConversationId,v=(0,s.bCg)(f).highlights,h=(0,s.WGj)().rephraseMessagePatch,g=(0,l.oH)(),x=g.isAriaInTabView,b=g.currentTab,y=(0,s.nHi)().endpointPrompts,w=(0,l.Cg)().consentNeeded,j=(0,s.Jin)().handleUpdateConversation,_=(0,i.useState)(null),C=(0,H.Z)(_,2),k=C[0],O=C[1],A=(0,i.useRef)(void 0),I=(0,i.useRef)(null),S=(0,i.useCallback)((function(e){if(e?(document.body.classList.add("highlighter-tooltip-opened"),(null==k?void 0:k.id)!==e.id&&(0,m.HX)()):document.body.classList.remove("highlighter-tooltip-opened"),e){var t=e.chatMessagesRange.firstMessageId.split("-"),n=(0,H.Z)(t,2)[1],r=void 0===n?"":n,a=d.data.find((function(e){var t=e.id;return r&&t===r}));a&&a.server_id&&(e.messageServerId=a.server_id)}O(e)}),[]),N=(0,i.useState)(0),R=(0,H.Z)(N,2),T=R[0],M=R[1],P=(0,i.useState)(0),D=(0,H.Z)(P,2),G=D[0],L=D[1],B=(0,i.useState)("left-bottom"),Z=(0,H.Z)(B,2),F=Z[0],U=Z[1],K=(0,s.ljr)().remoteConfig,V=(0,s.uEF)(),W=V.setHighlight,z=V.removeHighlight,Y=(0,s.WGj)().highlightToRephrase,q=(0,s.okl)(),$=q.rephraseHighlight,X=q.setRephraseMessagePatch,J=(0,i.useRef)(null),Q=(0,i.useRef)(null),ee=(0,i.useCallback)((function(e,t){var r="center",a="bottom";if(n.current){var o=n.current.getBoundingClientRect(),i=e-o.left,s=t-o.top;i>o.width*(2/3)&&(r="left"),i<o.width*(1/3)&&(r="right"),s>o.height/2&&(a="top")}return"".concat(r,"-").concat(a)}),[n]),te=(0,s._gZ)().contextType,re=(0,i.useRef)(null),ae=(0,i.useCallback)((function(e,t){e.stopPropagation(),re.current&&clearTimeout(re.current),re.current=window.setTimeout((function(){re.current=null;var n=e.clientX,r=e.clientY;M(n),L(r),U(ee(n,r)),S(t),e.stopPropagation()}),500)}),[ee,S]);(0,i.useEffect)((function(){var e=function(e){var t=Q.current;if(t){var n=e.clientX,r=e.clientY,a=t.getClientRects()[0];(n<a.left||n>a.right||r<a.top||r>a.bottom)&&S(null)}};return window.addEventListener("pointerdown",e),function(){window.removeEventListener("pointerdown",e)}}),[S]);var oe=(0,i.useCallback)((function(e,t){var n=window.getSelection();if(null!=n&&n.rangeCount){var r=n.getRangeAt(0),a=r.toString().trim();if(a){var i=Xn(r);if(i){var s=Qn(f,i),c=v.find((function(e){return e.id===s}))||{chatMessagesRange:i,conversationId:f,id:s,text:a,timestamp:Date.now(),type:"highlight",tabId:null==b?void 0:b.id},l=window.getSelection(),d=(null==l?void 0:l.rangeCount)&&l.getRangeAt(0),u=d&&d.getBoundingClientRect();u?(M(e<u.right?e:u.right),L(t<u.bottom?t:u.top)):(M(e),L(t)),U(ee(e,t)),S(c)}(0,Pe.vH)({action:ne.VV.IMPRESSION,element:ne.Y3.REFINER,context:x?ne.hG.BROWSER_TAB:te,str_value:(0,jr.XR)(a),ai_provider:(0,Pe.V_)(null==o?void 0:o.ai_provider)})}}}),[x,te,null==o?void 0:o.ai_provider,f,v,null==b?void 0:b.id,ee,S]),ie=(0,i.useCallback)((function(e,t){J.current&&(clearTimeout(J.current),J.current=null);try{var n;null!==(n=document.getSelection())&&void 0!==n&&null!==(n=n.getRangeAt(0))&&void 0!==n&&n.collapsed||re.current&&(clearTimeout(re.current),re.current=null)}catch(e){}J.current=window.setTimeout((function(){J.current=null,oe(e,t)}),500)}),[oe]);(0,i.useEffect)((function(){return function(){J.current&&clearTimeout(J.current)}}),[]),(0,i.useEffect)((function(){var e=function(){S(null)},t=n.current;return t&&t.addEventListener("scroll",e),function(){t&&t.removeEventListener("scroll",e)}}),[n,k,S]),(0,i.useEffect)((function(){if(k){var e=v.find((function(e){var t=e.id;return k.id===t}));S(e?Yr(Yr({},k),e):null)}}),[f,v]);var se=(0,i.useCallback)((function(e){var t,n,r=e||v,a="textarea"===(null===(t=document.activeElement)||void 0===t?void 0:t.tagName.toLowerCase()),o="input"===(null===(n=document.activeElement)||void 0===n?void 0:n.tagName.toLowerCase()),i=void 0;if(!a&&!o){var s=window.getSelection();if(s&&s.rangeCount){var c=s.getRangeAt(0);c&&(i=Xn(c),s.removeAllRanges())}}br(),window.renderingHighlights=!0;var l,d=Vr(r);try{for(d.s();!(l=d.n()).done;){var u=l.value;gr(I.current,u,ae)}}catch(e){d.e(e)}finally{d.f()}if(window.renderingHighlights=!1,window.highlightsRendered=!0,!a&&!o){var f=(null==k?void 0:k.chatMessagesRange)||i;if(f){var p,m=Jn(f);if(m)null===(p=window.getSelection())||void 0===p||p.addRange(m)}}}),[v,I,ae,k]);(0,i.useEffect)((function(){se()}),[se,k,v]);var ce=(0,i.useRef)(""),le=(0,i.useRef)(v),de=(0,i.useRef)(Y);(0,i.useEffect)((function(){de.current=Y}),[Y]);var ue=(0,i.useCallback)((function(e,t,n,r){var a,o=Vr(e.splice(0,e.length));try{for(o.s();!(a=o.n()).done;){var i=a.value,s=nr(i,t,r,n);z(i.id),s&&(W(s),e.push(s))}}catch(e){o.e(e)}finally{o.f()}}),[W,z]),fe=(0,i.useCallback)((function(e,t){var n=document.getElementById(e);if(!n)throw new Error("Message element with id ".concat(e," not found"));var r=er(n);ce.current!==r&&(ue(t,e,r,ce.current),ce.current=r)}),[ue]);(0,i.useEffect)((function(){var e=I.current;if(e){var t=new MutationObserver((function(n){var r,a=!1,o=Vr(n);try{for(o.s();!(r=o.n()).done;){"childList"===r.value.type&&(a=!0)}}catch(e){o.e(e)}finally{o.f()}a&&de.current&&(t.disconnect(),fe(de.current.highlight.chatMessagesRange.firstMessageId,le.current),se(le.current),t.observe(e,{childList:!0,subtree:!0}))}));return t.observe(e,{childList:!0,subtree:!0,attributes:!0,characterData:!0}),function(){t.disconnect()}}}),[I.current]),(0,i.useEffect)((function(){X(null),z("rephrase"),$(null)}),[z,$,X]);var pe=(0,i.useRef)(null);(0,i.useEffect)((function(){var e,t=(null==Y||null===(e=Y.highlight)||void 0===e?void 0:e.tabId)===(null==b?void 0:b.id);if(Y&&!Y.progress&&t){a.info("REPHRASE","CATCHED NEW HIGHLIGHT TO REPHRASE",Y),Y.progress=!0,ce.current=Y.selectableText,le.current=v,$(Y);var n=Y.highlight;if(n){var r=n.conversationId,o=Yr({},n.chatMessagesRange);o.firstMessageOffset=Y.selectableTextStartOffset,o.lastMessageOffset=Y.selectableTextEndOffset;var i=Jn(o);if(i){var s=window.getSelection();null==s||s.removeAllRanges(),null==s||s.addRange(i)}var c={chatMessagesRange:o,conversationId:r,id:"rephrase",selectionColor:"rephraseStart",text:Y.selectedText,timestamp:Date.now(),type:"rephrase"};pe.current=c,W(c),le.current.push(c),$(Y);var l={conversationId:r,messageId:o.firstMessageId,message:Y.messageSourceWithLinkifyTextWithoutSelectedLink,messageTarget:null,totalDiffLength:0};X(l),Kr.info("%cSETTING TICKER","background:red;color:white"),A.current=window.setInterval((function(){if(null===l.messageTarget){var e=Y.sourceTextWithLinkifyStartOffset,t=Y.sourceTextWithLinkifyEndOffset,n=l.message,r=n.slice(0,e),a=function(e){for(var t=e.split(" "),n=0;n<t.length;n+=1){var r=n;t[r]=dr(t[r])}return t.join(" ")}(n.substring(e,t)),o=n.slice(t),i="".concat(r).concat(a).concat(o);l.message=i,X(l)}else{for(var s=(0,Bn.Kx)(l.message,l.messageTarget).map((function(e){return Object.assign(e,{width:cr(e.value)})})),c=s.filter((function(e){return e.added})).sort((function(e,t){return e.width-t.width})),d=s.filter((function(e){return e.removed})).sort((function(e,t){return e.width-t.width})),u=Math.floor(1+.01*l.totalDiffLength),f=0;f<u;f+=1)d[f]&&(d[f].exec=!0),c[f]&&(c[f].exec=!0);for(var p="",v=0;v<s.length;v+=1){var m=s[v];m.exec?m.added&&(p+=m.value):m.added&&(m.added||m.removed)||(p+=m.value)}l.message=p,l.message===l.messageTarget?(clearInterval(A.current),A.current=void 0,X(null)):X(l)}}),100);var u=function(e){l.messageTarget=e;var t=(0,Bn.Kx)(l.message,l.messageTarget);l.totalDiffLength=t.length,X(l)};(function(e){return Lr.apply(this,arguments)})({endpoint:y,rephraseHighlightData:Y,sourceToReplace:Y.messageSourceWithLinkifyTextWithoutSelectedLink,updateConversation:j,conversationData:d}).then((function(e){a.info("CONTENT HIGHLIGHTER","REPHRASE RESULT",e),u(e?e.messageContent||(0,jr.Ku)(e.messageContent):Y.sourceTextWithLinkify),Y.answered=!0,$(Y)})).catch((function(e){a.error("CONTENT HIGHLIGHTER","REPHRASE ERROR",e),u(Y.sourceTextWithLinkify),Y.answered=!0,$(Y)}))}else Kr.info("rephraseHighlightAction-nothing to rephrase-setting null",Y),$(null)}}),[Y,W,$,z,K,a,X,y,v,j,d,null==b?void 0:b.id]);var ve=(0,i.useCallback)((0,u.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Y||null==Y||!Y.answered||null!=Y&&Y.finished||h){e.next=9;break}if(f===Y.highlight.conversationId){e.next=3;break}return e.abrupt("return");case 3:setTimeout((function(){z("rephrase")}),1e3),Y.finished=!0,pe.current&&(pe.current.timestamp=Date.now(),pe.current.selectionColor="rephraseEnd",W(pe.current)),$(null),null===(t=window.getSelection())||void 0===t||t.removeAllRanges(),Kr.info("%crephraseFinished","background:red;color:white",Y);case 9:case"end":return e.stop()}}),e)}))),[Y,h,f,$,z,W]);(0,i.useEffect)((function(){if(Y&&null!=Y&&Y.answered&&!h){if(f!==Y.highlight.conversationId)return;a.info("CONTENT HIGHLIGHTER","CONVERSATION UPDATED","FINISHING REPHRASE"),ve()}}));(0,i.useEffect)((function(){void 0!==(null==k?void 0:k.selectionColor)?document.body.classList.add("highlighter-with-color-clicked"):document.body.classList.remove("highlighter-with-color-clicked")}),[k]),(0,i.useEffect)((function(){var e;return function t(){window.highlightsRendered||se(),e=requestAnimationFrame(t)}(),function(){cancelAnimationFrame(e)}}),[se]);var me=(0,i.useCallback)((function(){var e,t=Vr(v);try{for(t.s();!(e=t.n()).done;){var n=e.value;z(n.id)}}catch(e){t.e(e)}finally{t.f()}Kr.info("removeAllHighlights-highlights",v)}),[v,z]);return Object.assign(window,{highlights:v,renderAllHighlights:se,recalculateHighlights:ue,lastMessageTextContentRef:ce,rephraseMessagePatch:h,setRephraseMessagePatch:X,highlightToRephrase:Y,removeAllHighlights:me}),(0,dt.wO)(d.model)&&!w?(0,E.jsxs)("div",{children:[(0,E.jsx)("div",{onPointerUp:function(e){ie(e.clientX,e.clientY)},ref:I,children:t},f),k&&(0,E.jsx)(Ir,{setClickedHighlighter:O,align:F,highlightData:k,ref:Q,x:T,y:G,conversation:d,readOnly:r})]}):t};var $r=n(60136),Xr=n(82963),Jr=n(61120);function Qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Jr.Z)(e);if(t){var a=(0,Jr.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,Xr.Z)(this,n)}}const ea=function(e){(0,$r.Z)(n,e);var t=Qr(n);function n(e){return(0,y.Z)(this,n),t.call(this,e)}return(0,b.Z)(n,[{key:"componentDidCatch",value:function(e){this.props.onContentHighlighterError(e)}},{key:"render",value:function(){return this.props.children}}]),n}(i.Component);var ta=n(86648),na=n(14396),ra=function(e,t){var n=null!=t&&t.productSuffix?"-".concat(t.productSuffix):"",r="dark"===(null==t?void 0:t.theme)?"-dark":"";return"".concat("feature-carousel","/").concat(e).concat(n).concat(r,".png")};const aa=function(e){var t,n=e.item,r=e.isActive,a=e.isNext,o=e.isPrevious,s=(0,g.s0)(),c=(0,l.o6)({wrapper:{operaOne:"rounded-aria-radius-6 border border-solid border-secondary-s1-selected-stroke",operaGx:"rounded-aria-radius-3 border border-solid border-secondary-s1-selected-stroke",operaAir:"rounded-aria-radius-4 air-level-xlow"},wrapperBackground:{operaOne:"bg-levels-l5-primary",operaAir:"bg-levels-l0-extension-bg"},textWrapper:{operaOne:"text-text-t1-text-active-icons"},name:{operaOne:"text-header-l !uppercase",operaAir:"text-header-l"},description:{operaOne:"text-body-l text-text-t3-text-gray",operaGx:"text-body-l text-text-t2-text-secondary",operaAir:"text-body-l text-text-t2-text-secondary"},screenshot:{operaOne:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-5",operaGx:"border border-solid border-secondary-s1-selected-stroke rounded-aria-radius-3",operaAir:"rounded-aria-radius-3"}},["wrapper","wrapperBackground","textWrapper","name","description","screenshot"]),d=(0,l.o6)((t=n.id,{operaOne:{light:ra(t),dark:ra(t,{theme:"dark"})},operaGx:{light:ra(t,{productSuffix:"gx"}),dark:ra(t,{theme:"dark",productSuffix:"gx"})},operaAir:ra(t,{productSuffix:"air"})})),u=(0,i.useCallback)((function(){var e=n.onClick;if(e)return e({navigate:s})}),[n.onClick,s]);return(0,E.jsxs)("div",{className:(0,m.AK)("feature-item absolute flex w-3/5 flex-col gap-6 p-6 transition-all",c.wrapper,c.wrapperBackground,r&&"left-0 right-0 z-1 m-auto",!r&&"scale-[0.65] opacity-70",o&&"-left-8",a&&"-right-8",Boolean(n.onClick)&&"cursor-pointer hover:bg-levels-l3-cards"),onClick:u,onKeyUp:u,role:"button",tabIndex:-1,children:[(0,E.jsxs)("div",{className:(0,m.AK)("feature-intro",c.textWrapper),children:[(0,E.jsx)("div",{className:(0,m.AK)("feature-title mb-2",c.name),children:n.name}),(0,E.jsx)("div",{className:(0,m.AK)("feature-description",c.description),children:n.description})]}),d&&(0,E.jsx)("div",{className:(0,m.AK)("select-none overflow-hidden",c.screenshot),children:(0,E.jsx)("img",{className:"object-cover",src:d,alt:n.name})})]})};var oa=n(23059);const ia=n.p+"assets/0d8096ac3c68681980f7.svg",sa=n.p+"assets/367d4ebde64e19f84b77.svg";const ca=function(e){var t,n=e.adjustChatLeadingDescription,r=e.sendMessage,a=(0,C.$G)().t,o=(0,g.s0)(),d=(0,$t.Z)().isAriaInTabView,f=(0,s.UMN)().activeConversationId,v=(0,s.nrG)().setPromptStudioFormData,m=(0,s.cpB)(f).promptStudioConfig,h=(0,s.ljr)().remoteConfig,b=function(e){var t=(0,l.oH)().isAriaInTabView,n=(0,s.Uwy)().userCapabilities,r=(0,i.useCallback)((function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.PROFILE_MEMORY,context:t?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:feature_card_clicked",ai_provider:(0,Pe.V_)(null==n?void 0:n.ai_provider)}),e.apply(void 0,arguments)}),[e,t,null==n?void 0:n.ai_provider]);return r}((function(e){(0,e.navigate)("/".concat(x.n5.MAIN,"/").concat(x.n5.SETTINGS),{state:{initialTab:a("profile_settings_tab")}})})),y=[{id:x.t5.COMMAND_LINE,name:a("feature_carousel_item_command-line_name"),description:a("feature_carousel_item_command-line_description"),onClick:(t=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.FM)();case 2:(0,c.z4)();case 3:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)})},{id:x.t5.COMPOSE,name:a("feature_carousel_item_compose_name"),description:a("feature_carousel_item_compose_description"),onClick:function(){return o("/".concat(x.n5.MAIN,"/").concat(x.n5.PROMPT_STUDIO))}},{id:x.t5.IMAGE_UNDERSTANDING,name:a("feature_carousel_item_image-understanding_name"),description:a("feature_carousel_item_image-understanding_description"),onClick:function(){document.querySelector("#upload-image-input").click()}},{id:x.t5.IMAGE_GENERATION,name:a("feature_carousel_item_image-generation_name"),description:a("feature_carousel_item_image-generation_description"),onClick:function(){r({source:d?"tab-view":"sidebar",text:a("create_an_abstract_wallpaper")})}},h.longterm_memory?{id:x.t5.PROFILE_MEMORY,name:a("profile_memory_slide_title"),description:a("profile_memory_slide_subtitle"),onClick:b}:null].filter(Boolean),w=(0,i.useState)(y),j=(0,H.Z)(w,2),_=j[0],k=j[1],O=[{id:x.t5.EMAIL,name:a("feature_carousel_item_email_name"),description:(0,E.jsx)(C.cC,{i18nKey:a("feature_carousel_item_email_description")}),onClick:function(){o("/".concat(x.n5.MAIN,"/").concat(x.n5.PROMPT_STUDIO)),setTimeout((function(){var e,t,n,r,a=null!==(e=null===(t=m[1])||void 0===t?void 0:t.fieldsets)&&void 0!==e?e:{},o=a.tonalities,i=void 0===o?[]:o,s=a.lengths,c=void 0===s?[]:s,l=null!==(n=null===(r=m[1])||void 0===r?void 0:r.defaults)&&void 0!==n?n:{},d=l.tonality,u=void 0===d?"":d,f=l.length,p=void 0===f?"":f,h=i.map((function(e){return e.id})).indexOf(u),g=c.map((function(e){return e.id})).indexOf(p);v({taskIndex:1,toneIndex:h,lengthIndex:g},x.$M)}))}},{id:x.t5.EXPERT_TRANSLATION,name:a("feature_carousel_item_expert-translation_name"),description:(0,E.jsx)(C.cC,{i18nKey:a("feature_carousel_item_expert-translation_description")}),onClick:function(){r({source:d?"tab-view":"sidebar",text:a("feature_carousel_item_expert-translation_action")})}},{id:x.t5.GRAMMAR_CHECK,name:a("feature_carousel_item_grammar-check_name"),description:(0,E.jsx)(C.cC,{i18nKey:a("feature_carousel_item_grammar-check_description")}),onClick:function(){r({source:d?"tab-view":"sidebar",text:a("feature_carousel_item_grammar-check_action")})}},{id:x.t5.TONE_OF_VOICE,name:a("feature_carousel_item_tone_of_voice_name"),description:(0,E.jsx)(C.cC,{i18nKey:a("feature_carousel_item_tone_of_voice_description")}),onClick:function(){r({source:d?"tab-view":"sidebar",text:a("feature_carousel_item_tone_of_voice_action")})}},{id:x.t5.ANALYZE_AND_EDIT,name:a("feature_carousel_item_analyze_and_edit_name"),description:(0,E.jsx)(C.cC,{i18nKey:a("feature_carousel_item_analyze_and_edit_description")}),onClick:function(){r({source:d?"tab-view":"sidebar",text:a("feature_carousel_item_analyze_and_edit_action")})}},{id:x.t5.QUICK_SUMMARIES,name:a("feature_carousel_item_quick_summaries_name"),description:(0,E.jsx)(C.cC,{i18nKey:a("feature_carousel_item_quick_summaries_description")}),onClick:function(){r({source:d?"tab-view":"sidebar",text:a("feature_carousel_item_quick_summaries_action")})}}],A=(0,i.useMemo)((function(){return[_[_.length-1]].concat((0,te.Z)(_),[_[0]])}),[_]),I=(0,i.useState)(A.findIndex((function(e){return e.id===x.t5.COMPOSE}))),N=(0,H.Z)(I,2),R=N[0],T=N[1],M=(0,i.useState)(),P=(0,H.Z)(M,2),D=P[0],G=P[1];(0,i.useEffect)((function(){var e,t=function(e,t){t||(T(1),k((0,te.Z)(y)),n(""))};return null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.addListener(t),function(){var e;null===(e=opr.browserSidebarPrivate.onItemPanelVisibilityChanged)||void 0===e||e.removeListener(t)}}),[]);var L=function(e){return function(){var t;T((function(r){switch(e){case"left":return t=r-1<=0?_.length:r-1,n(A[t].id,D),t;case"right":return t=r+1>_.length?1:r+1,n(A[t].id,D),t}}))}};return(0,l.Xp)(x.gi.WELCOME_PAGE_CHANGE_CARD,(function(e){G(e.campaign);var t,r,a=x.t5.EMAIL,o=x.t5.EXPERT_TRANSLATION,i=x.t5.GRAMMAR_CHECK,s=x.t5.QUICK_SUMMARIES,c=x.t5.ANALYZE_AND_EDIT,l=x.t5.TONE_OF_VOICE;switch(e.availableFeatureItem){case a:case o:case i:var d=[].concat(O),u=d.find((function(t){return t.id===e.availableFeatureItem}));d=d.filter((function(t){return t.id!==e.availableFeatureItem})),k([].concat((0,te.Z)(y),[d[0],u,d[1]])),T(A.length),n(u.id,e.campaign);break;case s:case c:case l:var f=(t=[c,i,o,s,l],r=new Map(O.map((function(e){return[e.id,e]}))),t.map((function(e){return r.get(e)})).filter((function(e){return!!e})));k((function(){return f})),T(1),n(c,e.campaign);break;default:T(A.findIndex((function(t,n){return t.id===e.availableFeatureItem&&0!==n&&n!==A.length-1})))}})),(0,E.jsxs)("div",{className:"features-carousel mb-aria-8 flex h-full flex-col",children:[(0,E.jsx)("div",{className:"flex-grow"}),(0,E.jsxs)("div",{className:"carousel relative flex flex-grow items-center justify-center",children:[(0,E.jsx)(S.hU,{border:!0,className:"absolute -left-[35%] z-10",icon:(0,l.o6)({icon:oa,operaGx:{icon:ia},operaAir:{icon:sa}},"icon"),type:"secondary",onClick:L("left")}),A.map((function(e,t){var n=t===R,r=t===R+1,a=t===R-1;return(0,E.jsx)(aa,{isActive:n,isNext:r,isPrevious:a,item:e},"carousel-item-".concat(t))})),(0,E.jsx)(S.hU,{border:!0,className:"absolute -right-[35%] z-10 rotate-180",icon:(0,l.o6)({icon:oa,operaGx:{icon:ia},operaAir:{icon:sa}},"icon"),type:"secondary",onClick:L("right")})]})]})};var la=n(22196);const da=n.p+"assets/08a88cdde60e844bacbd.svg";const ua=function(e){var t=e.title,n=e.description,r=(0,s.J7o)().currentModel,a=(0,l.o6)({title:"mt-2",description:"",showLogo:!0,showArrowIcon:!1,operaGx:{description:"text-text-t2-text-secondary"},operaAir:{description:"text-text-t2-text-secondary"}},["title","showLogo","showArrowIcon","description"]);return(0,E.jsxs)("div",{className:"text-header-xxl z-1 select-none px-aria-7 pt-aria-7 text-text-t1-text-active-icons",children:[a.showLogo&&(0,E.jsx)(I,{}),(0,E.jsx)("p",{className:(0,m.AK)("uppercase",a.title),children:t}),(0,E.jsx)("div",{className:(0,m.AK)("text-header-xl mb-aria-4 mt-1",a.description),children:n}),"Aria"===r&&(0,E.jsx)("div",{id:"models-used",className:"text-header-s flex gap-aria-4 text-text-tb",children:Object.entries(v.Ad).map((function(e){var t=(0,H.Z)(e,2),n=t[0],r=t[1];return(0,E.jsx)("div",{className:"rounded-aria-radius-2 bg-primary-p1-cobalt-buttons px-aria-3 py-aria-2 normal-case",children:r},n)}))}),a.showArrowIcon&&(0,E.jsx)("div",{className:"mb-5 h-9 w-3",children:(0,E.jsx)(A.S,{src:da,width:11,height:36,color:"default"})})]})};const fa=function(){var e=(0,s.YZY)().isGx;return(0,E.jsx)("div",{className:"bottom-gradient fixed bottom-0 left-0 right-0 -z-1 mx-auto h-[25vh] w-full blur-[90px]",children:e?(0,E.jsx)("svg",{viewBox:"0 0 1111 513",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"mx-auto w-tab-view",children:(0,E.jsx)("g",{children:(0,E.jsx)("ellipse",{className:"fill-classic-gx-a-100",cx:"555.5",cy:"783.88",rx:"511.264",ry:"474.588",transform:"rotate(-90 555.5 783.88)",fillOpacity:"0.4"})})}):(0,E.jsx)("svg",{className:"mx-auto w-tab-view",viewBox:"0 0 584 250",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,E.jsxs)("g",{children:[(0,E.jsx)("g",{children:(0,E.jsx)("path",{d:"M432.024 137.906C456.255 161.744 453.288 214.387 459.222 302.787C465.651 390.691 481.475 513.856 437.463 549.613C393.451 584.874 289.603 532.728 242.624 468.662C195.645 405.094 206.03 329.606 213.942 278.949C221.855 228.293 227.789 202.964 242.13 181.113C256.965 159.261 280.207 141.879 318.285 130.456C355.868 119.034 407.792 114.067 432.024 137.906Z",fill:"#FE57BE"})}),(0,E.jsx)("g",{children:(0,E.jsx)("path",{d:"M178.454 287.861C194.736 273.673 215.71 260.12 227.307 267.585C238.903 275.05 241.373 303.646 254.46 323.652C267.608 343.524 291.499 354.862 297.557 372.375C303.801 389.808 292.272 413.281 275.735 435.814C259.198 458.347 237.839 479.861 212.586 486.783C187.394 493.569 158.373 485.955 146.72 465.776C135.006 445.733 140.784 413.182 142.244 388.621C143.829 364.116 141.281 347.523 145.804 331.978C150.327 316.434 162.107 301.858 178.454 287.861Z",fill:"#FF7846"})}),(0,E.jsx)("g",{children:(0,E.jsx)("path",{d:"M158.918 140.54C176.392 125.312 198.902 110.766 211.348 118.778C223.793 126.79 226.444 157.48 240.49 178.952C254.6 200.278 280.241 212.447 286.742 231.242C293.444 249.952 281.071 275.143 263.323 299.327C245.575 323.51 222.651 346.6 195.549 354.028C168.512 361.312 137.366 353.14 124.859 331.483C112.288 309.972 118.489 275.037 120.055 248.678C121.756 222.379 119.022 204.57 123.876 187.887C128.731 171.204 141.374 155.561 158.918 140.54Z",fill:"#00FFE0"})}),(0,E.jsx)("g",{children:(0,E.jsx)("path",{d:"M248.28 172.7C238.752 151.961 255.376 124.793 278.555 120.433C301.602 116.147 331.279 134.799 350.54 147.13C369.877 159.592 378.854 165.527 384.016 172.973C389.177 180.419 390.522 189.375 400.709 203.128C410.69 216.827 429.458 235.527 428.941 249.384C428.555 263.166 408.754 272.18 389.788 276.017C370.692 279.93 352.431 278.667 342.41 268.816C332.335 259.17 330.556 240.73 311.929 224.381C293.227 207.902 257.753 193.645 248.28 172.7Z",fill:"#1977EA"})})]})})})};const pa=function(e){var t=e.isNewChat,n=e.children,r={background:"bg-surface-chatbot",operaGx:{product:"gx",background:"bg-other-o7"},operaAir:{product:"air"}};return(0,E.jsx)("div",{className:(0,m.AK)("opera-chatbot h-full w-full border-transparent focus:border-transparent focus:ring-0",(0,l.o6)(r,"product"),(0,l.o6)(r,"background"),t?"new-chat":"bg-right-gradient"),children:n})};var va=n(25079),ma=n(60386),ha=n(38185),ga=n(7492),xa=n(34134),ba=n(72781),ya=n(30538),wa=n(92255),ja=n(62013),_a=n(40757),Ca=n(14861);const ka=function(e){var t=e.isListUnderProfileSection,n=e.profileSectionRef,r=(0,s.RCK)(),a=r.authUserDetails,o=r.authStatus,i=r.isAccountLessUser,c=(0,C.$G)().t,d={iconSize:28,operaAir:{iconSize:32,padding:"pl-2"},borderColor:{operaOne:"border-stroke-components",operaGx:"border-classic-gx-no-80 dark:border-classic-gx-no-32"},profileIcon:{operaOne:"rounded-aria-radius-3",operaGx:"rounded-aria-radius-2",operaAir:"rounded-full"},profileIconLoggedIn:{operaOne:ja,operaGx:Ca,operaAir:_a},profileIconNotLoggedIn:{operaOne:i?ba:ja,operaGx:i?wa:Ca,operaAir:i?ya:ja}},u=(0,l.o6)(d,["iconSize","borderColor","profileIconLoggedIn","profileIconNotLoggedIn","profileIcon","padding"]);return(0,E.jsx)("div",{className:(0,m.AK)(t?"border-t":"","notLoggedIn"===o&&"flex flex-grow items-end","mb-3.5 border-0 border-solid",u.borderColor),ref:n,children:(0,E.jsxs)(xe.zx,{type:"menu",onClick:xa.Wu,onKeyUp:xa.Wu,tabIndex:-1,className:(0,m.AK)("text-subheader-s flex h-12 w-full justify-start gap-2",u.padding),children:[(0,E.jsx)(de.P,{sender:X.CI.user}),a&&a.email!==x.aK?(0,E.jsx)("p",{className:"text-body-m truncate",title:(null==a?void 0:a.fullname)||(null==a?void 0:a.email),children:(null==a?void 0:a.fullname)||(null==a?void 0:a.email)}):(0,E.jsxs)("div",{className:"flex flex-col items-start",children:[(0,E.jsx)("p",{className:"text-xs text-text-t1-text-active-icons",children:c("anonymous_account")}),(0,E.jsx)("p",{className:"text-xxs text-text-t1-text-active-icons opacity-80",children:c("anonymous_account_description")})]})]})})};function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Aa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ea=function(){var e=(0,i.useState)(!1),t=(0,H.Z)(e,2),n=t[0],r=t[1],a=(0,ht.YF)({open:n,onOpenChange:r}),o=a.refs,s=o.setFloating,c=o.setReference,l=a.context,d=(0,ht.eS)(l),u=(0,ht.qs)(l),f=(0,ht.bQ)(l,{outsidePressEvent:"mousedown"}),p=(0,ht.NI)([d,u,f]),v=p.getReferenceProps,m=p.getFloatingProps,h=Aa({ref:c},v()),g={open:n,context:l,floatingProps:Aa({ref:s},m())},x=(0,i.useCallback)((function(){r(!1)}),[r]),b=(0,i.useCallback)((function(){r(!0)}),[r]);return{referenceProps:h,dialogProps:g,open:n,onOpenChange:r,closeDialog:x,openDialog:b}},Ia=function(e){var t=e.open,n=e.context,r=e.floatingProps,a=e.children,o=(0,l.o6)({overlayBackground:{operaOne:"bg-[--opera-confirmation-popup-background]",operaAir:""}},["overlayBackground"]);return(0,E.jsx)(ht.ll,{children:t&&(0,E.jsx)(ht.y0,{className:(0,m.AK)("z-10 grid place-items-center",o.overlayBackground),lockScroll:!0,children:(0,E.jsx)(ht.wD,{context:n,children:(0,E.jsx)("div",Aa(Aa({className:"rounded"},r),{},{children:a}))})})})};function Sa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Na(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sa(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ra=function(e){var t=e.dialogProps,n=e.title,r=e.message,a=e.confirmMessage,o=e.cancelMessage,i=e.onConfirm,s=e.onCancel,c=(0,l.o6)({buttonsRow:"gap-aria-4",operaAir:{container:"air-level-02",buttonsRow:"gap-aria-5"}},["container","buttonsRow"]);return(0,E.jsx)(Ia,Na(Na({},t),{},{children:(0,E.jsxs)("div",{className:(0,m.AK)("box-border flex h-auto w-93 flex-col items-center justify-center gap-4 break-words rounded-aria-radius-5 bg-levels-l5-primary p-aria-6",c.container),children:[(0,E.jsxs)("div",{className:"text-body-l w-full text-text-t1-text-active-icons",children:[!!n&&(0,E.jsx)("div",{children:n}),(0,E.jsx)("span",{children:r})]}),(0,E.jsxs)("div",{className:(0,m.AK)("flex w-full select-none flex-row",c.buttonsRow),children:[(0,E.jsx)(xe.zx,{type:"secondary",className:"w-full",onClick:s,size:"s",children:o}),(0,E.jsx)(xe.zx,{type:"primary",className:"w-full",onClick:i,size:"s",children:a})]})]})}))};const Ta=n.p+"assets/d8c997123e645906d03c.svg",Ma=n.p+"assets/745aeb76875985654993.svg",Pa=n.p+"assets/367eb723245679db4a93.svg",Da=n.p+"assets/e80d62dbaf8610c53477.svg",Ga=n.p+"assets/13023af6cd2fb4db9fb2.svg",La=n.p+"assets/fb3d676cda79cd750559.svg",Ba=n.p+"assets/0246e88ab3b60542f582.svg",Za=n.p+"assets/0df5751a13a271ffc000.svg";var Ha=n(13771),Fa=n(53979);const Ua=function(e){var t=e.provider,n=e.logoConfig,r=e.text,a=e.customClassName,o=(0,l.oH)().isAriaInTabView,c=(0,s.fvp)().networkEnvironment,d=(0,s.Uwy)().userCapabilities,u=(0,s.HhX)().setAccountlessLoginData,f=(0,i.useCallback)((function(){var e=o?X.hG.BROWSER_TAB:X.hG.SIDEBAR;u({context:e,initTime:Date.now(),source:"side_menu_".concat(t)}),(0,Pe.vH)({action:X.VV.CLICK,context:e,element:X.Y3.ONBOARDING,str_value:"start:log_in:side_menu_".concat(t),ai_provider:(0,Pe.V_)(null==d?void 0:d.ai_provider)}),(0,Fa.RB)((0,dt.B9)(t,c))}),[o,c,t,u,null==d?void 0:d.ai_provider]);return(0,E.jsxs)(S.zx,{type:"secondary",className:(0,m.AK)("text-button-m flex w-full flex-row gap-2 px-4 py-2",a),onClick:f,children:[(0,E.jsx)(A.S,{config:n,className:"h-5 w-5"}),r]})};const Ka=function(){var e=(0,l.o6)({operaOne:{light:Za,dark:Ba}}),t=(0,C.$G)().t,n={border:"border border-stroke-components",separator:"border-t border-stroke-components my-2",padding:"p-4",rounded:"rounded-aria-radius-3",operaAir:{rounded:"rounded-aria-radius-4"}};return(0,E.jsxs)("div",{className:(0,m.AK)("mt-4 flex max-w-sm flex-col items-center gap-2 text-text-t1-text-active-icons",(0,l.o6)(n,"rounded"),(0,l.o6)(n,"border"),(0,l.o6)(n,"padding")),children:[(0,E.jsx)("div",{className:"mb-2",children:t("log_in_to_enable_chat_history")}),(0,E.jsx)(Ua,{provider:Ha.FU.EMAIL,text:t("log_in_via_email"),logoConfig:{icon:e,color:"var(--text-t1-text-active-icons)"},customClassName:"flex-row-reverse justify-between pr-3 text-button-m"}),(0,E.jsx)("div",{className:(0,m.AK)("w-full",(0,l.o6)(n,"separator"))}),(0,E.jsx)(Ua,{provider:Ha.FU.GOOGLE,text:"Google",logoConfig:{icon:Ta,size:16,operaAir:{icon:Da,color:"var(--text-t1-text-active-icons)"}}}),(0,E.jsx)(Ua,{provider:Ha.FU.APPLE,text:"Apple",logoConfig:{icon:Ma,size:16,operaAir:{icon:Ga,color:"var(--text-t1-text-active-icons)"}}}),(0,E.jsx)(Ua,{provider:Ha.FU.FACEBOOK,text:"Facebook",logoConfig:{icon:Pa,size:16,operaAir:{icon:La,color:"var(--text-t1-text-active-icons)"}}})]})};var Va=(0,i.forwardRef)((function(e,t){var n=e.active,r=(0,i.useMemo)((function(){return{element:"w-4 h-4 flex-shrink-0",operaOne:{rounded:"rounded-[5px]",active:n?"bg-other-o1":"bg-secondary-s3-bg-icons"},operaGx:{rounded:"rounded-aria-radius-2",active:n?"bg-primary-p1-cobalt-buttons":"bg-secondary-s1-selected-stroke"},operaAir:{rounded:"rounded-full",active:n?"bg-other-o1":"bg-secondary-s2-tertiary-need-to-fix"}}}),[n]),a=(0,l.o6)(r,["element","rounded","active"]);return(0,E.jsx)("div",{className:(0,m.AK)(a.element,a.rounded,a.active),ref:t})}));const Wa=n.p+"assets/3cbf89edd72e893f6e28.svg";var za=n(65871);var Ya={operaOne:za,operaAir:za,operaGx:n.p+"assets/d9a682e9e2baa3d6bfed.svg"};const qa=function(e){var t=e.className,n=e.conversationId,r=(0,g.oQ)(n?"#/".concat(n):"#/"),a=(0,s.J7o)().currentModel,o=(0,s.ND1)().isAriaPinned,i=(0,s.bWQ)().handleActiveConversationChanged,d=(0,s.Uwy)().userCapabilities,f=function(){var e=(0,u.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),window.open(r,"_blank"),chrome.tabs.query({windowId:chrome.windows.WINDOW_ID_CURRENT},(function(e){var t=e.find((function(e){return e.active}));t&&(chrome.tabs.move(t.id,{index:e.length}),i(n||x.$M,"tab-view",t.id))})),(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.CHAT,context:X.hG.SIDEBAR,model:"Aria"===a?"Aria":"LocalModel",str_value:"switch_to:".concat(X.hG.BROWSER_TAB),ai_provider:(0,Pe.V_)(null==d?void 0:d.ai_provider)}),o){e.next=7;break}return e.next=7,(0,c.FM)();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=(0,l.o6)(Ya);return(0,E.jsx)(xe.hU,{type:"tertiary",icon:v,className:(0,m.AK)("flex items-center","open-tab-view-icon",t),onClick:f,onKeyDown:f,tabIndex:-1,title:"Open Aria Tab view"})};var $a={headerIconOffset:{operaOne:" px-aria-3",operaGx:"",operaAir:" px-aria-3"},closeIcon:{operaOne:rn,operaAir:rn,operaGx:on},closeSize:{operaOne:12,operaAir:12,operaGx:16},menuHeader:{operaOne:"dark:text-white",operaGx:""},menuTitle:{operaOne:"ml-1",operaGx:"ml-2",operaAir:"ml-2 text-text-t1-text-active-icons"},menuNewChat:{plusIcon:{icon:Wa,color:"var(--text-tb)",operaGx:{color:"var(--opera-gx-font-color)"}}}};const Xa=function(e){var t=e.onNewChatButtonClick,n=e.isTabViewAvailable,r=e.onExpandMenuIconClick,a=e.onExpandMenuIconKeyUp,o=(0,C.$G)().t,i=(0,l.H9)().isMenuPinned,s=(0,l.o6)($a,["closeIcon","closeSize","menuHeader","menuTitle","headerIconOffset"]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:(0,m.AK)("mb-1 flex items-center justify-between pb-2",s.menuHeader),children:[(0,E.jsxs)("div",{className:(0,m.AK)("flex flex-row gap-aria-2",s.headerIconOffset),children:[(0,E.jsxs)("button",{onClick:t,className:"flex items-center",children:[(0,E.jsx)(de.P,{sender:X.CI.aria,size:20,header:!0}),(0,E.jsx)("span",{className:(0,m.AK)(s.menuTitle,"text-header-m"),children:o("product_name.opera")})]}),n&&(0,E.jsx)(qa,{className:"ml-aria-3"})]}),(0,E.jsx)("div",{className:"h-8 flex-grow"}),!i&&(0,E.jsx)(xe.hU,{border:!0,icon:s.closeIcon,type:"secondary",onClick:r,onKeyUp:a,tabIndex:-1,iconSize:s.closeSize})]}),(0,E.jsxs)(xe.zx,{type:"primary",className:"w-full justify-between",size:"m",onClick:t,children:[(0,E.jsx)("span",{children:o("new_chat")}),(0,E.jsx)(A.S,{config:$a.menuNewChat.plusIcon})]})]})},Ja=n.p+"assets/fc38b7983fc16b181eff.svg";const Qa=function e(t){var n=t.openSettingsHandler,r=(0,C.$G)().t;return(0,E.jsxs)(xe.zx,{type:"tertiary",tabIndex:0,onClick:n,className:"w-full space-x-2 self-center duration-200 ease-in-out",size:"m",testId:(0,m.wE)(e,"button","settings"),children:[(0,E.jsx)(A.S,{config:{icon:Ja,color:"var(--text-t1-text-active-icons)"}}),(0,E.jsx)("div",{children:r("settings")})]})},eo=n.p+"assets/93a9746de1565a35ae92.svg",to=n.p+"assets/124b0bca1fa101be17ad.svg",no=n.p+"assets/1a2bb9f903b0d1bdf09f.svg",ro=n.p+"assets/5332e5f34690d12fd799.svg";var ao={editIcon:{operaOne:eo,operaGx:to},trashIcon:{operaOne:no,operaGx:ro}};const oo=function(e){var t=e.editId,n=e.elementPin,r=e.handleGoToConversation,a=e.id,o=e.isActive,i=e.isTabViewAvailable,s=e.label,c=e.onDeleteClick,d=e.onEditClick,u=e.serverId,f=e.setEditId,p=(0,l.o6)(ao,["trashIcon","editIcon"]),v=function(){return r(a)};return t===a?(0,E.jsx)("div",{className:(0,m.AK)("flex !h-12 w-full items-center",p.editOuter),children:(0,E.jsx)(un,{id:a,setEditId:f,currentLabel:s})}):(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(xe.j2,{type:"menu",className:(0,m.AK)("group","flex !h-12 w-full flex-row gap-1 !pr-2",o?"selected":""),tabIndex:-1,onClick:v,onKeyUp:v,children:(0,E.jsxs)(E.Fragment,{children:[(0,E.jsxs)("div",{className:"flex flex-row items-center justify-start gap-2 truncate",children:[n,(0,E.jsx)("span",{className:"text-body-m truncate",title:s,children:s})]}),(0,E.jsx)("div",{className:"hidden flex-grow group-hover:block"}),(0,E.jsxs)("div",{className:"hidden flex-row justify-end gap-1 group-hover:flex",children:[(0,E.jsx)(xe.hU,{className:"transition-all duration-200 ease-in-out",onClick:function(e){return function(e){e.stopPropagation(),c(a,u,s)}(e)},icon:p.trashIcon,type:"tertiary"}),(0,E.jsx)(xe.hU,{className:"transition-all duration-200 ease-in-out",onClick:function(e){return function(e){e.stopPropagation(),d(a)}(e)},tabIndex:-1,icon:p.editIcon,type:"tertiary"}),i&&(0,E.jsx)(qa,{className:"transition-all duration-200 ease-in-out",conversationId:a})]})]})})})};var io=n(9276);function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function co(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const lo=function(){var e=(0,C.$G)().t,t=(0,l.oH)().isAriaInTabView,n=Ea(),r=Ea(),a=(0,ga.j)().handleSetIsContainerScrolling,o=(0,g.s0)(),c=(0,g.TH)(),d=(0,l.iP)().windowInnerWidth,f=(0,s.Jin)(),v=f.handleDeleteConversation,h=f.handleDeleteAll,b=f.handleAbortConversation,y=(0,s.ljr)().remoteConfig,w=(0,s.eJg)().conversationsWithoutCli,j=(0,s.UMN)().activeConversationId,_=(0,s.RCK)().isAccountLessUser,k=(0,l.H9)(),O=k.isMenuOpen,A=k.isMenuPinned,I=(0,s.lUI)().clearReusableHighlights,S=(0,s.bWQ)().handleActiveConversationChanged,N=(0,s.Qck)().setModel,R=(0,io.j)().handleMenuOpenStateChanged,T=(0,i.useState)(null),M=(0,H.Z)(T,2),P=M[0],D=M[1],G=(0,i.useState)({id:"",serverId:"",label:""}),L=(0,H.Z)(G,2),B=L[0],Z=L[1],F=(0,s.coc)().chatContext,U=(0,s.RCK)(),K=U.isAccountLessMode,V=U.authStatus,W=U.isLoading,z=(0,i.useRef)(null),Y=(0,i.useRef)(null),q=(0,i.useRef)(null),$=(0,i.useRef)(null),X=(0,i.useRef)(null),J=(0,i.useCallback)((function(){if(void 0!==t&&!t)return R(!1)}),[t,R]),Q=function(){c.pathname==="/".concat(x.n5.MAIN,"/").concat(x.n5.SETTINGS)?J():o("/".concat(x.n5.MAIN,"/").concat(x.n5.SETTINGS))},ee=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(F.working&&b(j),!_){e.next=4;break}return e.next=4,v({conversationId:j});case 4:S(x.$M,"sidebar"),N("Aria");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),te=(0,i.useCallback)((function(e){S(e,t?"tab-view":"sidebar"),I(),t||J()}),[S]),ne=(0,gn.F0)(),re=ne.showBottomBorder,ae=ne.showTopBorder,oe=ne.containerRef,ie=(0,gn.OZ)(Y,q,"bottom").isListUnder,se=(0,gn.OZ)(Y,X,"top").isListAbove,ce=function(){(0,m.yc)(Y.current,ie,se)},le=window.innerWidth>=x.Qx,de=function(){le&&(ce(),J())},ue=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.working&&b(j),e.next=3,h();case 3:I(),ee(),n.onOpenChange(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fe=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return F.working&&F.conversationId===B.id&&b(j),e.next=3,v({conversationId:B.id,serverId:B.serverId});case 3:I(),j===B.id&&ee(),r.onOpenChange(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),pe=function(){J(),ee()},ve=y.tab_view&&!t;(0,i.useEffect)((function(){O&&ce()}),[O]),(0,i.useEffect)((function(){d>=x.Qx&&!t?R(!0):R(!1)}),[R,t,d]),(0,i.useEffect)((function(){var e,t=function(e,t){var n;n=t,e===x.SG&&n&&le&&ce(),J()};return null===(e=opr.browserSidebarPrivate)||void 0===e||e.onItemPanelVisibilityChanged.addListener(t),window.addEventListener("resize",de),function(){var e;window.removeEventListener("resize",de),null===(e=opr.browserSidebarPrivate)||void 0===e||e.onItemPanelVisibilityChanged.removeListener(t)}}),[]),(0,i.useEffect)((function(){var e=function(e){z.current&&!z.current.contains(e.target)&&(n.open||r.open||t||J())};return window.addEventListener("mousedown",e),function(){window.removeEventListener("mousedown",e)}}),[R,z,n.open,r.open,t,J]);var he=(0,i.useMemo)((function(){return{menuWrapper:{operaOne:t?"border-r border-stroke-components bg-levels-l5-primary":"rounded-aria-radius-5 bg-levels-l5-primary",operaAir:t?"border-r border-stroke-components bg-levels-l0-extension-bg":A?"rounded-none bg-levels-l0-extension-bg":"rounded-aria-radius-4 bg-levels-l0-extension-bg",operaGx:"gx bg-levels-l5-primary"},menuWrapperBackdrop:{operaAir:"air-level-02"},menuContent:{operaOne:"border-stroke-components",operaGx:"border-classic-gx-no-80 dark:border-classic-gx-no-32"},menuHeader:{operaOne:"dark:text-white",operaGx:""},menuTitle:{operaOne:"ml-1",operaGx:"ml-2",operaAir:"ml-2 text-text-t1-text-active-icons"}}}),[t,A]),ge=(0,l.o6)(he,["menuWrapper","menuWrapperBackdrop","menuContent"]),xe=function(e,t,n){r.onOpenChange(!0),Z({id:e,serverId:t,label:n})},be=function(e){D(e)},ye=function(){R(!O)},we=(0,i.useMemo)((function(){return(0,m.AK)("menu-wrapper p-3",O&&"menu-wrapper-active menu-shadow left-0",ge.menuWrapper,ge.menuWrapperBackdrop)}),[O,ge.menuWrapper,ge.menuWrapperBackdrop]),je=(0,m.AK)(ae?"border-b":"",ge.menuContent,"border-0 border-solid","menu-top-content");return W?(0,E.jsxs)("div",{className:we,ref:z,children:[(0,E.jsx)("div",{className:je,ref:q,children:(0,E.jsx)(Xa,{onNewChatButtonClick:pe,isTabViewAvailable:ve,onExpandMenuIconClick:ye,onExpandMenuIconKeyUp:ye})}),(0,E.jsx)("div",{className:"flex flex-1 items-center justify-center",children:(0,E.jsx)(me.Z,{sizeClass:"h-9.5 w-9.5",spinnerColoring:"gray-accent"})}),(0,E.jsx)(Qa,{openSettingsHandler:Q})]}):(0,E.jsxs)(i.Fragment,{children:[(0,E.jsxs)("div",{className:we,ref:z,children:[(0,E.jsxs)("div",{className:je,ref:q,children:[(0,E.jsx)(Xa,{onNewChatButtonClick:pe,isTabViewAvailable:ve,onExpandMenuIconClick:ye,onExpandMenuIconKeyUp:ye}),K?(0,E.jsx)(Ka,{}):w.filter((function(e){return e.label})).length>0&&(0,E.jsxs)("div",{className:"mt-aria-3 flex select-none justify-end p-aria-3 pb-aria-2",children:[(0,E.jsx)("button",co(co({},n.referenceProps),{},{className:"text-body-m text-text-t1-text-active-icons",children:e("menu_delete_all")})),(0,E.jsx)(Ra,{dialogProps:n.dialogProps,message:e("menu_delete_all_messages_confirm"),confirmMessage:e("delete_all"),cancelMessage:e("cancel"),onCancel:function(){n.onOpenChange(!1)},onConfirm:ue})]})]}),!K&&(0,E.jsx)("div",{className:"hover-scrollbar -mr-1.5 flex-grow overflow-auto py-1",onScroll:a,ref:oe,tabIndex:-1,children:(0,E.jsx)("div",{className:"flex flex-col gap-1",ref:$,children:w.length>0&&w.filter((function(e){var t=e.isLabelGenerated,n=e.label,r=e.labelTmp;return Boolean(n||r||t)})).reverse().map((function(e){var t=e.id,n=e.label,r=e.server_id,a=t===j;return(0,E.jsx)(oo,{editId:P,elementPin:(0,E.jsx)(Va,{active:a,ref:a?Y:null}),handleGoToConversation:te,id:t,isActive:a,isTabViewAvailable:ve,label:n,serverId:r,onDeleteClick:xe,onEditClick:be,setEditId:D},t)}))})}),"loggedIn"===V&&!K&&(0,E.jsx)(ka,{isListUnderProfileSection:re,profileSectionRef:X}),(0,E.jsx)(Qa,{openSettingsHandler:Q})]}),r.open&&(0,E.jsx)(Ra,{message:e("menu_delete_message_confirm")+'"'.concat(B.label,'"?'),confirmMessage:e("delete"),cancelMessage:e("cancel"),onCancel:function(){Z({id:"",serverId:"",label:""}),r.onOpenChange(!1)},onConfirm:fe,dialogProps:r.dialogProps})]})};function uo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uo(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const po=function(){var e,t,n,r,a,o=(0,C.$G)().t,c=(0,l.Su)().loggerService,d=(0,s.YZY)(),f=d.isGx,v=d.isOperaOne,h=(0,l.Cg)().consentNeeded,g=(0,l.oH)().isAriaInTabView,b=(0,l.a)().currentWindowId,y=g?"tab-view":"sidebar",w=(0,l.lm)().pushNotification,j=(0,s.ljr)(),_=j.remoteConfig,k=j.unsupportedFeatures,O=(0,s.coc)().chatContext,A=(0,s.UMN)(),I=A.activeConversationId,S=A.activeConversationData,N=(0,s.kGW)(I).reusableHighlights,R=(0,s.bCg)().highlightsReadyToRender,M=(0,s._gZ)().setContextType,P=(0,s.MII)().isLocalModelsEnabled,D=(0,s.hsz)().feedbackData,G=(0,s.RCK)(),L=G.isAccountLessUser,B=G.authUserDetails,Z=G.consentAccepted,F=(0,s.J7o)(),U=F.currentModel,K=F.fetchedModels,V=F.localModels,W=(0,s.ek)().upgradeBannerSeenInSidebar,z=(0,s.Itl)().checkIfExistInRegistry,Y=(0,s.uEF)().setRenderHighlightsReady,q=(0,s.aGe)().clearChatContext,$=(0,s.oiy)().handleUpgradeBannerSeenInSidebar,X=(0,s.bWQ)().handleActiveConversationChanged,Q=(0,s.Jin)(),ee=Q.handleDeleteConversation,ae=Q.handleUpdateConversation,oe=Q.handleAbortConversation,ie=(0,s.Qck)().setModel,se=(0,i.useState)(""),ce=(0,H.Z)(se,2),le=ce[0],de=ce[1],ue=(0,i.useState)(null),fe=(0,H.Z)(ue,2),pe=fe[0],ve=fe[1],me=(0,i.useState)(null),he=(0,H.Z)(me,2),ge=he[0],be=he[1],ye=(0,i.useState)(null),we=(0,H.Z)(ye,2),je=we[0],_e=we[1],Ce=(0,i.useState)(!1),ke=(0,H.Z)(Ce,2),Oe=ke[0],Ae=ke[1],Ee=(0,i.useState)(!1),Ie=(0,H.Z)(Ee,2),Se=Ie[0],Ne=Ie[1],Re=(0,i.useRef)(null),Te=(0,i.useRef)(null),Me=(0,i.useRef)(new Map),Pe=(0,i.useRef)(N.length),De=Lt({conversationId:I,conversation:S}),Ge=De.isAriaModel,Be=De.parsedModelName,Ze=De.isCloudModel;(0,l.$9)();var He=(0,ta.r)(Te,O.working,Oe),Ue=He.autoScrollHandler,Ve=He.autoScroll,We=g?ne.hG.BROWSER_TAB:ne.hG.SIDEBAR,ze=h&&"Aria"===U,Ye=N.map((function(e){return e.title})),qe=(0,J.Z)({setMessage:de,highlightedTexts:Ye,conversationId:I}),$e=qe.sendMessage,Xe=qe.responseInProgress,Je=Le((0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(O.working&&oe(I),!L){e.next=4;break}return e.next=4,ee({conversationId:I});case 4:X(x.$M,g?"tab-view":"sidebar"),ie("Aria");case 6:case"end":return e.stop()}}),e)}))),[L,I],[O,oe,ee,X,ie]),Qe=S.data.filter((function(e){return e.sender===ne.CI.user})),et=null!==je&&Qe.length?Qe[je]:null,tt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o("new_chat");S.label=e,S.labelTmp=!0};(0,l.rf)((function(){pe&&Z&&($e({text:pe.text,source:g?"tab-view":"sidebar",files:pe.files}),ve(null))}),[Z,pe],[B,g,$e,ve]),(0,i.useEffect)((function(){var e=Array.from(Me.current.values()).pop();if(!!N.length&&Pe.current<N.length&&Te.current&&e){var t,n=new DOMRect,r=(null===(t=Te.current)||void 0===t?void 0:t.getClientRects().item(0))||n;(e.getClientRects().item(0)||n).top>r.bottom||(0,m.hB)(e,{block:"end"})}Pe.current=N.length}),[N.length]),(0,i.useEffect)((function(){if(Ae(!0),null!==et){var e=et.id,t=Me.current.get(e);t&&(0,m.hB)(t,{block:"nearest"})}else ot(),Ae(!1)}),[et]),(0,i.useEffect)((function(){Ve||null!==je||ot(),k&&k.length>0&&w({text:"upgrade_opera_browser",link:"opera://about"},"info")}),[]),(0,i.useEffect)((function(){S.label||tt()}));var nt=(0,l.FL)({currentModel:U,conversation:S}),rt=!(null!==(e=nt.files)&&void 0!==e&&e.every((function(e){return e.status===x.bb.FINISHED})));(0,i.useEffect)((function(){var e,t;nt.files&&null!==(e=nt.files)&&void 0!==e&&e.every((function(e){return e.status===x.bb.FINISHED}))&&($e({text:null!==(t=null==ge?void 0:ge.text)&&void 0!==t?t:"",source:g?"tab-view":"sidebar",files:null==ge?void 0:ge.files}),be(null))}),[ge,rt]);var at=(0,i.useMemo)((function(){if(S.model){var e=V.map((function(e){return e.name})).includes(S.model),t=!Ge&&z(S.model),n="Aria"===S.model;if(!e&&!t||!P&&!n&&!t)return!0}var r=new Date,a=new Date(S.lastMessageTime);return Math.floor((r.valueOf()-a.valueOf())/(24*x.kr))>=30&&""!=S.lastMessageTime}),[S.id,S.lastMessageTime,U,S.model,V,z]),ot=(0,i.useCallback)((function(){S.mode===Gt.E.pageContext||S.mode===Gt.E.writingMode?(0,m.Cp)(Te,"instant"):(0,m.Mx)(Te,"instant")}),[S.mode]);S.label||tt(),(0,i.useEffect)(ot,[R,S.data.length]),(0,i.useEffect)((function(){if(S.data.length>2){var e=g?ne.hG.BROWSER_TAB:ne.hG.SIDEBAR;M(e)}}),[S,g,M]),(0,i.useEffect)((function(){var e=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:q(!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return window.addEventListener("beforeunload",e),function(){window.removeEventListener("beforeunload",e)}}),[q]);var it=(0,i.useState)(!1),st=(0,H.Z)(it,2),ct=st[0],lt=st[1];(0,i.useEffect)((function(){lt(!(Ve&&Xe))}),[S.data.length,Ve,Xe]),(0,i.useEffect)((function(){var e=S.data.length>2;Se&&e&&$(!0)}),[$,Se,S.data.length]),(0,i.useEffect)((function(){function e(e,t,n){e===x.SG&&!t&&Se&&b===n&&$(!0)}return opr.browserSidebarPrivate.onItemPanelVisibilityChanged.addListener(e),function(){opr.browserSidebarPrivate.onItemPanelVisibilityChanged.removeListener(e)}}),[b,$,Se]);var dt=(0,i.useCallback)((function(e){de(e),_e(null)}),[]),ut=function(e,t){e?Me.current.set(t,e):Me.current.delete(t)},ft=!at,pt=0===(null==S||null===(t=S.data)||void 0===t?void 0:t.length),vt=(null===(n=S.data.at(-1))||void 0===n||n.suggestions,(null==S?void 0:S.mode)===Gt.E.pageContext),mt=(null==S?void 0:S.mode)===Gt.E.writingMode,ht=!(I!==x.$M||null!=pe&&pe.text||null!=ge&&ge.text),gt=!pt&&L&&!W,xt=(0,i.useState)(""),bt=(0,H.Z)(xt,2),yt=bt[0],wt=bt[1],jt=(0,i.useCallback)((function(e){Ne(e),e||$(!0)}),[$]),_t=function(e){var t,n;ze?(de(""),ve(e)):null===(t=e.files)||void 0===t||!t.length||null!==(n=e.files)&&void 0!==n&&n.every((function(e){return e.status===x.bb.FINISHED}))?($e(e),_e(null)):(be(e),_e(null),nt.reset())};(0,i.useEffect)((function(){return window.onbeforeunload=function(){oe(I)},function(){window.onbeforeunload=null}}),[I,oe,X]);var Ct,kt=(0,l.o6)({shadowEffectClasses:{operaGx:"fill-[--other-o7]",operaOne:"fill-[--aria-bg-shape-shadow-color]"},shapesClasses:{operaGx:"fill-[--other-o7]",operaOne:"fill-[--aria-bg-shape-fill-color]"}},["shadowEffectClasses","shapesClasses"]);return(0,E.jsx)(pa,{isNewChat:ht,children:(0,E.jsx)(ha.Lz.Provider,{value:S,children:(0,E.jsxs)("div",{className:"w-max-100vw flex h-full w-full flex-row",children:[(0,E.jsx)("div",{className:"relative z-2",children:(0,E.jsx)(lo,{})}),(0,E.jsx)("div",{className:"relative z-1 min-w-0 flex-1 overflow-hidden",children:(0,E.jsxs)("div",{id:"opera-chatbot-container",className:"opera-chatbot-container flex h-full w-full flex-col overflow-hidden p-0 transition-all duration-300 ease-in",children:[(0,E.jsx)(Pn,{conversation:S,addNewChat:Je,conversationId:I,conversationTitle:S.label,isAnimated:Boolean(S.isLabelGenerated)&&Boolean(!S.isAnimated),onAnimationFinish:function(){ae({conversationId:I,updateData:{isAnimated:!0}})}}),(0,E.jsxs)("div",{className:(0,m.AK)("wrapper relative z-1 flex w-full grow flex-col overflow-x-hidden overflow-y-hidden",g&&"z-1 m-auto max-w-tab-view px-3"),children:[ht&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(T,{shadowEffectClasses:kt.shadowEffectClasses,shapesClasses:kt.shapesClasses,shadowEffectGradient:f?{gradientColorsProps:[{id:"start-color",offset:"60.83%",stopColor:"var(--secondary-s4-surface-overlay)"},{id:"stop-color",offset:"76.63%",stopColor:"var(--secondary-s4-surface-overlay)"}],gradientProps:{gradientTransform:"rotate(102)"}}:void 0}),(0,E.jsx)(ua,{description:yt||("Aria"===U?o("chat_lead_in"):(0,E.jsx)(re.$,{message:null!==(r=null===(a=null===(Ct=K.find((function(e){return e.family_name===(0,m.zn)(U).split(":")[0]})))||void 0===Ct?void 0:Ct.description)||void 0===a?void 0:a.trim())&&void 0!==r?r:"",components:{ul:la.Tf}})),title:"Aria"===U?o("product_name.opera"):(0,m.zn)(U)}),"Aria"===U&&(0,E.jsx)(ca,{adjustChatLeadingDescription:function(e,t){var n=x.t5.EXPERT_TRANSLATION,r=x.t5.GRAMMAR_CHECK,a=x.t5.EMAIL,i=x.t5.QUICK_SUMMARIES,s=x.t5.ANALYZE_AND_EDIT,c=x.t5.TONE_OF_VOICE;if(t&&"communication"===t)wt(o("write_edit_refine"));else switch(e){case a:case n:case r:wt(o("write_check_translate_emails_with_ai"));break;case i:case s:case c:wt(o("write_edit_refine"));break;default:wt("")}},sendMessage:_t})]}),(0,E.jsxs)("div",{ref:Te,id:"messages-container",className:(0,m.AK)("messages z-1",pt?"w-[101%] !px-0":"pl-3 pr-1.5",!(pt&&f)&&"messages-container hover-scrollbar",function(){if(S.data.length)return _.local_models&&P?"mt-2":"mt-0"}()),onScroll:Ue,children:[(!pt||ge)&&Ge&&(0,E.jsx)(Gn,{}),(0,E.jsx)(ea,{onContentHighlighterError:function(e){c.error("CONTENT HIGHLIGHTER ERROR",e),c.info("SETTING HIGHLIGHTS TO NOT RENDER"),Y(!1),c.info("REMOVING HIGHLIGHTED SPANS"),xr(Te.current),Y(!0),c.info("HIGHLIGHTS CAN BE RENDERED")},children:(0,E.jsxs)(qr,{messagesContainerRef:Te,readOnly:at,children:[!pt&&(0,E.jsxs)(E.Fragment,{children:[Ge&&vt&&(0,E.jsx)(Fe,{id:"conversation_in_context_mode",sender:ne.CI.aria,message:o("conversation_in_context_mode"),noExtraButtons:!0,responseInProgress:Xe,contextType:We,originLink:S.originLink,addNewChat:Je,conversationId:I,conversationSource:y},"conversation_in_context_mode"),Ge&&mt&&(0,E.jsx)(Fe,{id:"conversation_in_writing_mode",sender:ne.CI.aria,message:o("conversation_in_writing_mode"),noExtraButtons:!0,responseInProgress:Xe,contextType:We,originLink:S.originLink,addNewChat:Je,conversationId:I,conversationSource:y},"conversation_in_writing_mode"),!Ge&&(0,E.jsx)(Fe,{id:"local_model_disclaimer_message",sender:ne.CI.localModel,message:Ze?o("cloud_model_input_disclaimer",{modelName:Be}):o("local_model_disclaimer_message"),noExtraButtons:!0,conversationId:I,responseInProgress:Xe,contextType:We,addNewChat:Je,conversationSource:y},"local_model_disclaimer_message")]}),S.data.reduce((function(e,t,n){var r=S.data[n-1],a=S.data[n+1],o=(0,i.createElement)(Fe,fo(fo({},t),{},{ref:function(e){return ut(e,t.id)},key:t.id,isLastMessage:!a,aborted:t.aborted,isRetryDisabled:at||t.isRetryDisabled,responseInProgress:Xe,contextType:We,conversationId:I,conversationSource:y,isActive:t===et,addNewChat:Je}));return t.sender===ne.CI.user&&a&&a.sender===ne.CI.aria?[].concat((0,te.Z)(e),[(0,E.jsx)(xe.fx,{render:function(e){var r=e.handleScreenshotClipboard,s=e.clipboardPending;return(0,E.jsxs)(i.Fragment,{children:[o,(0,i.createElement)(Fe,fo(fo({},a),{},{key:a.id,ref:function(e){return ut(e,a.id)},isLastMessage:S.data.length===n+2,isRetryDisabled:at||t.isRetryDisabled,responseInProgress:Xe,contextType:We,conversationId:I,conversationSource:y,isActive:a.id===(null==et?void 0:et.id),handleScreenshotClipboard:r,screenshotClipboardPending:s,model:S.model,addNewChat:Je,userRequestMessage:t}))]})}},a.id),(null==D?void 0:D.message_id)&&D.message_id===a.server_id&&(0,E.jsx)(na.x,{},D.message_id)]):t.sender===ne.CI.aria&&r&&r.sender===ne.CI.user?e:[].concat((0,te.Z)(e),[o])}),[]),ze&&pe&&(0,E.jsx)(Fe,{id:"consents",sender:ne.CI.aria,message:o("consent_header"),noExtraButtons:!0,responseInProgress:Xe,contextType:We,conversationId:I,originLink:S.originLink,addNewChat:Je,conversationSource:y,children:(0,E.jsx)(ma.H,{source:g?"tab-view":"sidebar"})}),ge&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(Fe,{id:"file-loading-in-progress",sender:ne.CI.user,message:ge.text,noExtraButtons:!0,responseInProgress:Xe,contextType:We,conversationId:I,originLink:S.originLink,addNewChat:Je,conversationSource:y,files:ge.files}),(0,E.jsx)(Fe,{id:"file-loading-in-progress",sender:ne.CI.aria,message:o("constructing_response"),noExtraButtons:!0,responseInProgress:Xe,contextType:We,conversationId:I,originLink:S.originLink,addNewChat:Je,conversationSource:y})]})]})}),false,at&&(0,E.jsx)(Ln,{})]}),gt&&(0,E.jsx)(va.Q,{onCloseButtonClick:function(){$(!0)},source:g?"tab-view":"sidebar",onVisibilityChange:jt}),ft&&(0,E.jsx)(nn,{hideFileUploadPreview:!!ge,addNewChat:Je,imageHandlers:nt,messagesContainerRef:Te,ref:Re,readOnly:at,setMessage:dt,sendMessage:_t,message:le,conversation:S,onActiveUserMessageIndexChange:function(e){if(0!==Qe.length&&(null!==je||1!==e)){var t=Qe.length-1,n=null===je?t:je+e;n<0&&(n=0),n>t&&(n=null),_e(n),de(null===n?"":Qe[n].message)}},conversationId:I,disabled:Boolean(1===S.data.length)&&(ze||!!ge)}),ft&&v&&ht&&(0,E.jsx)(fa,{}),ct&&(0,E.jsx)(Ke,{conversationId:S.id,message:le,inputRef:Re,messagesContainerRef:Te,isUpgradeBannerVisible:gt})]})]})})]})})})},vo=n.p+"assets/d2997d4288440b6c4c4a.svg",mo=n.p+"assets/6ec825e05b24db6ea6b0.svg",ho=n.p+"assets/404f7a90cd8ce83e30c8.svg",go=n.p+"assets/18174ac973928d67db26.svg",xo=n.p+"assets/e0920cfc21543bd7f9e0.svg",bo=n.p+"assets/bade451f8a67f35ae0b9.svg",yo=n.p+"assets/c7bdb33cb7a8acb563b8.svg",wo=n.p+"assets/75f78366b2f7adaf7d2c.svg",jo=n.p+"assets/df9cb083733effd6a90b.svg",_o=n.p+"assets/18737c6250fbbb2f0aaf.svg",Co=n.p+"assets/740fa2b284e7191e12f9.svg",ko=n.p+"assets/a2ddd971520f0d37145d.svg",Oo=n.p+"assets/c4eb6025e616ec800c00.svg",Ao=n.p+"assets/5887feb6b3dbed3d4328.svg",Eo=n.p+"assets/29f43fb588a968ca6b53.svg",Io=n.p+"assets/76b7a023fed501defe5d.svg",So=n.p+"assets/057b75a5e4f77e5a3839.svg",No=n.p+"assets/6afa4adc6b70aecfe2c3.svg",Ro=n.p+"assets/9832e78460151f4cc193.svg",To=n.p+"assets/f6a455f040f73a2b2502.svg",Mo=n.p+"assets/62469514a6d4066e0f28.svg";var Po=n(50748);const Do=n.p+"assets/83086224f81da1a81228.svg";var Go=n(37435),Lo=n(57074);const Bo=function(e){var t=e.downloading,n=void 0!==t&&t,r=e.modelId,a=e.onClick;return(0,E.jsx)(S.zx,{className:"flex !h-8 w-8 cursor-pointer flex-col items-center justify-center rounded-aria-radius-3 bg-secondary-s3-bg-icons duration-200 ease-in-out hover:bg-levels-l2-hover",onClick:function(){null==a||a(r)},type:"secondary",children:(0,E.jsx)(A.S,{config:{operaOne:{dark:n?ve:Lo,light:n?Do:Go}}})})},Zo=n.p+"assets/24b12ecade0f68153d0d.svg",Ho=n.p+"assets/9ecc638ab961ea5f42dc.svg";function Fo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Uo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fo(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Ko=function(){var e=(0,C.$G)().t,t=(0,l.o6)({operaOne:{light:Zo,dark:Ho}});return(0,E.jsx)(S.u,{placement:"bottom",offsetValue:20,title:e("not_recommended"),delay:x.XT,children:function(e){var n=e.ref,r=e.referenceProps;return(0,E.jsx)("span",Uo(Uo({className:"flex",ref:n},r),{},{children:(0,E.jsx)("img",{src:t,alt:"",draggable:"false"})}))}})};var Vo=n(25108),Wo=function(){function e(){(0,y.Z)(this,e)}return(0,b.Z)(e,null,[{key:"abortModelPull",value:function(e,t){var n=this.abortControllersPool.get(e);n?n.abort(t):Vo.error("Object with key",e,"does not exists")}},{key:"abortAll",value:function(e){this.abortControllersPool.forEach((function(t){t.abort(e)})),this.abortControllersPool.clear()}},{key:"createModelPullAbort",value:function(e){var t=this,n=new AbortController,r=e;return r||(r=crypto.randomUUID()),n.signal.addEventListener("abort",(function(e){var n=e.target.reason;Vo.error("ABORT REASON:",n),t.abortControllersPool.delete(r)})),this.abortControllersPool.set(r,n),{id:r,signal:n.signal}}}]),e}();(0,w.Z)(Wo,"abortControllersPool",new Map);var zo=n(28721),Yo=n(111),qo=n(25108);function $o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$o(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Jo=function(e){var t=e.setShowDeleteConfirm,n=e.setModelNameInPopup,r=(0,l.Su)().loggerService,a=(0,C.$G)().t,o=(0,l.lm)().pushNotification,d=(0,l.oH)().isAriaInTabView,f=(0,i.useState)([]),v=(0,H.Z)(f,2),h=v[0],g=v[1],b=(0,i.useState)(!1),y=(0,H.Z)(b,2),w=y[0],j=y[1],_=(0,i.useState)("NO_ACCELERATION"),k=(0,H.Z)(_,2),O=k[0],A=k[1],I=(0,i.useState)(!1),N=(0,H.Z)(I,2),R=N[0],T=N[1],M=(0,i.useState)(!1),P=(0,H.Z)(M,2),D=P[0],G=P[1],L=(0,i.useState)(""),B=(0,H.Z)(L,2),Z=B[0],F=B[1],U=(0,s.J7o)(),K=U.fetchedModels,V=U.localModels,W=U.localModelsServiceStatus,z=(0,s.nHi)().endpointLocalModels,Y=(0,s.Uwy)().userCapabilities,q=(0,s.Qck)(),$=q.addModel,J=q.updateModel,Q=q.addModelList,ee=q.removeLocalModel,te=q.setFetchedModels,ne=(0,i.useMemo)((function(){return K.flatMap((function(e){var t=e.tags,n=e.reference_url;return t.map((function(e){return Xo(Xo({},e),{},{reference_url:n})}))}))}),[K]),re=(0,i.useMemo)((function(){return ne.filter((function(e){return!V.some((function(t){return t.name===e.detailed_name}))}))}),[ne,V]),ae=(0,l.o6)({downloadAccLibDisclaimer:{operaOne:"font-be-vietnam",operaGx:"font-inter"},downloadStatus:{operaOne:"font-be-vietnam",operaGx:"font-inter"},downloadWarning:{operaOne:"font-be-vietnam",operaGx:"font-inter"}},["modelListWrapper","downloadAccLibDisclaimer","downloadStatus","downloadWarning"]),oe=ae.downloadAccLibDisclaimer,ie=ae.downloadStatus,se=ae.downloadWarning;(0,i.useEffect)((function(){(0,u.Z)(p().mark((function e(){var t;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return qo.info("Fetching local models list"),e.next=3,(0,m.Ur)(z,{method:"GET"});case 3:t=e.sent,te(t);case 5:case"end":return e.stop()}}),e)})))()}),[]);var ce=(0,i.useCallback)(function(){var e=(0,u.Z)(p().mark((function e(t,n){var a,o,i,s,c,l,u,f,v,h,g,b,y,w;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.getReader(),o=new TextDecoder("utf-8"),i=[],s=Date.now(),c={inProgress:null,status:null,timestamp:s,total:null},l=(0,Yo.Z)((function(e){J(e)}),x.sh),e.prev=6;case 7:return e.next=10,a.read();case 10:if(u=e.sent,f=u.done,v=u.value,!f){e.next=24;break}return r.info("PULLING MODEL",n.id,"DONE"),(0,Pe.vH)({action:X.VV.MODEL_DOWNLOADED,element:X.Y3.AI_SETTING,context:d?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:null,str_value:n.id,ai_provider:(0,Pe.V_)(null==Y?void 0:Y.ai_provider)}),e.t0=Q,e.t1=En,e.next=20,(0,m._f)();case 20:return e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3),e.abrupt("break",33);case 24:if(!v){e.next=31;break}if(h=JSON.parse(Sn(v,i,o)),g=h.status,b=h.completed,y=h.total,!(w=h.error)){e.next=29;break}throw Error(w);case 29:c=Xo(Xo({},c),{},{error:w,inProgress:b,status:g,timestamp:s,total:y}),l(Xo(Xo({},n),{},{download:c}));case 31:e.next=7;break;case 33:return e.prev=33,l.flush(),e.finish(33);case 36:case"end":return e.stop()}}),e,null,[[6,,33,36]])})));return function(t,n){return e.apply(this,arguments)}}(),[Q,r,J,d]),le=(0,i.useCallback)((function(e){var t=V.find((function(t){return t.id===e}));if(t)return t;var n=re.find((function(t){return t.detailed_name===e}));if(n){var r=n.detailed_name,a=n.disk_usage;return{id:e,name:r,size:a}}return{id:e,name:"",size:""}}),[re,V]),de=(0,i.useCallback)(function(){var e=(0,u.Z)(p().mark((function e(t){var n,i,s,c,l,d,u,f,v,m;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=le(t),i=Wo.createModelPullAbort(t),(s=i.signal).addEventListener("abort",(function(e){var t,r,a=e.target.reason,o=Error(a);J(Xo(Xo({},n),{},{download:{timestamp:null!==(t=null===(r=n.download)||void 0===r?void 0:r.timestamp)&&void 0!==t?t:Date.now(),status:null,inProgress:null,total:null,error:o.message||o.name}}))})),e.prev=3,r.info("PULLING MODEL",t,"STARTED..."),d=Xo(Xo({},n),{},{download:{timestamp:null!==(c=null===(l=n.download)||void 0===l?void 0:l.timestamp)&&void 0!==c?c:null,status:"progress",inProgress:null,total:null}}),V.some((function(e){return e.id===n.id}))?J(d):$(d),e.next=9,Po.Z.pullModel({name:t,stream:!0},s);case 9:if(!(u=e.sent).body){e.next=13;break}return e.next=13,ce(u.body,n);case 13:e.next=20;break;case 15:e.prev=15,e.t0=e.catch(3),m=a("chat_error_processing_request"),e.t0 instanceof DOMException&&"AbortError"===e.t0.name||(r.error("PULL MODEL",t,"ERROR",e.t0),Wo.abortModelPull(t),o(m,"error")),J(Xo(Xo({},n),{},{download:{timestamp:null!==(f=null===(v=n.download)||void 0===v?void 0:v.timestamp)&&void 0!==f?f:null,total:null,inProgress:null,status:null,error:m}}));case 20:case"end":return e.stop()}}),e,null,[[3,15]])})));return function(t){return e.apply(this,arguments)}}(),[$,le,V,r,ce,a,J]),ue=(0,i.useCallback)((function(e){if(e.download){var r=e.size,o=e.download,i=o.error,s=o.inProgress,c=o.status;return i&&"USER_ABORT"!==i?(0,E.jsx)(S.zx,{className:"h-aria-7",type:"secondary",onClick:function(){return de(e.id)},children:a("retry")}):s||!r||c&&"success"!==c&&"writing manifest"!==c?(0,E.jsx)(Bo,{modelId:e.id,onClick:function(e){Wo.abortModelPull(e,"USER_ABORT"),ee(e)},downloading:Boolean(c)}):(0,E.jsx)(S.zx,{className:"h-aria-7",type:"secondary",onClick:function(){n(e.name),t(!0)},children:a("delete")})}return(0,E.jsx)(Bo,{modelId:e.id,onClick:de,downloading:!1})}),[de,ee,n,t,a]),fe=(0,i.useCallback)((function(e){var t,n=null!==(t=e.download)&&void 0!==t?t:{},r=n.error,o=n.inProgress,i=void 0===o?"":o,s=n.status,c=n.total;return(0,E.jsxs)("div",{className:"flex",children:[(0,E.jsxs)("div",{className:"flex items-center justify-center",children:[(null==e?void 0:e.isNotRecommended)&&!s&&(0,E.jsx)(Ko,{}),s&&"success"!=s&&(0,E.jsxs)("div",{className:"mr-2 flex max-w-[170px] flex-col items-center justify-center gap-2 truncate whitespace-break-spaces break-words text-xxs",children:[(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(me.Z,{spinnerColoring:"gray-accent"}),(0,E.jsx)("p",{className:(0,m.AK)("whitespace-nowrap text-text-t3-text-gray",ie),children:a("downloading",{status:[void 0,0,100].includes(In(i,c,e.download))?"":new Intl.NumberFormat(navigator.language,{style:"percent"}).format(In(i,c,e.download)/100)})})]}),r&&"USER_ABORT"!==r&&(0,E.jsx)("p",{className:(0,m.AK)("w-full text-other-warning",se),children:r})]})]}),ue(e)]})}),[ie,se,ue,a]),pe=(0,i.useCallback)((function(e){var t=e.target.value.trim();F(t.toLocaleLowerCase())}),[]),ve=(0,i.useCallback)((0,u.Z)(p().mark((function e(){var t,n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,G(!0),r.info("Loading acceleration library"),e.next=5,(0,c.qP)();case 5:if(t=e.sent,r.info("Hardware acceleration library download status:",t),"SUCCESS"!==t){e.next=10;break}return e.next=10,(0,c.f6)();case 10:return e.next=12,(0,c.vy)();case 12:n=e.sent,T(n),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),r.error("Loading acceleration library error:",e.t0);case 19:return e.prev=19,G(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])}))),[]),he=(0,i.useCallback)((function(){return(0,E.jsx)("span",{className:(0,m.AK)("inline-block w-full text-center font-normal normal-case text-text-t3-text-gray",oe),children:D?(0,E.jsxs)("span",{className:"flex w-full items-center justify-between text-xxs uppercase",children:[a("local_models_hardware_acceleration_lib_downloading",{libraryName:O}),(0,E.jsx)(me.Z,{spinnerColoring:"gray-accent"})]}):(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("span",{children:a("local_models_hardware_acceleration_lib_suggestion")}),(0,E.jsx)("span",{children:" "}),(0,E.jsx)("button",{onClick:ve,className:"underline",children:a("download_file_button_title")})]})})}),[D,oe,ve,O,a]),ge=(0,i.useCallback)((0,u.Z)(p().mark((function e(){var t,n,r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.VZ)();case 2:return t=e.sent,e.next=5,(0,c.vy)();case 5:return n=e.sent,e.next=8,(0,c.ix)();case 8:r=e.sent,j(t),T(n),A(r);case 12:case"end":return e.stop()}}),e)}))),[]),xe=(0,i.useMemo)((function(){return re.filter((function(e){var t=e.detailed_name;if(Z){var n=Z.toLocaleLowerCase();return t.toLocaleLowerCase().indexOf(n)>-1}return!0})).map((function(e){var t=V.find((function(t){return t.id===e.tag}))||{id:e.detailed_name,name:e.detailed_name,size:e.disk_usage,isNotRecommended:e.not_recommended,reference_url:e.reference_url};return{action:fe(t),title:"".concat(t.name," (").concat(t.size,")"),reference_url:t.reference_url,id:(0,zo.Z)()}}))}),[re,Z,V]);(0,i.useEffect)((function(){var e=V.sort(Nn).map((function(e){var t,n,r=e.name,a=e.size,o=(null===(t=ne.find((function(t){return t.detailed_name===(null==e?void 0:e.tag)})))||void 0===t?void 0:t.not_recommended)||!1,i=null===(n=ne.find((function(t){return t.detailed_name===(null==e?void 0:e.tag)})))||void 0===n?void 0:n.reference_url;return{action:fe(Xo(Xo({},e),{},{isNotRecommended:o})),title:"".concat(r," (").concat(a,")"),reference_url:i}}));w&&!R&&e.push({title:he()}),g(e)}),[fe,R,w,he,V,ne]),(0,i.useEffect)((function(){"UNAVAILABLE"===W&&Wo.abortAll(a("chat_error_processing_request"))}),[W]),(0,i.useEffect)((function(){ge()}),[ge]);var be=(0,i.useMemo)((function(){return!!h.length}),[h]);return(0,E.jsxs)("div",{className:"flex h-full flex-col gap-aria-6",children:[be&&(0,E.jsx)(si,{collapsible:!0,items:h,title:a("downloaded_local_models_list_title",{localModelsCount:h.length}),maxHeight:Math.min(h.length*x.Dl,4*x.Dl)+x.lV},"downloaded-models"),(0,E.jsx)(si,{items:xe,onSearchBarInput:pe,searchBar:!0,searchBarPlaceholder:a("search_local_model_placeholder")},"available-models")]})};var Qo=n(66688),ei=n(39142);const ti=function e(t){var n=t.onInput,r=t.placeholder,a=void 0===r?(0,pn.t)("search"):r;return(0,E.jsx)("div",{children:(0,E.jsx)("input",{"data-testid":(0,m.wE)(e,"input","search"),className:"text-body-l min-h-aria-9 w-full rounded-aria-radius-3 border border-transparent bg-levels-l0-extension-bg p-aria-2 pl-aria-3 text-left text-text-t1-text-active-icons placeholder:text-text-t3-text-gray focus:border-cobalt-blue focus:outline-none",onInput:n,placeholder:a})})},ni=n.p+"assets/70eba12308e7984fd14b.svg",ri=n.p+"assets/3be6ad1b3df0e5831c59.svg";const ai=function(e){var t,n,r=e.item,a=e.index,o=e.isLast,s=e.getItemState,c=e.handleItemToggling,l=(0,C.$G)().t,d=r.title,u=r.description,f=void 0===u?"":u,p=r.icon,v=r.reference_url,h=r.onItemClick,g=r.action,x=(0,i.useCallback)((function(){null==h||h(r)}),[r,h]);return(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{role:"button",onClick:x,onKeyDown:x,tabIndex:0,className:(0,m.AK)("flex p-aria-2",h&&"cursor-pointer"),children:(0,E.jsxs)("div",{className:"flex w-full items-center gap-aria-4",children:[p&&(0,E.jsx)("div",{className:"inline-flex h-12 w-12 min-w-[3rem] items-center justify-center rounded-xl bg-extra-content-bg p-1",children:p}),(0,E.jsxs)("div",{className:"flex flex-grow flex-col gap-aria-1 overflow-hidden",children:[(0,E.jsx)("p",{className:"text-header-s-bold text-text-t1-text-active-icons",children:d}),v&&(0,E.jsx)(K.h,{className:"text-body-s text-text-t3-text-gray underline",to:v,testName:d.toString(),children:l("terms_of_service")}),Boolean(f)&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)("div",{className:(0,m.AK)("text-ellipsis break-words text-xxs text-text-t1-text-active-icons",null!==(t=s(a))&&void 0!==t&&t.isShortened?"max-h-6 truncate whitespace-nowrap":""),children:(0,E.jsx)(re.$,{message:f.trim(),components:{ul:la.Tf}})}),f.length>80&&(0,E.jsx)("div",{role:"button",tabIndex:-1,className:"bold underline",onClick:c(a),onKeyDown:c(a),children:null!==(n=s(a))&&void 0!==n&&n.isShortened?l("show_more"):l("show_less")})]})]}),g]})}),!o&&(0,E.jsx)("div",{className:"my-aria-3 h-px w-full bg-secondary-s1-selected-stroke"})]})};var oi=(0,i.memo)((function(e){var t=e.data,n=e.index,r=e.style,a=t.items,o=t.handleItemToggling,i=t.getItemState,s=a[n],c=n===a.length-1;return(0,E.jsx)("div",{style:r,children:(0,E.jsx)(ai,{index:n,item:s,handleItemToggling:o,getItemState:i,isLast:c})})}),Qo.wy);oi.displayName="ModelRowWrapper";const ii=oi;const si=function(e){var t=e.collapsible,n=void 0!==t&&t,r=e.items,a=e.onSearchBarInput,o=e.searchBar,s=void 0!==o&&o,c=e.searchBarPlaceholder,d=e.title,u=void 0===d?"":d,f=e.maxHeight,p=(0,gn.L1)().isCurrentThemeDark,v=(0,i.useState)([]),h=(0,H.Z)(v,2),g=h[0],b=h[1],y=(0,i.useState)(!1),w=(0,H.Z)(y,2),j=w[0],_=w[1],C=(0,i.useCallback)((function(e){var t;return null!==(t=g.find((function(t){return t.index===e})))&&void 0!==t?t:{index:e,isShortened:!0}}),[g]),k=(0,i.useCallback)((function(e){return function(t){var n;t.stopPropagation(),b([{index:e,isShortened:!(null!==(n=C(e))&&void 0!==n&&n.isShortened)}])}}),[C]),O=Rn(r,k,C),A=(0,l.o6)({modelListWrapper:{operaOne:"rounded-aria-radius-4 font-normal font-mono",operaGx:"rounded-aria-radius-2 font-bold font-inter"}},"modelListWrapper");return(0,E.jsx)("div",{className:(0,m.AK)("border border-secondary-s1-selected-stroke p-aria-3",A,!j&&"flex-1"),style:{maxHeight:f},children:(0,E.jsx)("div",{className:"h-full border border-none border-secondary-s1-selected-stroke",children:(0,E.jsxs)("div",{className:"flex h-full flex-col",children:[!!u&&(0,E.jsxs)("div",{className:"flex h-7 items-center justify-between p-1",children:[function(e){return(0,E.jsx)("p",{className:"text-header-s-bold text-text-t1-text-active-icons",children:e})}(u),n&&(0,E.jsx)("button",{onClick:function(){_((function(e){return!e}))},children:(0,E.jsx)("img",{className:(0,m.AK)("h-4 w-4",j?"rotate-0":"rotate-180"),src:p?ni:ri,alt:"Chevron bottom icon"})})]}),(0,E.jsx)("div",{className:"flex-1",children:(0,E.jsxs)("div",{className:(0,m.AK)("flex h-full flex-col gap-aria-3",j&&"hidden"),children:[s&&(0,E.jsx)("div",{children:(0,E.jsx)(ti,{onInput:a,placeholder:c})}),(0,E.jsx)("div",{className:"flex-1",children:(0,E.jsx)(ei.ZP,{children:function(e){var t=e.height,n=e.width;return(0,E.jsx)(Qo.S_,{height:t,width:n,itemCount:r.length,itemSize:function(){return x.Dl},itemData:O,children:ii})}})})]})})]})})})};const ci=function(){var e=(0,C.$G)().t,t=(0,l.Su)().loggerService,n=(0,l.oH)().isAriaInTabView,r=(0,s.MII)(),a=r.isLocalModelsEnabled,o=r.isLocalModelsEnabledPending,d=(0,s.Uwy)().userCapabilities,f=(0,s.C7C)(),v=f.setLocalModels,m=f.setLocalModelsPending,h=(0,s.Qck)().setModel,g=(0,s.C7C)().setLocalModelsChangedByUser,x=(0,i.useCallback)(function(){var e=(0,u.Z)(p().mark((function e(n){var r;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m(!0),!n){e.next=9;break}return e.next=5,(0,c.xM)();case 5:(r=e.sent)&&v(r),e.next=14;break;case 9:return e.next=11,(0,c.Pv)();case 11:e.sent&&v(!1),h("Aria");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),t.error("LOCAL MODELS ENABLE ERROR",e.t0);case 19:return e.prev=19,m(!1),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[0,16,19,22]])})));return function(t){return e.apply(this,arguments)}}(),[t,v,m,h]),b=(0,i.useCallback)((function(e){(0,Pe.vH)({action:X.VV.SETTINGS_CHANGED,element:X.Y3.AI_SETTING,context:n?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:null,str_value:"local_model:".concat(e?"enabled":"disabled"),ai_provider:(0,Pe.V_)(null==d?void 0:d.ai_provider)}),g(!0),x(e)}),[n,x,g,null==d?void 0:d.ai_provider]);return(0,E.jsxs)("div",{className:"flex flex-row items-center justify-between gap-3 rounded-aria-radius-4 border border-secondary-s1-selected-stroke p-aria-4",children:[(0,E.jsxs)("div",{className:"flex flex-col gap-aria-3",children:[(0,E.jsx)("p",{className:"text-header-s-bold w-full text-left text-text-t1-text-active-icons",children:e("enable_local_models_toggle_title")}),(0,E.jsx)("p",{className:"text-body-s text-text-t3-text-gray",children:e("local_models_legal_disclaimer")})]}),(0,E.jsx)(V,{checked:a,disabled:o,setChecked:b})]})},li=n.p+"assets/50d25218d5fc38c8c792.svg",di=n.p+"assets/ebe5521cb0a5123a75f2.svg";const ui=function(e){var t=e.setShowDeleteConfirm,n=e.setModelNameInPopup,r=(0,s.MII)(),a=r.isLocalModelsEnabled,o=r.isLocalModelsEnabledPending,c=(0,s.RCK)().isAccountLessMode,d=(0,s.Uwy)().userCapabilities,u=(0,s.C7C)().setSelectedLocalModel,f=(0,s.HhX)().setAccountlessLoginData,p=(0,s.fvp)().networkEnvironment,v=(0,C.$G)().t,h=(0,l.oH)().isAriaInTabView;(0,i.useEffect)((function(){return function(){return u(null)}}),[u]);var g=(0,i.useMemo)((function(){return!a&&o?(0,E.jsx)("div",{className:"flex w-full flex-col items-center overflow-hidden",children:(0,E.jsx)(A.S,{className:"animate-spin",config:{dark:di,light:li},size:32})}):a?(0,E.jsx)(Jo,{setShowDeleteConfirm:t,setModelNameInPopup:n}):void 0}),[a,o,n,t]),x=(0,i.useCallback)((function(){var e=h?X.hG.BROWSER_TAB:X.hG.SIDEBAR;f({context:e,initTime:Date.now(),source:"ai_benchmark"}),(0,Pe.vH)({action:X.VV.CLICK,context:e,element:X.Y3.ONBOARDING,str_value:"start:log_in:ai_benchmark",ai_provider:(0,Pe.V_)(null==d?void 0:d.ai_provider)}),(0,Fa.RB)((0,dt.B9)(Ha.FU.EMAIL,p))}),[h,p,f,null==d?void 0:d.ai_provider]);return(0,E.jsxs)("div",{className:(0,m.AK)("flex h-full flex-col gap-aria-6 overflow-hidden",!h&&"px-aria-4"),children:[(0,E.jsx)("div",{children:(0,E.jsxs)("div",{className:(0,m.AK)("flex justify-between gap-aria-3 rounded-xlg border border-secondary-s1-selected-stroke p-aria-4",c?"flex-col items-start":"items-center"),children:[(0,E.jsx)("p",{className:"text-header-s-bold rounded-aria-radius-4 text-text-t1-text-active-icons",children:"AI BENCHMARK"}),c?(0,E.jsx)("div",{className:"text-body-s text-text-gray",children:(0,E.jsx)(C.cC,{i18nKey:v("consent_login_for_free"),components:{link1:(0,E.jsx)("span",{className:"underline",role:"button",tabIndex:-1,onClick:x,onKeyUp:x})}})}):(0,E.jsx)(S.zx,{type:"tertiary",size:"xs",onClick:function(){var e="production"===p?"https://www.devicetest.ai":"https://staging.route53.devicetest.ai";(0,m.Yo)(e)},children:v("go_to_test")})]})}),(0,E.jsx)("div",{children:(0,E.jsx)(ci,{})}),(0,E.jsx)("div",{className:"flex-1",children:g})]})};var fi=function(e){var t=e.icon,n=e.toggleConfig,r=e.testname,a=e.header,o=e.description,i=n.checked,s=n.setChecked,c={iconWrapper:{operaOne:"bg-secondary-s1-selected-stroke border border-secondary-s1-selected-stroke rounded-xl pl-aria-2.5 pt-aria-2.5",operaGx:"rounded-aria-radius-3 bg-secondary-s3-bg-icons pl-[7px] pt-[7px]",operaAir:"rounded-aria-radius-2"},wrapper:{operaGx:"rounded-aria-radius-3 border-image-1-header"}},d=(0,l.o6)(c,"iconWrapper");return(0,E.jsxs)("div",{className:(0,m.AK)("flex justify-between",(0,l.o6)(c,"wrapper")),children:[(0,E.jsxs)("div",{className:"flex gap-aria-4",children:[t?(0,E.jsx)("div",{className:(0,m.AK)(d,"box-border h-[51px] w-[51px] min-w-[51px] overflow-hidden border border-secondary-s1-selected-stroke"),children:(0,E.jsx)("img",{src:t,alt:"",className:"w-full rounded-tl-aria-radius-2"})}):(0,E.jsx)("div",{className:"h-aria-9 w-aria-9 min-w-aria-9 rounded-xl bg-secondary-s3-bg-icons"}),(0,E.jsxs)("div",{className:"flex flex-col justify-center gap-aria-2",children:[(0,E.jsx)("p",{className:"text-header-m text-text-t1-text-active-icons",children:a}),(0,E.jsx)("p",{className:"text-body-s pr-10 text-text-t1-text-active-icons",children:o})]})]}),(0,E.jsx)(V,{testName:r,checked:i,setChecked:s})]})};const pi=n.p+"assets/9ddbb7c1d730ad89a289.svg",vi=n.p+"assets/f72656b73d5a3b2d097e.svg";var mi=function(){var e,t,n,r=(0,C.$G)().t,a=(0,s.ALE)().profileMemoryEnabled,o=(0,s.jRd)().handleProfileMemoryChanged,c=(e=o,t=(0,l.oH)().isAriaInTabView,n=(0,s.Uwy)().userCapabilities,(0,i.useCallback)((function(r){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.AI_SETTING,context:t?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:".concat(r?"enabled":"disabled"),ai_provider:(0,Pe.V_)(null==n?void 0:n.ai_provider)}),e(r)}),[e,t,null==n?void 0:n.ai_provider])),d=(0,l.o6)({operaOne:{dark:pi,light:vi}});return(0,E.jsx)(fi,{description:r("profile_settings_usage_subtitle"),icon:d,header:r("profile_memory_input_action"),toggleConfig:{checked:a,setChecked:c}})},hi=function(){return(0,E.jsx)("div",{className:"w-full p-aria-3",children:(0,E.jsx)(me.Z,{})})},gi=function(){var e=(0,C.$G)().t;return(0,E.jsx)("span",{className:"text-aria-body-s text-text-t3-text-gray",children:e("profile_settings_empty_memoty_title")})},xi=function(){var e,t,n,r=(0,C.$G)().t,a=(0,s.QIv)().handleClearMemory,o=(e=a,t=(0,l.oH)().isAriaInTabView,n=(0,s.Uwy)().userCapabilities,(0,i.useCallback)((function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.PROFILE_MEMORY,context:t?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:clear_confirmation",ai_provider:(0,Pe.V_)(null==n?void 0:n.ai_provider)}),e()}),[e,t,null==n?void 0:n.ai_provider])),c=Ea();return(0,E.jsxs)(i.Fragment,{children:[(0,E.jsx)(xe.zx,{type:"tertiary",size:"xs",onClick:c.openDialog,children:r("profile_settings_clear_memory")}),(0,E.jsx)(Ra,{dialogProps:c.dialogProps,message:r("profile_memory_clear_alert_title"),confirmMessage:r("profile_memory_clear_alert_confirm"),cancelMessage:r("profile_memory_clear_alert_cancel"),onCancel:c.closeDialog,onConfirm:o})]})};const bi=n.p+"assets/3e864b6efea03a4ca582.svg";var yi=n(95422),wi=function(){var e,t,n,r=(0,l.o6)({operaOne:{light:bi,dark:yi}}),a=(e=function(){(0,m.Yo)(x.Fl)},t=(0,l.oH)().isAriaInTabView,n=(0,s.Uwy)().userCapabilities,(0,i.useCallback)((function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.PROFILE_MEMORY,context:t?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:redirect_faq_link",ai_provider:(0,Pe.V_)(null==n?void 0:n.ai_provider)}),e()}),[e,t,null==n?void 0:n.ai_provider]));return(0,E.jsx)("div",{role:"button",onClick:a,onKeyUp:a,className:"cursor-pointer",tabIndex:-1,children:(0,E.jsx)(A.S,{config:r,className:"!block"})})},ji=function(){var e=(0,l.o6)({operaOne:no,operaGx:ro});return(0,E.jsx)(A.S,{className:"!block transition-colors",config:e})},_i=function(e){var t=e.itemDescription,n=e.value,r=e.onDeleteRequested;return(0,E.jsxs)("div",{className:"group flex cursor-pointer flex-row items-center items-center gap-aria-2 px-aria-4 py-aria-3",onClick:r,onKeyUp:r,tabIndex:-1,role:"button",children:[(0,E.jsx)("div",{className:"flex-1",children:(0,E.jsxs)("span",{className:"",children:[t,": ",n]})}),(0,E.jsx)("div",{className:"hidden group-hover:block",children:(0,E.jsx)(ji,{})})]})},Ci=function(){var e=(0,C.$G)().t;return(0,E.jsx)("span",{className:"text-aria-header-s text-text-t1-text-active-icons",children:e("profile_settings_personalization")})},ki=function(e){var t=e.itemRemoveRequest,n=e.setItemRemoveRequest,r=(0,C.$G)().t,a=Ea(),o=(0,s.QIv)().handleRemoveMemoryItem;(0,i.useEffect)((function(){t?a.openDialog():a.closeDialog()}),[t,a]);var c,d,u,f=function(){n(void 0)},p=(c=function(){t&&(f(),o({targetItem:t}))},d=(0,l.oH)().isAriaInTabView,u=(0,s.Uwy)().userCapabilities,(0,i.useCallback)((function(){(0,Pe.vH)({action:X.VV.CLICK,element:X.Y3.PROFILE_MEMORY,context:d?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:"Aria",str_value:"long_term_memory:remove_item_confirmation",ai_provider:(0,Pe.V_)(null==u?void 0:u.ai_provider)}),c()}),[c,d,null==u?void 0:u.ai_provider]));return(0,E.jsx)(Ra,{dialogProps:a.dialogProps,message:r("profile_memory_remove_item_alert_title"),confirmMessage:r("profile_memory_remove_item_alert_confirm"),cancelMessage:r("profile_memory_remove_item_alert_cancel"),onCancel:f,onConfirm:p})};function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ai(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ei=(0,E.jsx)("div",{className:"mx-aria-4 h-px bg-secondary-s1-selected-stroke"}),Ii=function(e){var t,n,r=e.memory,a=(0,i.useState)(void 0),o=(0,H.Z)(a,2),c=o[0],d=o[1],u=(0,s.Ojm)().profileClearMomoryError;return t=u,n=(0,C.$G)().t,(0,l.GV)({trigger:t,errorMessage:n("profile_memory_failed_cleaning")}),(0,E.jsxs)("div",{className:"flex flex-col gap-aria-5",children:[(0,E.jsx)("div",{children:(0,E.jsxs)("div",{className:"overflow-hidden rounded-aria-radius-3 border border-secondary-s1-selected-stroke",children:[(0,E.jsx)("div",{className:"bg-secondary-s1-selected-stroke px-aria-4 py-aria-3",children:(0,E.jsxs)("div",{className:"flex flex-row items-center gap-aria-2",children:[(0,E.jsx)("div",{className:"flex-1",children:(0,E.jsx)(Ci,{})}),(0,E.jsx)("div",{children:(0,E.jsx)(wi,{})})]})}),(0,E.jsx)("div",{className:"py-aria-2",children:(0,E.jsx)(xe.hn,{separator:Ei,children:r.map((function(e){return(0,i.createElement)(_i,Ai(Ai({},e),{},{key:e.id,onDeleteRequested:function(){d(e.id)}}))}))})})]})}),(0,E.jsx)("div",{children:(0,E.jsx)(xi,{})}),(0,E.jsx)(ki,{itemRemoveRequest:c,setItemRemoveRequest:d})]})},Si=function(){var e=(0,s.Ojm)(),t=e.profileLoading,n=e.profileViewModel,r=function(e){var t=e.profileViewModel,n=e.profileLoading,r=n&&!t;return{shouldRenderEmptySection:t&&0===t.memory.length||!n&&!t,shouldRenderLoader:r}}({profileViewModel:n,profileLoading:t}),a=r.shouldRenderEmptySection;return r.shouldRenderLoader?(0,E.jsx)(hi,{}):a?(0,E.jsx)(gi,{}):n?(0,E.jsx)(Ii,{memory:n.memory}):void 0},Ni=function(){var e,t,n=(0,s.Bwc)().handleLoadProfile,r=(0,s.RCK)().isAccountLessUser,a=(0,s.ALE)().profileMemoryEnabled,o=(0,s.Ojm)().profileLoadingError;return e=o,t=(0,C.$G)().t,(0,l.GV)({trigger:e,errorMessage:t("profile_memory_failed_loading")}),(0,i.useEffect)((function(){r||n()}),[r]),(0,E.jsx)("div",{className:"w-full",children:(0,E.jsxs)(xe.oX.Wrapper,{children:[(0,E.jsx)(xe.oX.Section,{children:(0,E.jsx)(mi,{})}),a&&(0,E.jsx)(xe.oX.Section,{children:(0,E.jsx)(Si,{})})]})})};function Ri(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ti(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ri(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ri(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Mi=function e(){var t=(0,g.s0)(),n=(0,C.$G)().t,r=(0,g.TH)().state,a=(0,l.lm)().pushNotification,o=(0,$t.Z)().isAriaInTabView,c=Ea(),d=(0,l.o6)({operaOne:{light:xo,dark:bo}}),f=(0,l.o6)({operaOne:{light:ho,dark:go}}),h=(0,l.o6)({operaOne:{dark:ja,light:_a},operaGx:Ca,operaAir:ja}),b=(0,l.o6)({operaOne:{light:vo,dark:mo}}),y=(0,l.o6)({operaAir:{light:So,dark:So},operaOne:{light:To,dark:Mo},operaGx:{light:No,dark:Ro}}),w=(0,l.o6)({operaAir:{light:yo,dark:yo},operaOne:{light:_o,dark:Co},operaGx:{light:wo,dark:jo}}),j=(0,l.o6)({operaAir:{light:ko,dark:ko},operaOne:{light:Eo,dark:Io},operaGx:{light:Oo,dark:Ao}}),_=(0,s.B9q)().newConversationRequest,k=(0,s.YWL)().isDarkThemeEnabled,O=(0,s.GgQ)().isSiaEnabled,A=(0,s.J0e)().isSourceLinksEnabled,I=(0,s.ljr)().remoteConfig,S=(0,s.J7o)(),N=S.localModelsServiceStatus,R=S.localModels,T=(0,s.Ql$)().appVersion,M=(0,s.pb4)().audience,P=(0,s.fvp)().networkEnvironment,D=(0,s.RCK)().isAccountLessMode,G=(0,s.UMN)().activeConversationId,L=(0,s.Uwy)().userCapabilities,B=(0,s.Qck)(),Z=B.addModelList,F=B.updateModel,U=B.removeLocalModel,V=(0,s.Vgz)().setDarkThemeEnabled,W=(0,s.kgU)().setIsSiaEnabled,z=(0,s.A4D)().setSourceLinksEnabled,Y=(0,s.HhX)().setAccountlessLoginData,q=(0,i.useMemo)((function(){var e=[{icon:d,name:n("general")}];return(null==M?void 0:M.identifier)===v.$p&&I.local_models&&e.push({icon:f,name:n("local_models")}),I.longterm_memory&&e.push({icon:h,name:n("profile_settings_tab")}),e.push({icon:b,name:n("feedback")}),e}),[D,M,I,n,I]),$=(0,i.useState)((function(){var e=(null==r?void 0:r.initialTab)&&q.find((function(e){return e.name===r.initialTab}));return null!=e?e:q[0]})),J=(0,H.Z)($,2),Q=J[0],ee=J[1],te=(0,i.useState)(!1),re=(0,H.Z)(te,2),ae=re[0],oe=re[1],ie=(0,i.useState)(""),se=(0,H.Z)(ie,2),ce=se[0],le=se[1],de=function(e){return function(){e.name===n("feedback")?(0,m.Yo)(x.lo):ee(e)}},ue=(0,i.useCallback)((function(e){(0,Pe.vH)({action:ne.VV.SETTINGS_CHANGED,element:ne.Y3.AI_SETTING,context:o?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:e?"theme_switch:enabled":"theme_switch:disabled",ai_provider:(0,Pe.V_)(null==L?void 0:L.ai_provider)}),V(e)}),[o,V,null==L?void 0:L.ai_provider]),fe=(0,i.useCallback)((function(e){(0,Pe.vH)({action:ne.VV.SETTINGS_CHANGED,element:ne.Y3.AI_SETTING,context:o?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:e?"sia:enabled":"sia:disabled",ai_provider:(0,Pe.V_)(null==L?void 0:L.ai_provider)}),W(e)}),[o,W,null==L?void 0:L.ai_provider]),pe=(0,i.useCallback)((function(e){(0,Pe.vH)({action:ne.VV.SETTINGS_CHANGED,element:ne.Y3.AI_SETTING,context:o?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:e?"source_links:enabled":"source_links:disabled",ai_provider:(0,Pe.V_)(null==L?void 0:L.ai_provider)}),z(e)}),[o,z,null==L?void 0:L.ai_provider]),ve=(0,i.useCallback)(function(){var e=(0,u.Z)(p().mark((function e(t){var r,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=R.find((function(e){return e.name===t})))){e.next=19;break}return o={timestamp:null,status:null,inProgress:null,total:null},F(Ti(Ti({},r),{},{download:o})),e.prev=4,e.next=7,Po.Z.deleteModel(r.id||t);case 7:U(t),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),a(n("loading_wrong"),"error");case 13:return e.prev=13,le(""),c.onOpenChange(!1),e.finish(13);case 17:e.next=20;break;case 19:throw new Error("Could not find the model to delete | modelName: ".concat(t,", model ").concat(r));case 20:case"end":return e.stop()}}),e,null,[[4,10,13,17]])})));return function(t){return e.apply(this,arguments)}}(),[c,R,a,U,n,F]);(0,i.useEffect)((function(){var e=!("selected-content-prompt"===(null==_?void 0:_.message.source));_&&e&&t("/")}),[_,G]),(0,i.useEffect)((function(){oe(!0)}),[ce]);var me=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("RUNNING"!==N){e.next=8;break}return e.t0=Z,e.t1=En,e.next=5,(0,m._f)();case 5:e.t2=e.sent,e.t3=(0,e.t1)(e.t2),(0,e.t0)(e.t3);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){me()}),[N]);var he=(0,l.o6)({generalSectionWrapper:{operaOne:"px-aria-4",operaGx:""},mainWrapper:{operaOne:"opera-one bg-levels-l1-chat-bg-bg-elements",operaGx:"gx px-3 bg-levels-l0-extension-bg"},sectionButton:{operaGx:"rounded-aria-radius-3"},showThemeToggle:{operaOne:!0,operaAir:!1}},["mainWrapper","generalSectionWrapper","sectionButton","showThemeToggle"]),ge=[{description:n("theme_description"),header:n("theme"),icon:y,shouldShow:he.showThemeToggle,testname:"theme",toggleConfig:{checked:!!k,setChecked:ue}},{description:n("sia_setting_description"),header:n("google_suggestions"),icon:w,shouldShow:!0,testname:"sia",toggleConfig:{checked:O,setChecked:fe}},{description:n("source_links_setting_description"),header:n("source_links"),icon:j,shouldShow:!0,testname:"source_links",toggleConfig:{checked:A,setChecked:pe}}].filter((function(e){return e.shouldShow})),be=(0,i.useCallback)((function(){var e=o?X.hG.BROWSER_TAB:X.hG.SIDEBAR;Y({context:e,initTime:Date.now(),source:"settings"}),(0,Pe.vH)({action:ne.VV.CLICK,context:e,element:ne.Y3.ONBOARDING,str_value:"start:log_in:settings",ai_provider:(0,Pe.V_)(null==L?void 0:L.ai_provider)}),(0,Fa.RB)((0,dt.B9)(Ha.FU.EMAIL,P))}),[o,Y,null==L?void 0:L.ai_provider,P]),ye=(0,i.useCallback)((function(){ve(ce),(0,Pe.vH)({action:ne.VV.MODEL_DELETED,element:ne.Y3.AI_SETTING,context:o?X.hG.BROWSER_TAB:X.hG.SIDEBAR,model:null,str_value:(0,m.zn)(ce),ai_provider:(0,Pe.V_)(null==L?void 0:L.ai_provider)}),c.onOpenChange(!1)}),[c,ve,o,ce,null==L?void 0:L.ai_provider]);return(0,E.jsxs)("div",{className:(0,m.AK)("bg-right-gradient relative flex h-full w-full flex-col text-text-t1-text-active-icons",he.mainWrapper),children:[(0,E.jsxs)("div",{children:[(0,E.jsx)(xe.Im,{title:n("settings")}),ae&&""!==ce&&(0,E.jsx)(Ra,{dialogProps:c.dialogProps,message:n("are_you_sure_you_want_to_delete_model",{model:(0,m.zn)(ce)}),confirmMessage:n("delete"),cancelMessage:n("cancel"),onCancel:function(){c.onOpenChange(!1)},onConfirm:ye})]}),(0,E.jsx)("div",{className:"z-1 flex-1",children:(0,E.jsxs)("div",{className:(0,m.AK)("flex h-full flex-col px-aria-3",o&&"z-1 mx-auto max-w-tab-view"),children:[(0,E.jsx)("div",{className:"flex-0",children:(0,E.jsx)("div",{className:"pb-aria-9 pt-aria-4",children:(0,E.jsx)("div",{className:"flex flex-row items-center justify-center gap-aria-5",children:q.map((function(e){var t=Q.name===e.name;return(0,E.jsx)(xe.hU,{className:(0,m.AK)("mx-5 !h-8 !w-8",he.sectionButton,!t&&"border-none"),icon:e.icon,type:t?"secondary":"tertiary",tabIndex:-1,onKeyDown:de(e),onClick:de(e),caption:e.name},e.name)}))})})}),(0,E.jsxs)("div",{className:"flex-1",children:[Q.name===n("general")&&(0,E.jsxs)("div",{children:[(0,E.jsx)(xe.oX.Wrapper,{children:ge.map((function(e){return(0,E.jsx)(xe.oX.Section,{children:(0,E.jsx)(fi,{icon:e.icon,header:e.header,description:e.description,toggleConfig:e.toggleConfig})},e.header)}))}),(0,E.jsxs)("div",{className:"text-body-s mt-aria-6 flex flex-col justify-around gap-2 p-aria-4 text-center text-text-t2-text-secondary opacity-80",children:[(0,E.jsx)("span",{children:D?(0,E.jsx)(C.cC,{i18nKey:n("consent_login_for_free"),components:{link1:(0,E.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:be,onKeyUp:be})}}):(0,E.jsx)(C.cC,{i18nKey:n("menu_to_log_out"),components:{link1:(0,E.jsx)("span",{role:"button",tabIndex:-1,className:"underline",onClick:function(){return(0,xa.Wu)()},onKeyUp:function(){return(0,xa.Wu)()}})}})}),(0,E.jsx)("span",{children:(0,E.jsx)(C.cC,{i18nKey:n("privacy_policy_and_terms_of_service"),components:{link1:(0,E.jsx)(K.h,{className:"cursor-pointer text-inherit underline",to:"https://legal.opera.com/privacy"}),link2:(0,E.jsx)(K.h,{className:"cursor-pointer text-inherit underline",to:"https://legal.opera.com/terms"})}})}),(0,E.jsx)("span",{children:(0,E.jsx)(K.h,{className:"uppercase underline",to:x.Fl,children:n("faq")})}),(0,E.jsxs)("span",{"data-testid":(0,m.wE)(e,"span","aria-version"),children:[(0,E.jsx)(C.cC,{i18nKey:n("aria_version",{appVersion:T})}),!(0,m.BB)()&&(0,E.jsxs)("span",{children:["-",(0,m.a)()]}),!(0,m.BB)()&&"production"!==P&&(0,E.jsxs)("span",{children:["-",P.toUpperCase()]})]})]})]}),Q.name===n("local_models")&&(0,E.jsx)(ui,{setShowDeleteConfirm:c.onOpenChange,setModelNameInPopup:le}),Q.name===n("profile_settings_tab")&&(0,E.jsx)(Ni,{})]})]})})]})},Pi={header:"border-b border-b-secondary-s1-selected-stroke",operaGx:{header:"box-border border-b border-secondary-s1-selected-stroke border-image-1-header"}};const Di=function(e){var t=e.children,n=e.modelSelector,r=e.isBorderLess,a=void 0!==r&&r,o=(0,l.oH)().isAriaInTabView,i=(0,l.o6)(Pi,["header"]).header;return(0,E.jsxs)("div",{className:"relative bg-levels-l1-chat-bg-bg-elements",children:[(0,E.jsx)("div",{className:(0,m.AK)("header relative z-1 flex h-14 select-none items-center gap-11 px-3",i,o?"justify-between":"justify-center",a&&"border-none"),children:t}),!!n&&n]})};function Gi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gi(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Bi=function(e){var t=e.width,n=e.height,r=e.flex,a=e.className,o=void 0===a?"":a,i=Li(Li(Li({},t&&{width:t}),n&&{height:n}),r&&{flex:r,minHeight:n}),s=(0,l.o6)({container:"bg-shimmer",operaGx:{container:"bg-shimmer-gx"}},["container"]).container;return(0,E.jsx)("div",{className:(0,m.AK)("animate-placeHolderShimmer rounded-aria-radius-2 bg-shimmer ",o,s),style:i})};var Zi=function(e){var t=e.isAriaInTabView;return(0,E.jsx)(pa,{isNewChat:!1,disableSidebarClass:!0,children:(0,E.jsxs)("div",{className:"flex h-full flex-col",children:[(0,E.jsx)(Di,{isBorderLess:!0,children:(0,E.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,E.jsx)(Bi,{height:"32px",width:"32px"}),(0,E.jsx)(Bi,{height:"21px",width:"119px"}),(0,E.jsx)(Bi,{height:"32px",width:"32px"})]})}),(0,E.jsx)("div",{className:(0,m.AK)("wrapper relative z-1 flex w-full grow flex-col overflow-x-hidden overflow-y-hidden",t&&"z-1 m-auto max-w-tab-view px-3","h-full pb-3.5"),children:(0,E.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,E.jsx)("div",{className:"text-header-xxl z-1 select-none px-aria-6 pt-aria-7 text-text-t1-text-active-icons",children:(0,E.jsxs)("div",{className:"flex flex-col gap-aria-4",children:[(0,E.jsx)(Bi,{height:"32px",width:"32px",className:"mb-3"}),(0,E.jsx)(Bi,{height:"47px",width:"162px"}),(0,E.jsx)(Bi,{height:"21px",width:"264px"}),(0,E.jsx)(Bi,{height:"21px",width:"264px"})]})}),(0,E.jsxs)("div",{className:"flex flex-col gap-22",children:[(0,E.jsx)("div",{className:"features-carousel flex h-full flex-col",children:(0,E.jsx)("div",{className:"carousel relative flex flex-grow items-center justify-center",children:(0,E.jsxs)("div",{className:"flex w-full items-center justify-center gap-1 px-3",children:[(0,E.jsx)(Bi,{height:"164px",flex:1}),(0,E.jsx)(Bi,{height:"256px",flex:3}),(0,E.jsx)(Bi,{height:"164px",flex:1})]})})}),(0,E.jsxs)("div",{className:"flex gap-1 px-3",children:[(0,E.jsx)(Bi,{height:"48px",width:"100%"}),(0,E.jsx)(Bi,{height:"48px",width:"24px"})]})]})]})})]})})},Hi=function(e){var t=e.children,n=(0,g.s0)(),r=(0,l.eh)().isPrivateMode,a=(0,l.oH)().isAriaInTabView,o=(0,s.YZY)(),c=o.isOperaOne,d=o.isAir,u=(0,s.ljr)().remoteConfig;!function(){var e=(0,ha.$D)().isCurrentBrowserThemeDark,t=(0,gn.L1)().isCurrentThemeDark,n=(0,s.YZY)(),r=n.isGx,a=n.isAir,o=(0,s.Vgz)().setDarkThemeEnabled;(0,i.useEffect)((function(){o(e)}),[r,o,e]),(0,i.useEffect)((function(){null===t?((0,m.Dc)((0,m.$o)(),r,a),o((0,m.$o)())):o(t)}),[o,t,r,a])}();var f=!u;(0,i.useEffect)((function(){r&&n({pathname:"/".concat(x.n5.PRIVATE_MODE)})}),[r]);var p=(0,m.AK)("h-full w-full",c&&"opera-one",a?"tab-view":"sidebar-view",(a&&c||!d)&&"bg-levels-l5-primary");return f?(0,E.jsx)(Zi,{isAriaInTabView:!!a}):(0,E.jsx)("div",{className:p,children:t})},Fi=(n(16611),n(7134)),Ui={attributes:{source:"aria-extension"}};Ui.styleTagTransform=nt(),Ui.setAttributes=Je(),Ui.insert=$e().bind(null,"head"),Ui.domAPI=Ye(),Ui.insertStyleElement=et();We()(Fi.Z,Ui);Fi.Z&&Fi.Z.locals&&Fi.Z.locals;var Ki=function(e){var t=e.checked,n=e.onClick,r=e.icon,a=e.name,o=e.children,i=e.className,s={button:(0,m.AK)("rounded-aria-radius-3 border",t?"border-primary-p1-cobalt-buttons hover:bg-primary-p3-disabled-buttons":"border-secondary-s1-selected-stroke hover:bg-secondary-s4-surface-overlay"),operaAir:{button:(0,m.AK)("rounded-aria-radius-4 bg-p3-disabled-buttons text-text-t1-text-active-icons",t?"bg-primary-p3-disabled-buttons border-transparent hover:border-secondary-s1-selected-stroke":"hover:border-transparent bg-transparent hover:bg-secondary-s4-surface-overlay border-secondary-s1-selected-stroke")}},c=(0,l.o6)(s,["button"]);return(0,E.jsxs)("button",{className:(0,m.AK)("text-header-m flex h-8 flex-shrink-0 items-center justify-center gap-2.5 border border-solid p-2.5 text-center",c.button,i),onClick:n,children:[r&&(0,E.jsx)("span",{className:"flex h-4 items-center text-base",draggable:"false",children:r}),o||(0,E.jsx)("span",{children:a})]})},Vi=function(e){var t=e.index,n=e.task,r=(0,i.useRef)(null),a=(0,s.UMN)().activeConversationId,o=(0,s.cpB)(a).promptStudioConfig,c=(0,s.DFG)(a).promptStudioFormData,d=(0,s.nrG)().setPromptStudioFormData,u=t===c.taskIndex,f=function(){var e,n,r,i,s=null!==(e=null===(n=o[t])||void 0===n?void 0:n.fieldsets)&&void 0!==e?e:{},c=s.tonalities,l=void 0===c?[]:c,u=s.lengths,f=void 0===u?[]:u,p=null!==(r=null===(i=o[t])||void 0===i?void 0:i.defaults)&&void 0!==r?r:{},v=p.tonality,m=void 0===v?"":v,h=p.length,g=void 0===h?"":h,x=l.map((function(e){return e.id})).indexOf(m),b=f.map((function(e){return e.id})).indexOf(g);d({taskIndex:t,toneIndex:x,lengthIndex:b},a)};(0,i.useEffect)((function(){t===c.taskIndex&&f()}),[]);var p={chip:{operaGx:!u&&"border-text-t3-text-gray"},chipText:{operaGx:"text-text-t2-text-secondary"}},v=(0,l.o6)(p,["chip","chipText"]);return(0,E.jsxs)(i.Fragment,{children:[(0,E.jsx)("input",{ref:r,className:"peer hidden",type:"radio",name:"tasks",id:"radio-".concat(n.id),value:n.id,checked:u,onChange:f}),(0,E.jsx)(Ki,{checked:u,onClick:function(e){e.preventDefault(),r.current&&r.current.click()},className:v.chip,children:(0,E.jsx)("span",{className:v.chipText,children:n.name})})]})};const Wi=function e(t){var n=t.title,r=t.children,a=t.className;return(0,E.jsxs)("div",{className:(0,m.AK)("flex flex-col gap-aria-3",a),children:[n&&(0,E.jsx)("span",{"data-testid":(0,m.wE)(e,"span","title"),className:"text-header-s",children:n}),r]})};var zi=function(){var e=(0,C.$G)().t,t=(0,s.UMN)().activeConversationId,n=(0,s.cpB)(t).promptStudioConfig,r=void 0===n?[]:n,a=(0,l.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,E.jsx)(Wi,{title:e("tasks"),children:(0,E.jsx)("div",{className:(0,m.AK)(a.container,"flex flex-wrap gap-aria-3 p-aria-4"),children:(null==r?void 0:r.map)&&r.map((function(e,t){return(0,E.jsx)("div",{children:(0,E.jsx)(Vi,{index:t,task:e})},e.id)}))})})};const Yi=function e(t){var n,r,a=t.isFormInvalid,o=t.isDisabled,i=(0,C.$G)().t,c=(0,s.UMN)().activeConversationId,d=(0,s.cpB)(c).promptStudioConfig,u=(0,s.DFG)(c).promptStudioFormData,f=(0,s.nrG)().setPromptStudioFormData,p=null!==(n=null===(r=d[u.taskIndex])||void 0===r?void 0:r.fieldsets.query)&&void 0!==n?n:{},v=p.id,h=void 0===v?"":v,g=p.max_length,b=void 0===g?x.tX:g,y=p.placeholder,w=void 0===y?i("chat_lead_in"):y,j=(0,l.o6)({descriptionBackground:"bg-levels-l3-cards",operaAir:{descriptionBackground:"bg-secondary-s2-tertiary-need-to-fix"}},["descriptionBackground"]);return(0,E.jsx)(Wi,{title:"".concat(i("description")," (").concat(i("required"),")"),children:(0,E.jsx)("div",{className:(0,m.AK)(),children:(0,E.jsx)(xe.Kx,{testId:(0,m.wE)(e,"textarea","descriptionTextArea"),disabled:o,className:(0,m.AK)("h-28",j.descriptionBackground),invalid:a,name:h,maxLength:b,placeholder:w,onChange:function(e){e.preventDefault();var t=e.target.value;f({description:t},c)},defaultValue:u.description})})})};var qi=function(e){var t,n,r,a=e.style,o=e.idx,c=(0,i.useRef)(null),l=(0,s.UMN)().activeConversationId,d=(0,s.cpB)(l).promptStudioConfig,u=(0,s.DFG)(l).promptStudioFormData,f=(0,s.nrG)().setPromptStudioFormData,p=(null!==(t=null===(n=d[u.taskIndex])||void 0===n?void 0:n.fieldsets)&&void 0!==t?t:{}).tonalities,v=(null!==(r=(void 0===p?[]:p)[u.toneIndex])&&void 0!==r?r:{}).id,m=void 0===v?3735928559:v,h=a.id===m;return(0,E.jsxs)(i.Fragment,{children:[(0,E.jsx)("input",{ref:c,className:"peer hidden",type:"radio",id:"radio-".concat(a.id),name:"style",value:a.id,checked:a.id===m,onChange:function(){return f({toneIndex:o},l)}}),(0,E.jsx)(Ki,{checked:h,onClick:function(e){e.preventDefault(),c.current&&c.current.click()},name:a.name,icon:a.icon})]})},$i=function(){var e,t,n=(0,C.$G)().t,r=(0,s.UMN)().activeConversationId,a=(null!==(e=null===(t=(0,s.cpB)(r).promptStudioConfig[(0,s.DFG)(r).promptStudioFormData.taskIndex])||void 0===t?void 0:t.fieldsets)&&void 0!==e?e:{}).tonalities,o=void 0===a?[]:a,i=(0,l.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,E.jsx)(Wi,{title:n("tonality"),children:(0,E.jsx)("div",{className:(0,m.AK)(i.container,"flex flex-wrap gap-aria-3 p-aria-4"),children:o.map((function(e,t){return(0,E.jsx)("div",{children:(0,E.jsx)(qi,{style:e,idx:t})},e.id)}))})})},Xi=function(e){var t,n,r=e.value,a=e.onChange,o=e.max,i=e.min,s=e.disabled,c=e.inputName,d=(0,l.Su)().loggerService,u=null!=i?i:0,f=function(){return r>o?(d.warn("Illegal slider value - higher than max"),o):r<u?(d.warn("Illegal slider value - lower than min"),u):r},p={headRadius:{operaOne:"rounded-aria-radius-1",operaAir:"rounded-aria-radius-5"},headBorder:{operaOne:s?"border-secondary-s1-selected-stroke":"border-primary-p1-cobalt-buttons"}};return(0,E.jsx)(E.Fragment,{children:(0,E.jsxs)("div",{className:(0,m.AK)("relative my-1 h-1 w-full rounded-aria-radius-2 border-solid"),style:{background:(t=s?"--secondary-s1-selected-stroke":"--primary-p1-cobalt-buttons",n=r/o*100,"linear-gradient(to right, var(".concat(t,") ").concat(n,"%, var(--secondary-s4-surface-overlay) ").concat(n,"%)"))},children:[(0,E.jsx)("div",{className:"relative mx-2 my-2",children:(0,E.jsx)("div",{className:(0,m.AK)("absolute -ml-2 -mt-1.5 h-4 w-4 border-2 border-solid bg-text-tb",(0,l.o6)(p,"headRadius"),(0,l.o6)(p,"headBackground"),(0,l.o6)(p,"headBorder")),style:{left:"".concat(f()/o*100,"%")}})}),(0,E.jsx)("input",{className:"absolute -left-2 -right-2 -top-1.5 z-1 cursor-pointer opacity-0",type:"range",value:f(),name:c,min:i,max:o,onChange:function(e){a(parseInt(e.target.value))}})]})})},Ji=function(){var e,t=(0,C.$G)().t,n=(0,s.UMN)().activeConversationId,r=(0,s.cpB)(n).promptStudioConfig,a=(0,s.DFG)(n).promptStudioFormData,o=(0,s.nrG)().setPromptStudioFormData,i=(null===(e=r[a.taskIndex])||void 0===e?void 0:e.fieldsets.lengths)||[];return(0,E.jsx)(Wi,{title:t("length"),children:(0,E.jsxs)("div",{className:(0,m.AK)((0,l.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},"container"),"p-3"),children:[(0,E.jsx)(Xi,{inputName:"length",value:a.lengthIndex,max:i.length-1,onChange:function(e){return o({lengthIndex:e},n)}}),(0,E.jsx)("div",{className:"mt-aria-5 flex justify-between",children:i.map((function(e,t){return(0,E.jsx)("div",{className:"text-header-m mt-2",children:e.name},t)}))})]})})},Qi=n(26525),es=n.n(Qi),ts=n(33238),ns=function(e){var t=e.message,n=e.onSave,r=(0,C.$G)().t,a=(0,l.oH)().isAriaInTabView,o=(0,s.Uwy)().userCapabilities,c=(0,i.useState)(!1),d=(0,H.Z)(c,2),f=d[0],v=d[1],h=function(){var e=es()((0,jr.Ku)(t));navigator.clipboard.writeText((0,jr.Ku)(e)),jt({context:a?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:"CopyToClipboard",ai_provider:(0,Pe.V_)(null==o?void 0:o.ai_provider)})},g=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:h&&h(),v(!0),setTimeout((function(){v(!1)}),1500);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=(0,l.o6)({container:"bg-levels-l5-primary flex flex-row justify-between p-3",radius:"rounded-aria-radius-3",buttonsType:"tertiary",operaAir:{radius:"rounded-aria-radius-5",buttonsType:"primary"}},["radius","container","buttonsType"]);return(0,E.jsxs)("div",{className:(0,m.AK)(x.container,x.radius),children:[(0,E.jsx)(xe.zx,{type:x.buttonsType,onClick:g,className:"h-8 w-8 !p-0",children:(0,E.jsx)(A.S,{color:"var(--text-t1-text-active-icons)",config:f?dn:ts})}),(0,E.jsx)(xe.zx,{type:x.buttonsType,className:"text-button-m h-8",onClick:n,children:r("save_and_return")})]})};const rs=n.p+"assets/f9936c1e145b5c8c70f6.svg",as=n.p+"assets/0d3198b4dc9e5d627bdc.svg";var os=function(e){var t=e.setShowDeleteConfirm,n=(0,g.s0)(),r=(0,C.$G)().t,a=(0,s.UMN)().activeConversationId,o=(0,s.cpB)(a),i=o.myStyleFormData,c=o.myStylePersonality,d=o.myStyleDeletePersonalityLoading,u=(0,s.DFG)(a).promptStudioFormData,f=(0,l.oH)().isAriaInTabView,p=(0,s.Uwy)().userCapabilities,v=(0,s.nrG)().setPromptStudioFormData,h=(0,l.o6)({container:"rounded-aria-radius-3 bg-levels-l3-cards"},["container"]);return(0,E.jsx)(Wi,{title:r("my_style"),children:(0,E.jsxs)("div",{className:(0,m.AK)("group box-border flex h-14 items-center justify-between gap-2 p-aria-5",h.container),children:[(0,E.jsx)("span",{className:"text-header-m truncate",children:Boolean(c)?i.title?i.title:r("my_style"):r("define_style")}),c?(0,E.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,E.jsxs)("div",{className:"flex items-center justify-between gap-1 opacity-0 transition group-hover:opacity-100",children:[(0,E.jsx)(xe.hU,{type:"secondary",icon:rs,className:"!h-6 !w-6",onClick:function(){jt({context:f?X.hG.BROWSER_TAB:X.hG.SIDEBAR,element:X.Y3.MY_STYLE,ai_provider:(0,Pe.V_)(null==p?void 0:p.ai_provider)}),n("/".concat(x.n5.MAIN,"/").concat(x.n5.PROMPT_STUDIO,"/").concat(x.n5.MY_STYLE))}}),(0,E.jsx)(xe.hU,{type:"secondary",icon:as,className:"!h-6 !w-6",onClick:function(e){e.preventDefault(),t(!0)}})]}),(0,E.jsx)(V,{checked:u.myStyle,setChecked:function(){return v({myStyle:!u.myStyle},a)}})]}):d&&(0,E.jsx)(me.Z,{})||(0,E.jsx)(xe.hU,{border:!0,type:"tertiary",icon:ln,onClick:function(){n("/".concat(x.n5.MAIN,"/").concat(x.n5.PROMPT_STUDIO,"/").concat(x.n5.MY_STYLE))}})]})})};const is=function(e){var t=e.onClick,n=void 0===t?function(){return(0,m.Yo)(x.lo)}:t,r=e.message,a=void 0===r?(0,pn.t)("error_occurred_message"):r,o=e.button,i=void 0===o||o,c=e.buttonText,l=void 0===c?(0,pn.t)("go_to_forum"):c,d=(0,s.YZY)().isGx;return(0,E.jsxs)("div",{className:(0,m.AK)(d?"rounded border-classic-gx-no-80 dark:border-classic-gx-no-32":"rounded-lg border-stroke-components font-be-vietnam","message border-red flex items-start gap-3 border border-solid p-4"),children:[(0,E.jsx)(de.P,{error:!0,sender:X.CI.aria}),(0,E.jsxs)("div",{className:"flex flex-col items-end",children:[(0,E.jsx)("div",{className:"text-sm leading-6",children:a}),i&&(0,E.jsx)("button",{onClick:n,type:"button",className:(0,m.AK)(d?"rounded border-classic-gx-no-80 font-sf-pro dark:border-classic-gx-no-32":"rounded-lg border-stroke-components font-mono uppercase transition hover:bg-surface-on-hover-op-60","mt-4 cursor-pointer select-none border border-solid bg-transparent px-3 py-2 text-center text-xs font-bold text-text-t1-text-active-icons outline-none"),children:l})]})]})};var ss=n(88238),cs=n(47772);const ls=function(){var e=(0,s.fvp)().networkEnvironment,t=(0,s.RCK)().isAccountLessUser,n=(0,C.$G)().t,r=t&&(0,cs.dp)(),a=function(){return(0,m.Yo)(x.lo)},o=(0,i.useCallback)((function(){return(0,Fa.RB)((0,dt.B9)(Ha.FU.EMAIL,e))}),[e]),c=(0,i.useMemo)((function(){return{requestLimitReached:{message:n("chat_daily_limit_reached"),buttonText:n(r?"log_in":"go_to_forum"),onClick:r?o:a},default:{message:n("error_occurred_message"),buttonText:n("go_to_forum"),onClick:a}}}),[r,o,n]),l=(0,i.useCallback)((function(){return c[arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default"]}),[c]);return{getErrorMessage:l}};function ds(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function us(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ds(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ds(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fs=function(){var e=(0,C.$G)().t,t=(0,ss.YZ)(),n=(0,l.oH)().isAriaInTabView,r=ls().getErrorMessage,a=(0,g.TH)(),o=(0,g.s0)(),c=(0,l.Su)().loggerService,d=Ea(),f=Ea(),v=(0,i.useState)(!1),h=(0,H.Z)(v,2),b=h[0],y=h[1],w=(0,i.useState)(),j=(0,H.Z)(w,2),_=j[0],k=j[1],O=(0,i.useState)(null),A=(0,H.Z)(O,2),I=A[0],S=A[1],N=(0,i.useState)(!1),R=(0,H.Z)(N,2),T=R[0],M=R[1],P=(0,i.useState)(!1),D=(0,H.Z)(P,2),G=D[0],L=D[1],B=(0,s.UMN)(),Z=B.activeConversationId,F=B.activeConversationData,U=(0,s.nHi)(),K=U.endpointPromptStudio,V=U.endpointPromptStudioSave,W=(0,s.cpB)(Z),z=W.promptStudioConfig,Y=W.promptStudioConfigLoading,q=W.promptStudioOutput,$=W.myStyleStyles,J=W.myStylePersonality,Q=(0,s.DFG)(Z).promptStudioFormData,ee=(0,s.B9q)().newConversationRequest,ne=(0,s.Uwy)().userCapabilities,ae=(0,s.nrG)(),oe=ae.setPromptStudioFormData,ie=ae.clearPromptStudioFormDataPartial,se=ae.clearMyStyleFormDataFull,ce=ae.setPromptStudioOutput,le=ae.handleDeleteMyStylePersonality,de=ae.handleLoadMyStylePersonality,ue=(0,s.bWQ)().handleActiveConversationChanged,fe=(0,s.Jin)(),pe=fe.handleAddConversation,ve=fe.handleUpdateConversation,he=function(){var e=(0,u.Z)(p().mark((function e(t){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),M(!0),e.abrupt("return",(0,m.Ur)(K,{method:"POST",mode:"cors",credentials:"include",body:t}).then((function(e){k(e)})).catch((function(e){try{var t=JSON.parse(e.message).detail;429===e.status&&"user_limit"===t&&L(!0)}catch(t){c.error("Error parsing failed"),S(e)}finally{G||S(e)}})).finally((function(){M(!1)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=function(e){var t=e.prompt_params,n=e.query,r=t.task,a=function(e){var t=null!==e?"on":"off",n=Object.values(e||[]).join("").length,r=new Map;return r.set("MyStyle",t),r.set("Length",n),_t(r)}(J),o=new Map;return o.set("Generate",null),o.set("Task",r),o.set("Description",n.length),o.set("Tone",t.tonality),o.set(a,null),_t(o)},be=function(){var e=(0,u.Z)(p().mark((function e(){var t,r,a,i,s,l;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(null),t=q.parent,r=t.conversation_id,a=t.message,i=t.message_id,s=t.title,l=t.user_location,e.t0=m.Ur,e.t1=V,e.t2=us,e.t3={conversation_id:r},e.next=8,(0,Sr.Fg)();case 8:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6={method:"POST",mode:"cors",credentials:"include",body:e.t5},e.abrupt("return",(0,e.t0)(e.t1,e.t6,"needsAuth","noParse").then(function(){var e=(0,u.Z)(p().mark((function e(t){var c,d,u,f;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:204===t.status&&(c=Z===x.$M?(0,m.nu)():Z,d=l.country_code,u={countryCode:d,sender:0,id:(0,m.F0)(),message:Q.description},f={countryCode:d,sender:1,id:(0,m.F0)(),message:a,server_id:i},F.server_id?ve({conversationId:Z,updateData:{data:[].concat((0,te.Z)(F.data),[u,f])}}):pe({id:c,server_id:r,label:null!=s?s:Q.description.slice(0,x.wN),isLabelGenerated:!0,data:[u,f],lastMessageTime:String(new Date),source:"sidebar"}),jt({context:n?X.hG.BROWSER_TAB:X.hG.SIDEBAR,str_value:"SaveResponse",ai_provider:(0,Pe.V_)(null==ne?void 0:ne.ai_provider)}),ue(c,n?"tab-view":"sidebar"),ie(Z),ce(null),o(-1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){try{var t=JSON.parse(e.message).detail;429===e.status&&"user_limit"===t&&L(!0)}catch(t){c.error("Error parsing failed"),S(e)}finally{G||S(e)}})));case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){(b||Q.description)&&y(!Boolean(Q.description.trim()))}),[Q.description,b]),(0,i.useEffect)((function(){var e;de();var t=null===(e=a.state)||void 0===e?void 0:e.message;return t&&oe({description:t},Z),function(){c.info("PromptStudio component has been unmounted"),ie(Z)}}),[]),(0,i.useEffect)((function(){_&&ce({message:_.message,parent:_,conversationId:Z})}),[_]);var ye=function(){var e=(0,u.Z)(p().mark((function e(t){var r,a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),y(!1),Q.description){e.next=5;break}return y(!0),e.abrupt("return");case 5:if(null!=q&&q.message&&ce(null),r=z[Q.taskIndex],a=r.fieldsets,o={query:Q.description.trim(),prompt_params:{task:r.id,length:a.lengths[Q.lengthIndex].id,tonality:a.tonalities[Q.toneIndex].id,my_style_version:Boolean(J)&&Q.myStyle?1:null}},Z===x.$M||!F.server_id){e.next=19;break}return e.t0=Object,e.t1=o,e.t2=us,e.t3={conversation_id:F.server_id},e.next=16,(0,Sr.Fg)();case 16:e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t0.assign.call(e.t0,e.t1,e.t5);case 19:he(o),jt({context:n?X.hG.BROWSER_TAB:X.hG.SIDEBAR,ai_provider:(0,Pe.V_)(null==ne?void 0:ne.ai_provider),str_value:ge(o)});case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),we=function(){return q?d.onOpenChange(!0):o(-1)},je=(0,gn.W6)(we);(0,i.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,H.Z)(r[n],1)[0],o="local"===t,i="conversationId"===a&&e[a].newValue!==e[a].oldValue;o&&i&&je()}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[]),(0,i.useEffect)((function(){!t&&ee&&je()}),[ee]);var _e=(0,i.useMemo)((function(){return r(G?"requestLimitReached":"default")}),[r,G]),Ce=(0,l.o6)({outputHeaderInside:!1,outputBackground:"bg-secondary-s4-surface-overlay",operaAir:{outputHeaderInside:!0,outputBackground:"bg-levels-l4-message-bg"}},["outputHeaderInside","outputBackground"]);return Y?(0,E.jsx)("div",{className:"grid h-screen place-items-center",children:(0,E.jsx)("div",{className:"loader"})}):(0,E.jsxs)("div",{className:(0,m.AK)("prompt-studio max-w-screen flex h-screen flex-col overflow-y-auto overflow-x-hidden bg-compose-bg text-text-t1-text-active-icons",n&&"tab-view"),children:[(0,E.jsx)(xe.Im,{onBackButtonClick:we,title:e("compose")}),(0,E.jsx)(Ra,{dialogProps:d.dialogProps,message:e("popup_exit_confirm"),confirmMessage:e("exit"),cancelMessage:e("cancel"),onCancel:function(){return d.onOpenChange(!1)},onConfirm:function(){ie(Z),ce(null),o("/"),d.onOpenChange(!1)}}),(0,E.jsx)(Ra,{dialogProps:f.dialogProps,message:e("popup_delete_style_confirm"),confirmMessage:e("delete"),cancelMessage:e("cancel"),onCancel:function(){return f.onOpenChange(!1)},onConfirm:function(){le(),se(),f.onOpenChange(!1)}}),(0,E.jsxs)("div",{className:(0,m.AK)("mx-aria-4 mb-aria-4 mt-aria-6 flex h-full flex-row gap-1 overflow-hidden",n&&"z-1 mx-auto w-tab-view"),children:[(0,E.jsxs)("div",{className:"hover-scrollbar box-border h-full max-h-[calc(100vh-56px)] w-6/12 overflow-y-auto overflow-x-hidden pr-1",children:[(0,E.jsxs)("form",{className:"flex flex-col gap-aria-5",children:[(0,E.jsx)(zi,{}),(0,E.jsx)(Yi,{isFormInvalid:b,isDisabled:G}),(0,E.jsx)($i,{}),(0,E.jsx)(Ji,{}),$&&Boolean($.length)&&(0,E.jsx)(os,{setShowDeleteConfirm:f.onOpenChange})]}),(0,E.jsx)("div",{className:(0,m.AK)("sticky bottom-0 z-1 pt-4"),children:(0,E.jsx)(xe.zx,{type:"primary",onClick:function(e){return ye(e)},size:"m",className:"mt-1 w-full",disabled:T||G||b,children:T?(0,E.jsx)(me.Z,{}):e("generate")})})]}),(0,E.jsx)("div",{className:(0,m.AK)("h-auto w-6/12"),children:(0,E.jsx)("div",{className:(0,m.AK)("flex h-full flex-col"),children:(0,E.jsx)(Wi,{title:Ce.outputHeaderInside?"":e("output"),className:"flex-grow",children:(0,E.jsxs)("div",{className:(0,m.AK)("text-body-m relative flex h-full flex-col rounded-aria-radius-3 px-1 pb-3 pt-2",Ce.outputBackground),children:[Ce.outputHeaderInside&&(0,E.jsx)("div",{className:"text-header-s mb-2 ml-2 mr-1 mt-1 text-text-t3-text-gray",children:e("output")}),(0,E.jsxs)("div",{className:"flex-grow",children:[Boolean(I)&&(0,E.jsx)("div",{className:"ml-2 mr-1 mt-1",children:(0,E.jsx)(is,{message:_e.message,buttonText:_e.buttonText,onClick:_e.onClick,button:!!_e.buttonText})}),q?!I&&(0,E.jsx)("div",{className:"relative h-full w-full",children:(0,E.jsxs)("div",{className:(0,m.AK)("prompt-studio-output hover-scrollbar absolute h-full w-full","overflow-y-scroll pl-2 pr-1 pt-1"),children:[q&&(0,E.jsx)(re.$,{message:q.message}),(0,E.jsx)("div",{className:"h-20 w-full"})]})}):!I&&(0,E.jsx)("div",{className:"ml-2 mr-1 mt-1 text-text-t3-text-gray",children:e("waiting_for_the_description")})]}),q&&!I&&(0,E.jsx)("div",{className:"absolute bottom-3 left-3 right-3",children:(0,E.jsx)(ns,{message:q.parent.message,onSave:function(){return be()}})})]})})})})]})]})};const ps=function e(t){var n=t.closeMyStyle,r=t.setIsMyStyleFormDataChanged,a=(0,C.$G)().t,o=(0,s.nrG)().setMyStyleFormData,c=(0,s.UMN)().activeConversationId,d=(0,s.cpB)(c),u=d.myStyleFormData,f=d.myStylePersonality,p=(0,i.useState)(!1),v=(0,H.Z)(p,2),h=v[0],g=v[1],x=(0,i.useState)(Boolean(f)&&u.title||a("my_style")),b=(0,H.Z)(x,2),y=b[0],w=b[1],j=(0,i.useRef)(null),_=function(e,t){e.preventDefault();var n=e.target.value;switch(t){case"global":o({title:y||a("my_style")});break;case"local":w(n||a("my_style"))}},k=(0,l.o6)({editMode:"",borderColor:"border-secondary-s1-selected-stroke",operaOne:{bgHeader:"bg-levels-l1-chat-bg-bg-elements",btnText:"font-normal"},operaGx:{borderColor:"border-image-1-header",editMode:"px-3"},operaAir:{borderColor:"border-transparent"}},["editMode","borderColor","bgHeader","btnText"]);return(0,E.jsxs)("div",{className:(0,m.AK)(k.bgHeader,"relative box-border flex h-14 w-full items-center justify-between border-b p-3",k.borderColor),children:[(0,E.jsx)(xe.xE,{onClick:n,textStyle:k.btnText}),h?(0,E.jsxs)("div",{className:(0,m.AK)("flex w-full flex-row gap-2",k.editMode,"max-w-xs"),children:[(0,E.jsx)(xe.oi,{className:"flex-grow",ref:j,maxLength:20,placeholder:a("my_style"),defaultValue:y,onChange:function(e){_(e,"local"),r(!0)},onKeyUp:function(e){"Enter"===e.key&&!1===e.shiftKey&&(_(e,"global"),g(!1))}}),(0,E.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,E.jsx)(S.hU,{dataTestId:(0,m.wE)(e,"span","decline"),type:"secondary",tabIndex:0,icon:ve,onClick:function(){w(u.title||a("my_style")),g(!1),r(!1)},onKeyUp:function(e){"Enter"===e.key&&!1===e.shiftKey&&(w(u.title||a("my_style")),g(!1))}}),(0,E.jsx)(S.hU,{dataTestId:(0,m.wE)(e,"span","submit"),type:"primary",tabIndex:0,icon:dn,onClick:function(e){_(e,"global"),g(!1),r(!Boolean(f))},onKeyUp:function(e){"Enter"===e.key&&0==e.shiftKey&&(_(e,"global"),g(!1))}})]})]}):(0,E.jsx)(hn,{textStyle:"text-subheader-m !font-normal",isTooltipEnabled:!0,value:y,isAnimated:!1,onClick:function(){g(!0),setTimeout((function(){return j.current.focus()}))}}),(0,E.jsx)("div",{className:"h-4 w-12"})]})};const vs=function e(t){var n=t.style,r=t.isFormInvalid,a=t.setIsFormInvalid,o=t.setIsMyStyleFormDataChanged,c=n.id,l=n.label,d=n.placeholder,u=n.value,f=(0,s.nrG)().setMyStyleFormData,p=(0,s.UMN)().activeConversationId,v=(0,s.cpB)(p).myStyleFormData,h=(0,i.useRef)(null),g=(0,i.useRef)(null);return(0,E.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,E.jsx)("div",{className:(0,m.AK)("text-header-s","block"),children:l}),(0,E.jsx)("div",{ref:h,"data-testid":(0,m.wE)(e,"div","sectionContainer"),children:(0,E.jsx)(xe.Kx,{className:(0,m.AK)("h-32"),name:c,id:c,invalid:r,ref:g,testId:(0,m.wE)(e,"textarea","section".concat((0,m.aD)(c))),maxLength:1e3,placeholder:d,defaultValue:u,onInput:function(e){e.preventDefault(),a(!1);var t=e.target.value;o(v[c]!==t),f((0,w.Z)({},c,t))}})})]},c)};var ms=function(e){var t=e.className,n=(0,C.$G)().t,r=(0,g.s0)(),a=(0,s.nrG)().clearMyStyleFormDataPartial,o=(0,l.o6)({buttonTertiary:{operaGx:"h-8",operaAir:"!bg-secondary-s2-tertiary-need-to-fix"},buttonPrimary:{operaGx:"h-8"}},["buttonTertiary","buttonPrimary"]);return(0,E.jsxs)("div",{className:(0,m.AK)("align-center flex w-full flex-row justify-end gap-2",t),children:[(0,E.jsx)(xe.zx,{className:(0,m.AK)("text-button-s",o.buttonTertiary),type:"tertiary",onClick:function(e){e.preventDefault(),a(),r(-1)},children:n("discard")}),(0,E.jsx)(xe.zx,{className:(0,m.AK)("text-button-s",o.buttonPrimary),type:"primary",children:n("save")})]})};const hs=n.p+"assets/9f4cc0a8a23fb9dd2781.svg",gs=n.p+"assets/2179f0be6a7943d619de.svg",xs=n.p+"assets/9322ca2d4aa264e4a765.svg";var bs=function(e){var t=e.position,n=(0,s.YZY)().isGx;return(0,E.jsxs)(E.Fragment,{children:[t===wt.LEFT&&(0,E.jsx)("div",{className:"fixed ".concat(t," inset-y-1/4"),children:n?(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"237",height:"436",viewBox:"0 0 237 436",fill:"none",children:[(0,E.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63238)",children:(0,E.jsx)("path",{d:"M-49.4573 103.795C-28.5027 103.602 -6.87301 127.821 34.2122 163.727C75.297 199.201 135.837 245.93 132.203 280.707C128.352 315.268 60.3281 337.875 11.9293 330.477C-36.2531 323.295 -64.5943 285.89 -83.201 260.378C-101.808 234.866 -110.248 221.247 -113.506 205.474C-116.548 189.484 -113.975 171.772 -102.333 150.182C-90.9073 128.808 -70.412 103.987 -49.4573 103.795Z",fill:"var(--opera-gx-accent-color)"})}),(0,E.jsx)("defs",{children:(0,E.jsxs)("filter",{id:"filter0_f_3303_63238",x:"-218.399",y:"0.0774078",width:"454.478",height:"435.525",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63238"})]})})]}):(0,E.jsx)("img",{src:hs,alt:"",draggable:"false"})}),t===wt.BOTTOM_RIGHT&&(0,E.jsx)("div",{className:"fixed ".concat(t),children:n?(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"185",height:"247",viewBox:"0 0 185 247",fill:"none",children:[(0,E.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63237)",children:(0,E.jsx)("path",{d:"M125.785 364.561C110.831 349.88 112.663 317.46 109 263.019C105.033 208.883 95.2676 133.033 122.428 111.011C149.589 89.2961 213.675 121.41 242.667 160.865C271.658 200.014 265.25 246.503 260.367 277.699C255.484 308.896 251.822 324.494 242.972 337.952C233.817 351.409 219.474 362.114 195.975 369.148C172.782 376.183 140.739 379.241 125.785 364.561Z",fill:"var(--opera-gx-accent-color)"})}),(0,E.jsx)("defs",{children:(0,E.jsxs)("filter",{id:"filter0_f_3303_63237",x:"0.280533",y:"0.280533",width:"368.037",height:"478.447",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63237"})]})})]}):(0,E.jsx)("img",{src:xs,alt:"",draggable:"false"})}),t===wt.TOP_RIGHT&&(0,E.jsx)("div",{className:"fixed ".concat(t),children:n?(0,E.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"216",height:"212",viewBox:"0 0 216 212",fill:"none",children:[(0,E.jsx)("g",{opacity:"0.4",filter:"url(#filter0_f_3303_63236)",children:(0,E.jsx)("path",{d:"M221.797 73.8339C228.01 87.3414 217.169 105.035 202.053 107.875C187.022 110.666 167.669 98.5185 155.107 90.4874C142.497 82.3713 136.642 78.5059 133.276 73.6565C129.911 68.8071 129.033 62.9737 122.39 54.0164C115.881 45.0949 103.641 32.9155 103.978 23.8905C104.23 14.9146 117.143 9.04417 129.512 6.54474C141.965 3.99629 153.875 4.81885 160.409 11.2351C166.98 17.5174 168.14 29.5272 180.288 40.1748C192.484 50.9072 215.619 60.1925 221.797 73.8339Z",fill:"var(--opera-gx-accent-color)"})}),(0,E.jsx)("defs",{children:(0,E.jsxs)("filter",{id:"filter0_f_3303_63236",x:"0.253189",y:"-98.5163",width:"327.048",height:"310.517",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[(0,E.jsx)("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),(0,E.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),(0,E.jsx)("feGaussianBlur",{stdDeviation:"51.8597",result:"effect1_foregroundBlur_3303_63236"})]})})]}):(0,E.jsx)("img",{src:gs,alt:"",draggable:"false"})})]})},ys=function(){return(0,E.jsx)("div",{className:"grid h-screen place-items-center",children:(0,E.jsx)(me.Z,{sizeClass:"h-20 w-20",spinnerColoring:"gray-accent"})})};function ws(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ws(Object(n),!0).forEach((function(t){(0,w.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ws(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _s=function(e){return e.map((function(e){return js(js({},e),{},{value:e.value||""})}))};function Cs(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ks(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ks(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw o}}}}function ks(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Os=function(){var e=(0,l.oH)().isAriaInTabView,t=(0,ss.YZ)(),n=(0,g.s0)(),r=(0,C.$G)().t,a=Ea(),o=(0,s.YZY)().isOperaOne,c=(0,s.nHi)().endpointMyStyle,d=(0,s.UMN)().activeConversationId,f=(0,s.cpB)(d),v=f.myStyleFormData,h=f.myStyleStyles,b=f.promptStudioConfigLoading,y=f.myStylePersonality,w=(0,s.B9q)().newConversationRequest,j=(0,s.Uwy)().userCapabilities,_=(0,s.nrG)(),k=_.setPromptStudioFormData,O=_.clearMyStyleFormDataPartial,A=(0,i.useState)(h?_s(h):[]),I=(0,H.Z)(A,2),S=I[0],N=I[1],R=(0,i.useState)(!1),T=(0,H.Z)(R,2),M=T[0],P=T[1],D=(0,i.useState)(!1),G=(0,H.Z)(D,2),L=G[0],B=G[1],Z=(0,i.useState)(!1),F=(0,H.Z)(Z,2),U=F[0],K=F[1],V=(0,i.useState)(!1),W=(0,H.Z)(V,2),z=W[0],Y=W[1];(0,i.useEffect)((function(){a.onOpenChange(L||U)}),[a,L,U]);var q=(0,Yo.Z)((function(){return n(-1)}),250*x.KP),$=(0,Yo.Z)((function(){return n("/")}),250*x.KP);(0,i.useEffect)((function(){setTimeout((function(){N((function(e){var t,n=_s(e),r=Cs(n);try{for(r.s();!(t=r.n()).done;){var a=t.value,o=v[a.id]||(null==y?void 0:y[a.id]);o&&(a.value=o)}}catch(e){r.e(e)}finally{r.f()}return n}))}),0)}),[v,y]),(0,i.useEffect)((function(){return window.onbeforeunload=function(){O()},function(){window.onbeforeunload=null}}),[]);var J=function(){var t=new Map;t.set("Save",null),S.forEach((function(e,n){e.value.length&&t.set("q".concat(n+1),e.value.length)})),jt({context:e?X.hG.BROWSER_TAB:X.hG.SIDEBAR,element:X.Y3.MY_STYLE,str_value:_t(t),ai_provider:(0,Pe.V_)(null==j?void 0:j.ai_provider)})},Q=function(){var e=(0,u.Z)(p().mark((function e(t){var n,r,a,o;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!S.every((function(e){return!e.value}))){e.next=4;break}return P(!0),e.abrupt("return");case 4:n={},r=Cs(S);try{for(r.s();!(a=r.n()).done;)o=a.value,n[o.id]=o.value}catch(e){r.e(e)}finally{r.f()}return e.prev=7,e.next=10,(0,m.Ur)(c,{method:"PUT",credentials:"include",mode:"cors",body:n});case 10:J(),k({myStyle:!0},d),e.next=17;break;case 14:throw e.prev=14,e.t0=e.catch(7),e.t0;case 17:q();case 18:case"end":return e.stop()}}),e,null,[[7,14]])})));return function(t){return e.apply(this,arguments)}}(),ee=(0,gn.W6)((function(){return z?K(!0):$()}));(0,i.useEffect)((function(){var e=function(e,t){for(var n=0,r=Object.entries(e);n<r.length;n++){var a=(0,H.Z)(r[n],1)[0],o="local"===t,i="conversationId"===a&&e[a].newValue!==e[a].oldValue;o&&i&&ee()}};return chrome.storage.onChanged.addListener(e),function(){chrome.storage.onChanged.removeListener(e)}}),[]),(0,i.useEffect)((function(){!t&&w&&ee()}),[w]);var te=(0,i.useCallback)((function(){O(),L&&q(),U&&$(),a.onOpenChange(!1)}),[O,L,q,U,$,a]),ne=(0,i.useCallback)((function(){B(!1),K(!1),a.onOpenChange(!1)}),[]);return!S||b?(0,E.jsx)(ys,{}):(0,E.jsxs)("div",{className:(0,m.AK)("relative box-border flex h-full w-full justify-center overflow-y-auto bg-compose-bg pb-7 text-text-t1-text-active-icons",e&&"tab-view"),children:[o&&(0,E.jsxs)(E.Fragment,{children:[(0,E.jsx)(bs,{position:wt.LEFT}),(0,E.jsx)(bs,{position:wt.BOTTOM_RIGHT}),(0,E.jsx)(bs,{position:wt.TOP_RIGHT})]}),S&&(0,E.jsxs)("div",{className:"relative z-1 flex w-full flex-col items-center gap-8",children:[(0,E.jsx)(ps,{closeMyStyle:function(){return z?B(!0):q()},setIsMyStyleFormDataChanged:Y}),(0,E.jsx)(Ra,{dialogProps:a.dialogProps,message:r("popup_exit_confirm"),confirmMessage:r("exit"),cancelMessage:r("cancel"),onCancel:ne,onConfirm:te}),(0,E.jsxs)("form",{className:"gap-8",onSubmit:Q,children:[(0,E.jsxs)("div",{className:"flex max-w-md flex-col gap-6",children:[(0,E.jsx)("span",{className:(0,m.AK)("text-header-s","text-text-t3-text-gray"),title:r("train_aria_to_write_in_your_own_style"),children:r("train_aria_to_write_in_your_own_style")}),S.map((function(e){return(0,E.jsx)(vs,{style:e,isFormInvalid:M,setIsFormInvalid:P,setIsMyStyleFormDataChanged:Y},e.id)}))]}),(0,E.jsx)(ms,{className:"mt-8"})]})]})]})};var As=function(){return(0,E.jsxs)(g.Z5,{children:[(0,E.jsx)(g.AW,{path:"/",Component:fs}),(0,E.jsx)(g.AW,{path:"/".concat(x.n5.MY_STYLE),Component:Os})]})},Es=function(){var e=(0,s.UMN)().activeConversationId;return ee({activeConversationId:e}),(0,E.jsx)("div",{className:"h-full w-full",children:(0,E.jsxs)(Hi,{children:[(0,E.jsx)(S.P_,{}),(0,E.jsxs)(g.Z5,{children:[(0,E.jsx)(g.AW,{path:"/",Component:po}),(0,E.jsx)(g.AW,{path:"/".concat(x.n5.SETTINGS),Component:Mi}),(0,E.jsx)(g.AW,{path:"/".concat(x.n5.PROMPT_STUDIO,"/*"),Component:As}),(0,E.jsx)(g.AW,{path:"/".concat(x.Yk.CONVERSATION_TD),Component:po})]})]})})},Is=function(){var e=(0,l.oH)().isAriaInTabView,t=(0,s.nHi)().endpointLocalModels,n=(0,s.RCK)(),r=n.authStatus,a=n.authUserDetails,o=(0,s.MII)(),d=o.isLocalModelsEnabled,f=o.isLocalModelsEnabledSetByUser,b=(0,s.J7o)().fetchedModels,y=(0,s.pb4)().audience,w=(0,s.nrG)().handleLoadPromptStudioConfig,j=(0,s.lUI)().clearReusableHighlights,C=(0,s.HhX)(),k=C.handleAuthFlowRequested,O=C.authStateChanged,A=(0,s.Qck)().setModel,I=(0,s.C7C)().setLocalModels,S=(0,s.Qck)().setFetchedModels,N=(0,s.Pt2)().handleAriaPinned,R=(0,s.kcZ)().handleAppRegistered,T=(0,s.bWQ)().handleActiveConversationChanged;(0,l.T5)(e?"tab-view":"sidebar"),G(),(0,l.G0)();var P=function(){var e=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.xM)().then((function(e){e&&!b.length&&(0,u.Z)(p().mark((function e(){var n;return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.Ur)(t,{method:"GET"});case 2:n=e.sent,S(n);case 4:case"end":return e.stop()}}),e)})))()})).catch((function(e){I(e),A("Aria")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){k({openAuthWhenUnauthorized:!1,forceAuthorization:!0}),w(),!d&&!f&&"localModelsPrivate"in opr&&(null==y?void 0:y.identifier)===v.$p&&(I(!0),P()),d&&P()}),[]),(0,i.useEffect)((function(){"notLoggedIn"!==r||a||j()}),[a,r]),(0,i.useEffect)((function(){function t(){return(t=(0,u.Z)(p().mark((function e(){return p().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=N,e.next=3,(0,c.zT)();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function n(e){e.source==window&&e.data&&"FROM_SELENIUM"===e.data.type&&new _({authStateChanged:O}).handle(e)}return function(){t.apply(this,arguments)}(),R({isAriaInTabView:e,predefinedConversationId:location.href.split("#/")[2]}),window.addEventListener("message",n,!1),function(){window.removeEventListener("message",n)}}),[]),(0,i.useEffect)((function(){e?(document.body.classList.add("tab-view"),document.body.classList.remove("sidepanel-view")):(document.body.classList.remove("tab-view"),document.body.classList.add("sidepanel-view"))}),[e]);return(0,l.Xp)(x.gi.WELCOME_PAGE_START_NEW_CHAT,(function(){T(x.$M,"tab-view"),window.location.hash="/".concat(x.n5.MAIN)})),(0,E.jsxs)(h.UT,{children:[!(0,m.BB)()&&(0,E.jsx)($,{}),(0,E.jsxs)(g.Z5,{children:[(0,E.jsx)(g.AW,{path:"/".concat(x.n5.MAIN,"/*"),Component:Es,errorElement:Z}),(0,E.jsx)(g.AW,{path:"/".concat(x.n5.PRIVATE_MODE),Component:M,errorElement:Z}),(0,E.jsx)(g.AW,{path:"/",element:(0,E.jsx)(g.Fg,{to:"/".concat(x.n5.MAIN)}),errorElement:Z}),(0,E.jsx)(g.AW,{path:"*",Component:B})]})]})};(0,n(77031).j)("chat");var Ss=document.getElementById("root");document.body.parentNode&&Ss&&(0,a.s)(Ss).render((0,E.jsx)(o.f,{children:(0,E.jsx)(d,{children:(0,E.jsx)(Is,{})})}))},18540:(e,t,n)=>{var r;n.d(t,{$M:()=>s,Ch:()=>c,Fr:()=>u,J9:()=>l,JU:()=>p,SG:()=>o,U8:()=>a,V5:()=>v,VW:()=>i,ht:()=>f,sO:()=>d});var a="chrome-extension://igpdmclhhlcpoindmhkhillbfhdgoegm",o="Aria",i="AriaVoiceData",s="_new",c=["organize_tabs","rich_response","longterm_memory"],l=["longterm_memory"],d=["longterm_memory","organize_tabs"],u=["longterm_memory"],f={"command-line":["rich_response","longterm_memory"],"selected-content-prompt":["rich_response","longterm_memory"]},p=1e3,v=new RegExp(/mac/).test(null===(r=window.navigator)||void 0===r?void 0:r.platform.toLowerCase())},68209:(e,t,n)=>{n.d(t,{$:()=>a,D:()=>r});var r={TEXT:"text",IMAGE_GENERATION:"image"},a={ANTHROPIC:"anthropic",GOOGLE:"google",OPENAI:"openai",AI_CLUSTER:"ai_cluster"}},57717:(e,t,n)=>{n.d(t,{B7:()=>r,CX:()=>o,Dv:()=>i,Fz:()=>s,dl:()=>a});var r=200,a=8,o=8,i=["message-temporary"],s=720},55989:(e,t,n)=>{n.d(t,{p:()=>r});var r="aria_image"},50198:(e,t,n)=>{n.d(t,{$M:()=>r.$M,$Y:()=>g.$Y,B7:()=>l.B7,CX:()=>l.CX,Ch:()=>r.Ch,Cr:()=>y.Cr,DH:()=>g.DH,Dl:()=>g.Dl,Dv:()=>l.Dv,E$:()=>u.E$,Eg:()=>u.Eg,FU:()=>a.FU,Fb:()=>u.Fb,Fk:()=>p.Fk,Fl:()=>x.F,Fr:()=>r.Fr,Fz:()=>l.Fz,Gc:()=>p.Gc,Go:()=>y.Go,J9:()=>r.J9,JH:()=>y.JH,JU:()=>r.JU,K7:()=>a.K7,KP:()=>h.KP,Lz:()=>p.Lz,MP:()=>i.M,Qc:()=>y.Qc,Qx:()=>i.Q,SG:()=>r.SG,U8:()=>r.U8,Ud:()=>u.Ud,V4:()=>y.V4,V5:()=>r.V5,V6:()=>u.V6,VW:()=>r.VW,XT:()=>g.XT,Y9:()=>p.Y9,YE:()=>g.YE,YF:()=>y.YF,YO:()=>g.YO,Yk:()=>j.Y,Z$:()=>b.Z$,ZT:()=>v.JH,Zv:()=>w.Z,_U:()=>v._U,_e:()=>g._e,a8:()=>m.a8,aK:()=>o.a,b$:()=>c.b,bC:()=>p.bC,bX:()=>g.bX,bb:()=>y.bb,dl:()=>l.dl,eF:()=>m.eF,f3:()=>y.f3,gi:()=>f.gi,gp:()=>g.gp,ht:()=>r.ht,jE:()=>b.jE,jn:()=>y.jn,jv:()=>m.jv,kr:()=>h.kr,lV:()=>g.lV,lo:()=>x.l,mh:()=>p.mh,n5:()=>j.n,or:()=>o.o,pj:()=>d.p,qB:()=>b.qB,s0:()=>u.s0,sO:()=>r.sO,sh:()=>h.sh,t5:()=>s.t,tX:()=>u.tX,tZ:()=>y.tZ,uj:()=>g.Uo,un:()=>g.un,v5:()=>y.v5,vH:()=>y.vH,vR:()=>g.vR,wN:()=>u.wN,x4:()=>h.x4,yo:()=>y.yo});var r=n(18540),a=n(13771),o=n(53533),i=n(97358),s=n(27715),c=n(57214),l=(n(50143),n(57717)),d=n(55989),u=n(31622),f=n(14473),p=n(29033),v=n(17125),m=(n(65517),n(96995)),h=(n(83065),n(56336)),g=n(53706),x=n(5407),b=n(90102),y=n(91904),w=n(55550),j=n(92878)},31622:(e,t,n)=>{n.d(t,{E$:()=>u,Eg:()=>d,Fb:()=>o,Ud:()=>c,V6:()=>s,s0:()=>l,tX:()=>a,wN:()=>i});var r=n(56336),a=6e3,o=1,i=64,s=a-300,c=(r.EB,30),l=48*r.kr,d=1024,u=128},53706:(e,t,n)=>{n.d(t,{$Y:()=>f,DH:()=>a,Dl:()=>m,Uo:()=>u,XT:()=>d,YE:()=>s,YO:()=>c,_e:()=>v,bX:()=>o,gp:()=>l,lV:()=>h,un:()=>i,vR:()=>p});var r=n(56336),a=r.sh,o=48,i=50,s=6*r.sh,c=-12,l=64,d=250,u=40,f=200,p="Command+/",v="Ctrl+/",m=56,h=46},5407:(e,t,n)=>{n.d(t,{F:()=>r,l:()=>a});var r="https://help.opera.com/en/browser-ai-faq",a="https://forums.opera.com/category/61/opera-browser-ai"},91904:(e,t,n)=>{n.d(t,{Cr:()=>h,Go:()=>l,JH:()=>u,Qc:()=>i,V4:()=>p,YF:()=>v,bb:()=>g,f3:()=>s,jn:()=>d,tZ:()=>f,v5:()=>c,vH:()=>m,yo:()=>o});var r=n(89062),a=n(92612),o=3,i=4,s=(a.U5,60),c=["jpg","jpeg","png"],l=["mp3"],d=["mp4","mpeg"],u=["pdf"],f=["xlsx","xls","ods","csv"],p=["txt","odt","doc","docx"],v=["json"],m=[].concat(f,u,v,p,d),h=([].concat((0,r.Z)(m),c),function(e){return e.map((function(e){return".".concat(e)})).join(",")}),g=(h(c),h([].concat(c,l,(0,r.Z)(m))),{CANCELLED:"cancelled",ERROR_COMPRESSION:"error_compression",ERROR_CONVERSION:"error_conversion",ERROR_MIME_DOES_NOT_MATCH:"error_mime_does_not_match",ERROR_NOT_SUPPORTED:"error_not_supported",ERROR_PROCESSING:"error_processing",ERROR_TOO_LONG:"error_too_long",FINISHED:"finished",IN_PROGRESS:"in_progress",OK:"ok"})},63185:(e,t,n)=>{n.d(t,{L:()=>r});var r=(0,n(67294).createContext)(null)},68279:(e,t,n)=>{n.d(t,{$9:()=>l.$,Cg:()=>i.C,FL:()=>d.F,G0:()=>s.G,GC:()=>x.G,GV:()=>c.G,Gt:()=>_.G,H9:()=>f.H,HK:()=>r.HK,Su:()=>g.S,T4:()=>b.T,T5:()=>a.T,XI:()=>u.X,Xp:()=>m.X,a:()=>_.a,eh:()=>v.e,fg:()=>o.f,iP:()=>w.i,lm:()=>p.l,o6:()=>y.o,oH:()=>r.oH,rf:()=>j.r,u:()=>h.u});n(38824);var r=n(32961),a=n(66330),o=n(42965),i=n(17059),s=n(7066),c=n(45670),l=n(77173),d=n(83470),u=n(21044),f=n(35604),p=n(2065),v=(n(66354),n(5355)),m=n(59830),h=n(91906),g=n(82503),x=n(49759),b=n(53576),y=(n(34928),n(7332)),w=n(32888),j=n(48469),_=n(25370)},38071:(e,t,n)=>{n.d(t,{o:()=>o});var r=n(67294),a=n(38185),o=function(){var e=(0,r.useContext)(a.Y2);if(!e)throw new Error("useTabInfo is used outside of context of value is undefined inside Provider");return e}},17059:(e,t,n)=>{n.d(t,{C:()=>a});var r=n(23586),a=function(){var e=(0,r.RCK)(),t=e.consentAccepted,n=e.isAccountLessMode;return{consentNeeded:!t&&n||!n&&!t}}},96531:(e,t,n)=>{n.d(t,{KH:()=>N,OP:()=>_,Pn:()=>A,b:()=>M,di:()=>T,fD:()=>O,gk:()=>I,h7:()=>k,k9:()=>C,l0:()=>R,q$:()=>S,sS:()=>E,zj:()=>j});var r=n(4942),a=n(93324),o=n(15861),i=n(64687),s=n.n(i),c=n(28721),l=n(92612),d=n(57406),u=n(38856),f=n(50198),p=n(53159),v=n(7226),m=n(25108),h="http://localhost/",g="base64-image/",x="FilesInGoogleStorage",b=new d.mQ({env:(0,u.a)(),name:"File Upload utils"}),y=function(){var e=(0,o.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open("ImageCache");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,o.Z)(s().mark((function e(t,n){var r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return r=e.sent,a=new Request(h+g+t,{}),o=new Response(n,{headers:{"Content-Type":"text/plain"}}),e.next=7,r.put(a,o);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return n=e.sent,r=new Request(h+g+t),e.next=6,n.match(r);case 6:if(!(a=e.sent)){e.next=13;break}return e.next=10,a.text();case 10:return e.abrupt("return",e.sent);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,o.Z)(s().mark((function e(t){var n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&0!==t.length){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.prev=2,e.next=5,Promise.all(t.map(function(){var e=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j(t.image_id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent,e.abrupt("return",n.filter((function(e){return Boolean(e)})).map((function(e){return null==e?void 0:e.split("base64,")[1]})));case 9:return e.prev=9,e.t0=e.catch(2),m.error("Error fetching images from CacheStorage:",e.t0),e.abrupt("return",void 0);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y();case 2:return n=e.sent,r=new Request(h+g+t),e.next=6,n.delete(r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,caches.open(f.VW);case 2:return n=e.sent,e.next=5,n.keys();case 5:if(r=e.sent,a="messageId="+t,!(o=r.find((function(e){return e.url.includes(a)})))){e.next=11;break}return e.next=11,n.delete(o);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(){t(r.result)},r.onerror=function(e){return n(e)},r.readAsDataURL(e)}))},A=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O(t);case 3:return n=e.sent,r=(0,c.Z)(),e.next=7,w(r,n);case 7:return e.abrupt("return",{image_id:r,file:t});case 10:throw e.prev=10,e.t0=e.catch(0),m.error("Error during save image to CacheStorage",e.t0),e.t0;case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),E=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(l.vW));return parseFloat((e/Math.pow(l.vW,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},I=function(e,t){var n;if(!e.startsWith("data:")&&!e.startsWith("http"))return b.error("Invalid data URL"),null;var o=e.split(","),i=(0,a.Z)(o,2),s=i[0],c=i[1],l=s.match(/:(.*?);/);if(!l)return b.error("Unable to extract MIME type"),null;for(var d=l[1],u=atob(c),p=new Uint8Array(u.length),v=0;v<u.length;v++)p[v]=u.charCodeAt(v);var m=null!==(n=function(e){var t;if(!e.startsWith("data:"))return b.error("Invalid data URL"),null;var n=e.split(","),o=(0,a.Z)(n,1)[0].match(/:(.*?);/);if(!o)return b.error("Unable to extract MIME type"),null;var i=o[1],s=(t={},(0,r.Z)(t,"image/png",".png"),(0,r.Z)(t,"image/jpeg",".jpeg"),(0,r.Z)(t,"image/jpg",".jpg"),(0,r.Z)(t,"image/gif",".gif"),(0,r.Z)(t,"image/webp",".webp"),t);if(!(i in s))return b.error("Unsupported MIME type:",i),null;var c=(new Date).getTime();return"".concat(f.pj,"_").concat(c).concat(s[i])}(e))&&void 0!==n?n:"";return new File([p],t||m,{type:d})},S=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.startsWith("http")){e.next=3;break}return b.error("Invalid data src URL"),e.abrupt("return",null);case 3:return e.next=5,fetch(t);case 5:if((n=e.sent).ok){e.next=8;break}throw new Error("Failed to fetch image");case 8:return e.next=10,n.blob();case 10:return r=e.sent,a=(new Date).getTime(),o=r.type.split("/")[1],i="".concat(f.pj,"_").concat(a,".").concat(o),e.abrupt("return",new File([r],i,{type:r.type}));case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(e){var t;return f.v5.includes(d.nS.getFileExtension(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""))},R=function(e){var t;return!f.v5.includes(d.nS.getFileExtension(null!==(t=null==e?void 0:e.name)&&void 0!==t?t:""))},T=function(){var e=(0,o.Z)(s().mark((function e(t){var n,r,a,o,i,c;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Request((0,u.Lh)(t)),e.next=3,(0,p.mM)();case 3:return(r=e.sent)&&n.headers.set("X-Aria-Encryption-Key",r),e.next=7,(0,u.pb)(x,n);case 7:if(!(a=e.sent)){e.next=19;break}return e.next=11,a.formData();case 11:return o=e.sent,i=o.get("fileSize"),c=o.get("fileId"),e.next=16,(0,v.l9)();case 16:if(e.sent.byteLength!==Number.parseInt(i)||!c){e.next=19;break}return e.abrupt("return",[c]);case 19:return e.abrupt("return",[]);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),M=function(){var e=(0,o.Z)(s().mark((function e(t,n){var r,o,i,c,l,d,f,m;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=(0,u.Lh)(n))){e.next=18;break}return o=new Request(r),i=(0,a.Z)(t,1),c=i[0],e.next=6,(0,v.l9)();case 6:return l=e.sent,(d=new FormData).append("fileId",c),d.append("fileSize",l.byteLength.toString()),(f=new Response(d,{status:200})).headers.set("Vary","X-Aria-Encryption-Key"),e.next=14,(0,p.mM)();case 14:return(m=e.sent)&&o.headers.set("X-Aria-Encryption-Key",m),e.next=18,(0,u.Cg)(x,o,f);case 18:return e.abrupt("return",Promise.resolve(t));case 19:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},5355:(e,t,n)=>{n.d(t,{e:()=>s});var r=n(93324),a=n(67294),o=n(68279),i=n(15699);function s(){var e=(0,a.useState)(!1),t=(0,r.Z)(e,2),n=t[0],s=t[1],c=(0,o.a)().currentWindowId,l=function(e){var t=e.id,n=e.incognito;s(c===t&&n)},d=function(e){(0,i.ed)(e,l)};return(0,a.useEffect)((function(){return(0,i.ex)(d),(0,i.ZY)(l),function(){(0,i.gH)(d)}}),[]),{isPrivateMode:n}}},48469:(e,t,n)=>{n.d(t,{r:()=>r.r});var r=n(57727)},57727:(e,t,n)=>{n.d(t,{r:()=>a});var r=n(67294),a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=(0,r.useRef)(!0),o=(0,r.useRef)(n);return(0,r.useEffect)((function(){o.current=n}),[n]),(0,r.useEffect)((function(){if(!a.current)return e();a.current=!1}),t),function(){return o.current}}},32461:(e,t,n)=>{n.d(t,{FL:()=>s.F,FQ:()=>o.F,Q:()=>c.Q,fv:()=>r.f,lj:()=>i.l,nH:()=>a.n});var r=n(89758),a=n(38860),o=n(12887),i=n(65688),s=n(5206),c=n(87921)},65688:(e,t,n)=>{n.d(t,{l:()=>o});var r=n(45477),a=n(58606),o=function(){return{remoteConfig:(0,r.ix)(a.I1),remoteConfigLoading:(0,r.ix)(a.IH),remoteConfigOverride:(0,r.ix)(a.lE),unsupportedFeatures:(0,r.ix)(a.KH)}}},59565:(e,t,n)=>{n.d(t,{FL:()=>a.FL,FQ:()=>a.FQ,I1:()=>o.I1,Ir:()=>o.Ir,Q:()=>a.Q,cq:()=>r.cq,fv:()=>a.fv,gZ:()=>o.gZ,lj:()=>a.lj,nH:()=>a.nH});n(76808);var r=n(97909),a=n(32461),o=n(58606)},52452:(e,t,n)=>{n.d(t,{A4:()=>o.A4,AL:()=>o.AL,C7:()=>o.C7,FL:()=>a.FL,FQ:()=>a.FQ,I1:()=>a.I1,Ir:()=>a.Ir,J0:()=>o.J0,MI:()=>o.MI,ND:()=>i.ND,Pt:()=>i.Pt,Q:()=>a.Q,Ql:()=>r.Ql,Vg:()=>o.Vg,Vv:()=>r.Vv,YW:()=>o.YW,YZ:()=>r.YZ,_g:()=>r._g,cq:()=>a.cq,ek:()=>i.ek,fv:()=>a.fv,gZ:()=>a.gZ,hN:()=>r.hN,j$:()=>s.j$,jR:()=>o.jR,kX:()=>i.kX,kc:()=>i.kc,lj:()=>a.lj,nH:()=>a.nH,oi:()=>i.oi,pb:()=>r.pb,qe:()=>r.qe,w8:()=>s.w8});var r=n(23269),a=n(59565),o=n(68988),i=n(26808),s=n(13108)},75334:(e,t,n)=>{n.d(t,{Hk:()=>i,Qk:()=>s,S6:()=>a,bC:()=>c,ln:()=>o});var r=n(91757),a=(0,r.createAction)("ARIA_OPENED")(),o=(0,r.createAction)("ARIA_PINNED")(),i=(0,r.createAction)("UPGRADE_BANNER_SEEN_IN_SIDEBAR")(),s=(0,r.createAction)("UPGRADE_BANNER_SEEN_ONCE")(),c=(0,r.createAction)("APP_REGISTERED")()},45293:(e,t,n)=>{n.d(t,{ND:()=>a.N,Pt:()=>r.P,ek:()=>o.e,kX:()=>c.k,kc:()=>s.k,oi:()=>i.o});var r=n(99563),a=n(26237),o=n(45147),i=n(8685),s=n(1271),c=n(25224)},8685:(e,t,n)=>{n.d(t,{o:()=>i});var r=n(45477),a=n(67294),o=n(75334),i=function(){var e=(0,r.TL)();return{handleUpgradeBannerSeenInSidebar:(0,a.useCallback)((function(t){e((0,o.Hk)(t))}),[e]),handleUpgradeBannerSeenOnce:(0,a.useCallback)((function(){e((0,o.Qk)())}),[e])}}},45147:(e,t,n)=>{n.d(t,{e:()=>o});var r=n(45477),a=n(47696),o=function(){return{upgradeBannerSeenInSidebar:(0,r.ix)(a.jV),upgradeBannerSeenOnce:(0,r.ix)(a.FY)}}},26808:(e,t,n)=>{n.d(t,{ND:()=>r.ND,Pt:()=>r.Pt,ek:()=>r.ek,kX:()=>r.kX,kc:()=>r.kc,oi:()=>r.oi});n(27976);var r=n(45293);n(47696),n(75334)},47696:(e,t,n)=>{n.d(t,{AJ:()=>c,FY:()=>s,VG:()=>a,jN:()=>o,jV:()=>i});var r=(0,n(45477).Bz)("ariaAppInteractions"),a=function(e){return r(e).isAriaMounted},o=function(e){return r(e).isAriaPinned},i=function(e){return r(e).upgradeBannerSeenInSidebar},s=function(e){return r(e).upgradeBannerSeenOnceOnCli},c=function(e){var t=e.windowId;return function(e){return r(e).sidebarTabIdsByWindowId[t]}}},98690:(e,t,n)=>{n.d(t,{Q:()=>o});var r=n(45477),a=n(33638),o=function(){return{appVersion:(0,r.ix)(a.q$)}}},95796:(e,t,n)=>{n.d(t,{_:()=>s});var r=n(45477),a=n(67294),o=n(33638),i=n(30093),s=function(){var e=(0,r.ix)(o.qe),t=(0,r.TL)(),n=(0,a.useCallback)((function(e){t((0,i.V)(e))}),[t]);return{contextType:e,setContextType:n}}},23269:(e,t,n)=>{n.d(t,{Ql:()=>r.Ql,Vv:()=>a.V,YZ:()=>r.YZ,_g:()=>r._g,hN:()=>o.hN,pb:()=>r.pb,qe:()=>o.qe});n(32317);var r=n(52603),a=n(30093),o=n(33638)},33019:(e,t,n)=>{n.d(t,{A4:()=>o.A,AL:()=>l.A,C7:()=>a.C,J0:()=>i.J,MI:()=>r.M,Vg:()=>c.V,YW:()=>s.Y,jR:()=>d.j});var r=n(19920),a=n(24578),o=n(2080),i=n(76437),s=n(74912),c=n(80943),l=n(96475),d=n(27755)},96475:(e,t,n)=>{n.d(t,{A:()=>o});var r=n(45477),a=n(20851),o=function(){return{profileMemoryEnabled:(0,r.ix)(a.Dl)}}},76437:(e,t,n)=>{n.d(t,{J:()=>o});var r=n(45477),a=n(20851),o=function(){return{isSourceLinksEnabled:(0,r.ix)(a.NU)}}},68988:(e,t,n)=>{n.d(t,{A4:()=>r.A4,AL:()=>r.AL,C7:()=>r.C7,J0:()=>r.J0,MI:()=>r.MI,Vg:()=>r.Vg,YW:()=>r.YW,jR:()=>r.jR});n(38063),n(4559);var r=n(33019);n(20851)},20851:(e,t,n)=>{n.d(t,{$R:()=>s,DT:()=>l,Dl:()=>d,J:()=>c,NU:()=>i,UD:()=>o,qS:()=>a});var r=(0,n(45477).Bz)("ariaAppUserSettings"),a=function(e){return r(e).localModelsEnabled},o=function(e){return r(e).localModelsEnabledPending},i=function(e){return r(e).sourceLinksEnabled},s=function(e){return r(e).darkThemeEnabled},c=function(e){return r(e).selectedLocalModel},l=function(e){return r(e).localModelsChangedByUser},d=function(e){return r(e).profileMemoryEnabled}},6882:(e,t,n)=>{n.d(t,{Bw:()=>a.Bw,Dp:()=>r.Dp,Hh:()=>r.Hh,LF:()=>r.LF,Oj:()=>a.Oj,QA:()=>r.QA,QD:()=>r.QD,QI:()=>a.QI,RC:()=>r.RC,U1:()=>r.U1,_4:()=>r._4,cv:()=>r.cv,hr:()=>a.hr,iz:()=>r.iz,mW:()=>a.mW,uo:()=>r.uo,uy:()=>r.uy,wV:()=>a.wV});var r=n(14134),a=n(40455)},65540:(e,t,n)=>{n.d(t,{R:()=>a.R,d:()=>r.d});var r=n(81421),a=n(99715)},81421:(e,t,n)=>{n.d(t,{d:()=>i});var r=n(67294),a=n(50533),o=n(1700),i=function(){var e=(0,a.I0)();return{setAriaVoiceState:(0,r.useCallback)((function(t){e((0,o.d)(t))}),[e]),setIsVoiceMode:(0,r.useCallback)((function(t){e((0,o.G)(t))}),[e])}}},99715:(e,t,n)=>{n.d(t,{R:()=>o});var r=n(45477),a=n(67458),o=function(){return{ariaVoiceState:(0,r.ix)(a.T),isVoiceMode:(0,r.ix)(a.Y)}}},36012:(e,t,n)=>{n.d(t,{R_:()=>r.R,dQ:()=>r.d});n(1700);var r=n(65540);n(49180),n(67458)},64825:(e,t,n)=>{n.d(t,{I:()=>r.I});var r=n(55241)},55241:(e,t,n)=>{n.d(t,{I:()=>o});var r=n(45477),a=n(29016);function o(){var e=(0,r.ix)(a.b);return{fetchedCloudModels:e,checkIfExistInRegistry:function(t){return!!t&&e.some((function(e){return e.name===t}))}}}},19484:(e,t,n)=>{n.d(t,{It:()=>a.I,PJ:()=>o.P,bs:()=>o.b,cW:()=>r.c,uJ:()=>r.u});var r=n(65515),a=n(64825),o=(n(30694),n(29016))},17643:(e,t,n)=>{n.d(t,{a:()=>r.a,c:()=>a.c});var r=n(70026),a=n(96045)},70026:(e,t,n)=>{n.d(t,{a:()=>i});var r=n(45477),a=n(67294),o=n(81920),i=function(){var e=(0,r.TL)();return{setChatContext:(0,a.useCallback)((function(t){e((0,o.G)(t))}),[e]),clearChatContext:(0,a.useCallback)((function(t){e((0,o.O)(t))}),[e])}}},96045:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(45477),a=n(13849),o=function(){return{chatContext:(0,r.ix)(a.Y)}}},83648:(e,t,n)=>{n.d(t,{aG:()=>r.a,co:()=>r.c});n(81920);var r=n(17643);n(47408),n(13849)},22492:(e,t,n)=>{n.d(t,{h:()=>a.h,t:()=>r.t});var r=n(48413),a=n(76966)},48413:(e,t,n)=>{n.d(t,{t:()=>i});var r=n(45477),a=n(67294),o=n(16087),i=function(){var e=(0,r.TL)(),t=(0,a.useCallback)((function(){e((0,o.us)())}),[e]),n=(0,a.useCallback)((function(t){e((0,o.Nk)(t))}),[e]);return{clearFeedbackState:t,handleSaveFeedback:(0,a.useCallback)((function(){e(o.d0.request())}),[e]),setFeedbackData:n}}},76966:(e,t,n)=>{n.d(t,{h:()=>o});var r=n(45477),a=n(15262),o=function(){return{feedbackData:(0,r.ix)(a.uR),saveFeedbackLoading:(0,r.ix)(a.iG),saveFeedbackSuccessful:(0,r.ix)(a.ys)}}},40048:(e,t,n)=>{n.d(t,{d0:()=>r.d0,hs:()=>a.h,tk:()=>a.t,uR:()=>o.uR});var r=n(16087),a=n(22492),o=(n(19776),n(15262))},79577:(e,t,n)=>{n.d(t,{$u:()=>u,A2:()=>c,BB:()=>d,P:()=>a,Rr:()=>s,ZC:()=>l,fX:()=>i,mX:()=>o,oh:()=>f});var r=n(91757),a=(0,r.createAction)("CLEAR_HIGHLIGHTS")(),o=(0,r.createAction)("CLEAR_REUSABLE_HIGHLIGHTS")(),i=(0,r.createAction)("SET_HIGHLIGHT")(),s=(0,r.createAction)("SET_RENDER_HIGHLIGHTS_READY")(),c=(0,r.createAction)("REMOVE_HIGHLIGHT")(),l=(0,r.createAction)("REUSE_HIGHLIGHT")(),d=(0,r.createAction)("REMOVE_REUSABLE_HIGHLIGHT")(),u=(0,r.createAction)("REPHRASE_HIGHLIGHT")(),f=(0,r.createAction)("SET_REPHRASE_MESSAGE_PATCH")()},19755:(e,t,n)=>{n.d(t,{WG:()=>s.W,bC:()=>o.b,kG:()=>i.k,lU:()=>a.l,ok:()=>c.o,uE:()=>r.u});var r=n(60148),a=n(55888),o=n(8583),i=n(16663),s=n(69345),c=n(47771)},83544:(e,t,n)=>{n.d(t,{B9:()=>s.B9,Er:()=>s.Er,GQ:()=>u.GQ,Gg:()=>o.Gg,HW:()=>u.HW,It:()=>f.It,J7:()=>l.J7,Ji:()=>s.Ji,KH:()=>s.KH,KV:()=>u.KV,L6:()=>s.L6,MY:()=>s.MY,My:()=>u.My,Nq:()=>r.dQ,Ob:()=>s.Ob,PJ:()=>f.PJ,Qc:()=>l.Qc,RB:()=>s.RB,R_:()=>r.R_,UM:()=>s.UM,Uw:()=>u.Uw,WG:()=>a.WG,X1:()=>s.X1,Z8:()=>u.Z8,ZV:()=>u.ZV,aG:()=>c.aG,bC:()=>a.bC,bW:()=>s.bW,bs:()=>f.bs,cW:()=>f.cW,co:()=>c.co,d0:()=>d.d0,eJ:()=>s.eJ,eg:()=>i.eg,hs:()=>d.hs,kG:()=>a.kG,kg:()=>o.kg,lU:()=>a.lU,ok:()=>a.ok,pw:()=>u.pw,sd:()=>s.sd,tk:()=>d.tk,uE:()=>a.uE,uJ:()=>f.uJ,uR:()=>d.uR,vr:()=>s.vr,wF:()=>u.wF,xG:()=>s.xG,xI:()=>s.xI});var r=n(36012),a=n(92616),o=n(58391),i=n(91117),s=n(697),c=n(83648),l=n(42638),d=n(40048),u=n(58109),f=n(19484)},44946:(e,t,n)=>{n.d(t,{$G:()=>i,EB:()=>s,Er:()=>m,KH:()=>o,MY:()=>h,Ny:()=>v,Ob:()=>x,SJ:()=>c,V$:()=>a,X1:()=>u,lE:()=>g,sd:()=>p,vr:()=>d,xG:()=>l,xI:()=>f});var r=n(91757),a=(0,r.createAction)("ADD_CONVERSATION")(),o=(0,r.createAction)("START_NEW_CONVERSATION")(),i=(0,r.createAction)("NEW_CONVERSATION_REQUEST_PROCESSED")(),s=(0,r.createAction)("ACTIVE_CONVERSATION_CHANGED")(),c=((0,r.createAction)("CLI_CONVERSATION_CLEARED")(),(0,r.createAsyncAction)("DELETE_CONVERSATION_REQUEST","DELETE_CONVERSATION_SUCCESS","DELETE_CONVERSATION_FAILURE")()),l=((0,r.createAction)("SET_IS_MIGRATED")(),(0,r.createAction)("SET_LAST_ACTIVE_CONVERSATION_ID")()),d=(0,r.createAction)("DELETE_ACTIVE_CONVERSATION_ID")(),u=(0,r.createAction)("UPDATE_CONVERSATION")(),f=(0,r.createAction)("MESSAGE_UPDATED")(),p=(0,r.createAction)("MESSAGE_LAYOUT_UPDATED")(),v=(0,r.createAction)("CONTINUE_IN_CHAT")(),m=(0,r.createAction)("MESSAGE_REMOVED")(),h=(0,r.createAction)("MESSAGE_ADDED")(),g=(0,r.createAction)("CONVERSATION_ABORTED")(),x=(0,r.createAction)("LAST_ACTIVE_CONVERSATION_CLEARED")()},94235:(e,t,n)=>{n.d(t,{B9:()=>i.B,Ji:()=>s.J,L6:()=>o.L,RB:()=>l.R,UM:()=>a.U,bW:()=>r.b,eJ:()=>c.e});var r=n(86688),a=n(11596),o=n(11218),i=n(30519),s=n(7056),c=n(73740),l=n(50903);n(82759)},11596:(e,t,n)=>{n.d(t,{U:()=>l});var r=n(67294),a=n(45477),o=n(6882),i=n(42130),s=n(50198),c={id:s.$M,label:"",data:[],server_id:"",lastMessageTime:"",labelTmp:!0,source:"sidebar",originLink:void 0,isAnimated:void 0,mode:void 0,model:void 0,isLabelGenerated:void 0},l=function(){var e=(0,o.RC)().userId,t=(0,a.kS)(i.Jz),n=(0,a.ix)(i.f3)||"",l=(0,a.ix)((0,i.Ww)(e)),d=(0,r.useMemo)((function(){return null==l?void 0:l.find((function(e){return t?e.id===t:e.id===n}))}),[t,n,l]);return{activeConversationId:l&&l.some((function(e){return e.id===t||e.id===n}))?t||n:s.$M,activeConversationData:null!=d?d:c}}},50903:(e,t,n)=>{n.d(t,{R:()=>s});var r=n(45477),a=n(6882),o=n(42130),i=n(50198),s=function(){var e,t=(0,r.ix)(a.uy),n=(0,r.kS)(o.d$),s=(0,r.ix)((0,o.Ww)(null!==(e=null==t?void 0:t.email)&&void 0!==e?e:"anonymous")),c={id:null!=n?n:i.$M,label:"",data:[],server_id:"",lastMessageTime:"",labelTmp:!0,source:"command-line",isCliChatShouldContinue:!1},l=null==s?void 0:s.find((function(e){return e.id===n}));return{cliActiveConversationId:null!=n?n:i.$M,cliActiveConversationData:null!=l?l:c,ariaMessage:null==l?void 0:l.data.findLast((function(e){return 1===e.sender})),userMessage:null==l?void 0:l.data.findLast((function(e){return 0===e.sender}))}}},30519:(e,t,n)=>{n.d(t,{B:()=>o});var r=n(42130),a=n(45477),o=function(){return{newConversationRequest:(0,a.kS)(r.pP)}}},7056:(e,t,n)=>{n.d(t,{J:()=>v});var r=n(15861),a=n(64687),o=n.n(a),i=n(67294),s=n(45477),c=n(73740),l=n(44946),d=n(96531),u=n(6882),f=n(83648),p=n(68279),v=function(){var e=(0,s.TL)(),t=(0,u.RC)().userId,n=(0,c.e)().conversations,a=(0,f.aG)().clearChatContext,v=(0,p.Su)().ariaVoiceReaderService,m=(0,i.useCallback)(function(){var a=(0,r.Z)(o().mark((function a(i){var s,c,u;return o().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:s=i.conversationId,c=i.serverId,(u=n.find((function(e){return e.id===s})))&&(c||u.data.flatMap((function(e){var t;return null===(t=e.files)||void 0===t?void 0:t.map((function(e){return e.image_id}))})).filter(Boolean).forEach(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,d.k9)(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),c&&u.data.forEach(function(){var e=(0,r.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.server_id)){e.next=4;break}return e.next=4,v.deleteVoiceDataCache(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(l.SJ.request({conversationId:s,serverId:c,userId:t})));case 3:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),[n,e,t,v]),h=(0,i.useCallback)((function(n){e((0,l.V$)({conversation:n,userId:t}))}),[e,t]),g=(0,i.useCallback)((function(n){var r=n.updateData,a=n.conversationId;e((0,l.X1)({updateData:r,userId:t,conversationId:a}))}),[e,t]),x=(0,i.useCallback)((0,r.Z)(o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.forEach(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({conversationId:t.id,serverId:t.server_id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)}))),[n,m]),b=(0,i.useCallback)(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.filter((function(e){return"command-line"===e.source&&!(null!=t&&t.includes(e.id))})).forEach(function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m({conversationId:t.id,serverId:t.server_id});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[n,m]),y=(0,i.useCallback)((function(n){a(!0),e((0,l.lE)({conversationId:n,userId:t}))}),[t,e,a]);return{handleUpdateConversation:g,handleDeleteConversation:m,handleAddConversation:h,handleDeleteAll:x,handleDeleteAllFromCli:b,handleAbortConversation:y}}},73740:(e,t,n)=>{n.d(t,{e:()=>i});var r=n(45477),a=n(42130),o=n(6882),i=function(){var e,t,n=(0,r.ix)(o.uy),i=(0,r.ix)((0,a.Ww)(null!==(e=null==n?void 0:n.email)&&void 0!==e?e:"anonymous"));return{conversations:null!=i?i:[],conversationsWithoutCli:null!==(t=null==i?void 0:i.filter((function(e){return"command-line"!==e.source})))&&void 0!==t?t:[]}}},697:(e,t,n)=>{n.d(t,{B9:()=>r.B9,Er:()=>a.Er,Ji:()=>r.Ji,KH:()=>a.KH,L6:()=>r.L6,MY:()=>a.MY,Ob:()=>a.Ob,RB:()=>r.RB,UM:()=>r.UM,X1:()=>a.X1,bW:()=>r.bW,eJ:()=>r.eJ,sd:()=>a.sd,vr:()=>a.vr,xG:()=>a.xG,xI:()=>a.xI});n(94311);var r=n(94235),a=n(44946)},42130:(e,t,n)=>{n.d(t,{Jz:()=>o,Ww:()=>c,d$:()=>i,f3:()=>s,pP:()=>a});var r=(0,n(45477).Bz)("ariaChatMessaging"),a=function(e){var t=e.windowId,n=e.tabId;return function(e){var a;return null===(a=r(e).newConversationRequest[t])||void 0===a?void 0:a[n]}},o=function(e){var t=e.windowId,n=e.tabId;return function(e){var a;return null===(a=r(e).activeConversationByBrowserEnv[t])||void 0===a?void 0:a[n]}},i=function(e){var t=e.windowId;return function(e){return r(e).cliActiveConversationIdByWindowId[t]}},s=function(e){return r(e).lastActiveConversationId},c=function(e){return function(t){return r(t).conversations[e]}}},35871:(e,t,n)=>{n.d(t,{G:()=>a.G,k:()=>r.k});var r=n(6949),a=n(91178)},91178:(e,t,n)=>{n.d(t,{G:()=>o});var r=n(45477),a=n(47239),o=function(){return{isSiaEnabled:(0,r.ix)(a.q),siaPolicyUpdateImpressionTimestamp:(0,r.ix)(a.b)}}},58391:(e,t,n)=>{n.d(t,{Gg:()=>r.G,kg:()=>r.k});n(52652);var r=n(35871);n(48308),n(47239)},21790:(e,t,n)=>{n.d(t,{M:()=>r.M,p:()=>a.p});var r=n(7357),a=n(99283)},99283:(e,t,n)=>{n.d(t,{p:()=>s});var r=n(50533),a=n(67294),o=n(55980),i=n(6882),s=function(){var e=(0,r.I0)(),t=(0,i.RC)().authUserDetails,n=(0,a.useCallback)((function(t){e((0,o.sP)(t))}),[e]),s=(0,a.useCallback)((function(t){e((0,o.vF)(t))}),[e]),c=(0,a.useCallback)((function(n){var r;e((0,o.cg)({userEmail:null!==(r=null==t?void 0:t.email)&&void 0!==r?r:"",query:n}))}),[null==t?void 0:t.email,e]),l=(0,a.useCallback)((function(t){e((0,o.Iy)(t))}),[e]),d=(0,a.useCallback)((function(t){e((0,o.T2)(t))}),[e]),u=(0,a.useCallback)((function(t){e((0,o.ap)(t))}),[e]),f=(0,a.useCallback)((function(t){e((0,o.fZ)(t))}),[e]),p=(0,a.useCallback)((function(t){e((0,o.$I)(t))}),[e]);return{saveUserQueryInHistory:c,setOrganizeTaskState:(0,a.useCallback)((function(t){e((0,o.i7)(t))}),[e]),setUserQuery:p,setCliVisible:l,setCliHintsVisible:d,savePromptNonLoggedInRequest:(0,a.useCallback)((function(t){e((0,o.Kv)({value:t,timestamp:Date.now()}))}),[e]),resetPromptNonLoggedInRequest:(0,a.useCallback)((function(){e((0,o.Kv)(void 0))}),[e]),setIsOpenedWithTabOrganize:u,setIsOpenedWithKeyboardShortcut:f,addAriaMessageProgressTask:n,removeAriaMessageProgressTask:s}}},7357:(e,t,n)=>{n.d(t,{M:()=>i});var r=n(45477),a=n(53627),o=n(6882),i=function(){var e,t=(0,o.RC)().authUserDetails,n=(0,r.ix)(a.JV),i=(null==n?void 0:n.length)>0,s=(0,r.ix)(a.UJ),c=(0,r.ix)(a.L1),l=(0,r.ix)(a.a4),d=(0,r.ix)(a.kN),u=(0,r.ix)(a.mu),f=(0,r.ix)((0,a.yN)(null!==(e=null==t?void 0:t.email)&&void 0!==e?e:""));return{tabOrganizeTaskState:(0,r.ix)(a.cb),cliVisible:s,hintsVisible:d,userQuery:u,userQueryHistory:f,tabOrganizingInProgress:(0,r.ix)(a.TB),savedPromptNonLoggedInRequest:(0,r.ix)(a.bt),isOpenedWithTabOrganize:c,isOpenWithKeyboardShortcut:l,selectedWritingMode:(0,r.ix)(a.L4),ariaMessageInProgress:i}}},13294:(e,t,n)=>{n.d(t,{Kd:()=>r.Kd,Me:()=>a.M,bt:()=>o.bt,pK:()=>a.p});var r=n(55980),a=n(21790),o=(n(43159),n(53627))},36468:(e,t,n)=>{n.d(t,{A$:()=>a.A$,Kd:()=>r.Kd,LC:()=>a.LC,Me:()=>r.Me,X3:()=>i.X3,Zo:()=>i.Zo,b0:()=>o.b0,bY:()=>o.bY,bt:()=>r.bt,pK:()=>r.pK,pq:()=>a.pq});var r=n(13294),a=n(55936),o=n(76194),i=(n(99145),n(52220),n(59120))},21063:(e,t,n)=>{n.d(t,{X:()=>r.X});var r=n(16240);n(30335)},16240:(e,t,n)=>{n.d(t,{X:()=>i});var r=n(45477),a=n(68528),o=n(39157),i=function(){var e=(0,r.ix)(a.I);return{cliMode:e,mainModeEnabled:e===o.E.main,pageContextEnabled:e===o.E.pageContext,writingModeEnabled:e===o.E.writingMode}}},59120:(e,t,n)=>{n.d(t,{X3:()=>a.X,Zo:()=>r.Zo});var r=n(68881),a=n(21063);n(71681),n(68528)},88948:(e,t,n)=>{n.d(t,{b:()=>r.b,s:()=>a.b});var r=n(98684),a=n(4261)},98684:(e,t,n)=>{n.d(t,{b:()=>s});var r=n(45477),a=n(67294),o=n(24448),i=n(6882),s=function(){var e=(0,i.RC)().authUserDetails,t=(0,r.TL)(),n=(0,a.useCallback)((function(e){t((0,o.MO)(e))}),[t]),s=(0,a.useCallback)((function(e){t((0,o.Vr)(e))}),[t]),c=(0,a.useCallback)((function(e){t((0,o.JV)(e))}),[t]),l=(0,a.useCallback)((function(e){t((0,o.N7)(e))}),[t]),d=(0,a.useCallback)((function(e){t((0,o.eX)(e))}),[t]),u=(0,a.useCallback)((function(e){t((0,o.hR)(e))}),[t]),f=(0,a.useCallback)((function(e){t((0,o.uC)(e))}),[t]);return{setIsFileContext:c,setIsFileContextDisclaimerAcknowledged:d,setIsPageContextDisclaimerAcknowledged:s,setPageContextHintsVisible:n,setPageContextData:u,setPageContextFile:l,setPageContextQueryHistory:(0,a.useCallback)((function(n){var r;t((0,o.TJ)({userEmail:null!==(r=null==e?void 0:e.email)&&void 0!==r?r:"",query:n}))}),[null==e?void 0:e.email,t]),setPageContent:f}}},4261:(e,t,n)=>{n.d(t,{b:()=>i});var r=n(45477),a=n(3046),o=n(6882),i=function(){var e,t=(0,o.RC)().authUserDetails,n=(0,r.ix)(a.CV),i=(0,r.ix)(a.RH),s=(0,r.ix)(a.bx),c=(0,r.ix)(a.Yw),l=(0,r.ix)(a.Qb),d=(0,r.ix)(a.M2),u=c.url,f=c.title,p=c.pageContent;return{isFileContext:n,isFileContextDisclaimerAcknowledged:i,isPageContextDisclaimerAcknowledged:s,pageContextData:c,pageContextFile:l,pageContextHintsVisible:d,pageContextUserQueryHistory:(0,r.ix)((0,a.M6)(null!==(e=null==t?void 0:t.email)&&void 0!==e?e:"")),pageContent:p,pageTitle:f,pageUrl:u}}},76194:(e,t,n)=>{n.d(t,{b0:()=>r.b,bY:()=>r.s});n(24448);var r=n(88948);n(71689),n(3046)},23586:(e,t,n)=>{n.d(t,{A$Z:()=>c.A$,A4D:()=>a.A4,ALE:()=>a.AL,B9q:()=>o.B9,Bwc:()=>r.Bw,C7C:()=>a.C7,DFG:()=>i.DF,Dps:()=>r.Dp,ErU:()=>o.Er,FLN:()=>a.FL,FQG:()=>a.FQ,GQ$:()=>o.GQ,GgQ:()=>o.Gg,HWD:()=>o.HW,HhX:()=>r.Hh,Irh:()=>a.Ir,Itl:()=>o.It,J0e:()=>a.J0,J7o:()=>o.J7,Jin:()=>o.Ji,KHn:()=>o.KH,KVF:()=>o.KV,Kd2:()=>c.Kd,L6l:()=>o.L6,LCB:()=>c.LC,LFT:()=>r.LF,MII:()=>a.MI,MYD:()=>o.MY,Mel:()=>c.Me,Myq:()=>o.My,ND1:()=>a.ND,Obn:()=>o.Ob,Ojm:()=>r.Oj,PJ3:()=>o.PJ,Pt2:()=>a.Pt,QAE:()=>r.QA,QD0:()=>r.QD,QIv:()=>r.QI,QaV:()=>a.Q,Qck:()=>o.Qc,Ql$:()=>a.Ql,RBj:()=>o.RB,RCK:()=>r.RC,R_9:()=>o.R_,STH:()=>i.ST,U1h:()=>r.U1,UMN:()=>o.UM,Uwy:()=>o.Uw,Vgz:()=>a.Vg,VvH:()=>a.Vv,WGj:()=>o.WG,X1$:()=>o.X1,X36:()=>c.X3,YWL:()=>a.YW,YZY:()=>a.YZ,Z8D:()=>o.Z8,ZHL:()=>i.ZH,ZV1:()=>o.ZV,ZoE:()=>c.Zo,_4k:()=>r._4,_gZ:()=>a._g,aGe:()=>o.aG,af2:()=>i.af,b0J:()=>c.b0,bCg:()=>o.bC,bWQ:()=>o.bW,bYW:()=>c.bY,bsc:()=>o.bs,bt_:()=>c.bt,cWx:()=>o.cW,cdt:()=>i.cd,coc:()=>o.co,cpB:()=>i.cp,cqS:()=>a.cq,cvO:()=>r.cv,d0z:()=>o.d0,d3f:()=>i.d3,dQQ:()=>o.Nq,eJg:()=>o.eJ,ek:()=>a.ek,fvp:()=>a.fv,gZQ:()=>a.gZ,hNR:()=>a.hN,hrK:()=>r.hr,hsz:()=>o.hs,izr:()=>r.iz,j$h:()=>a.j$,jRd:()=>a.jR,kGW:()=>o.kG,kcZ:()=>a.kc,kgU:()=>o.kg,lUI:()=>o.lU,ljr:()=>a.lj,mWg:()=>r.mW,nDN:()=>i.nD,nHi:()=>a.nH,nT6:()=>s.nT,nrG:()=>i.nr,oiy:()=>a.oi,okl:()=>o.ok,pKK:()=>c.pK,pb4:()=>a.pb,pq9:()=>c.pq,pws:()=>o.pw,qeR:()=>a.qe,sd4:()=>o.sd,tkH:()=>o.tk,uEF:()=>o.uE,uJR:()=>o.uJ,uR5:()=>o.uR,uoF:()=>r.uo,w8B:()=>a.w8,wFS:()=>o.wF,wV8:()=>r.wV,xIB:()=>o.xI,xnP:()=>s.xn,y07:()=>s.y0,zLZ:()=>s.zL});var r=n(6882),a=n(52452),o=n(83544),i=n(30273),s=n(46357),c=n(36468);n(60772)},31372:(e,t,n)=>{n.d(t,{CI:()=>a.CI,Cm:()=>a.Cm,VV:()=>a.VV,Y3:()=>a.Y3,YS:()=>a.YS,hG:()=>a.hG,kk:()=>r.k});var r=n(82414),a=n(26382)},41807:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"@keyframes inputJump {\n  0% {\n    transform: scale(100%);\n  }\n  50% {\n    transform: scale(96%);\n  }\n  100% {\n    transform: scale(100%);\n  }\n}\n\n@keyframes inputDustOpacityStart {\n  0% {\n    opacity: 0;\n  }\n  100% {\n    opacity: 100%;\n  }\n}\n\n@keyframes inputDustOpacityEnd {\n  0% {\n    opacity: 100%;\n  }\n  100% {\n    opacity: 0;\n  }\n}\n\n@keyframes inputDustScaleUp {\n  0% {\n    transform: scale(1);\n  }\n  100% {\n    transform: scale(1.1);\n  }\n}\n\n@keyframes inputSidebarDustScaleUp {\n  0% {\n    transform: translate(-50%, -50%) scale(0);\n  }\n  100% {\n    transform: translate(-50%, -50%) scale(1);\n  }\n}\n\n@keyframes scale-in {\n  0% {\n    opacity: 0;\n    transform-origin: top left;\n    transform: scale(0);\n  }\n  100% {\n    opacity: 1;\n    transform-origin: top left;\n    transform: scale(1);\n  }\n}\n\n@keyframes appear {\n  from {\n    opacity: 0;\n  }\n  to {\n    opacity: 1;\n  }\n}\n\n@keyframes typing {\n  from {\n    max-width: 0;\n  }\n  to {\n    max-width: 100%;\n  }\n}\n\n@keyframes blink {\n  50% {\n    opacity: 0;\n  }\n}\n\n.input-animation-wrapper.active .input-wrapper {\n  animation: inputJump 0.4s ease-in-out;\n  position: relative;\n  z-index: 2;\n}\n\n.input-animation-wrapper .gradient-wrapper {\n  opacity: 0;\n  position: relative;\n  transform: translateY(-25px);\n  z-index: 1;\n}\n\n.input-animation-wrapper.active .gradient-wrapper {\n  animation: cubic-bezier(0.61, 1, 0.88, 1), cubic-bezier(0.22, 1, 0.36, 1);\n  animation-duration: 0.1s, 1.25s;\n  animation-name: inputDustOpacityStart, inputDustOpacityEnd;\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient {\n  position: absolute;\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(1) {\n  left: var(--input-animation-position-orange-left);\n  top: var(--input-animation-position-orange-top);\n  transform: translateY(var(--input-animation-position-orange-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(2) {\n  left: var(--input-animation-position-pink-left);\n  top: var(--input-animation-position-pink-top);\n  transform: translateY(var(--input-animation-position-pink-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(3) {\n  left: var(--input-animation-position-purple-left);\n  top: var(--input-animation-position-purple-top);\n  transform: translateY(var(--input-animation-position-purple-top)) scale(0);\n}\n\n.input-animation-wrapper .gradient-wrapper .gradient:nth-of-type(4) {\n  left: var(--input-animation-position-green-left);\n  top: var(--input-animation-position-green-top);\n  transform: translateY(var(--input-animation-position-green-top)) scale(0);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(1) {\n  animation-duration: var(--input-animation-duration-orange);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(2) {\n  animation-duration: var(--input-animation-duration-pink);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(3) {\n  animation-duration: var(--input-animation-duration-purple);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient:nth-of-type(4) {\n  animation-duration: var(--input-animation-duration-green);\n}\n\n.input-animation-wrapper.active .gradient-wrapper .gradient {\n  animation: cubic-bezier(0.22, 1, 0.36, 1);\n  animation-name: inputSidebarDustScaleUp;\n}\n",""]);const s=i},29403:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,".SoGJRn3mWHqzjIkElDNO::-moz-selection {\n  cursor: pointer;\n  color: var(--opera-chatbot-message-highlight-color);\n  background-color: var(--opera-chatbot-message-highlight-bg);\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) 0;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 0;\n}\n\n.SoGJRn3mWHqzjIkElDNO,\n.SoGJRn3mWHqzjIkElDNO::selection {\n  cursor: pointer;\n  color: var(--opera-chatbot-message-highlight-color);\n  background-color: var(--opera-chatbot-message-highlight-bg);\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) 0;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 0;\n}\n\n.V9JCZCXVouXlgmVd36dA {\n  margin: calc(-1 * var(--opera-chatbot-message-highlight-bg-padding-y)) -4px;\n  padding: var(--opera-chatbot-message-highlight-bg-padding-y) 4px;\n}\n\n.SoGJRn3mWHqzjIkElDNO._tpqmaR6UqvrbPkEZC2b {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-1);\n}\n\n.SoGJRn3mWHqzjIkElDNO.po4tXK2v_MrBqBs9b5TV {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-2);\n}\n\n.SoGJRn3mWHqzjIkElDNO.DiqR_MGM63AscFTkv9OB {\n  background-color: var(--opera-chatbot-message-highlight-bg-custom-3);\n}\n\n@keyframes hE4aZy8Cmm1yuDbmDjg7 {\n  0% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  }\n  50% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-end);\n  }\n  100% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  }\n}\n\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF::-moz-selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  animation: hE4aZy8Cmm1yuDbmDjg7 1s infinite;\n}\n\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF,\n.SoGJRn3mWHqzjIkElDNO.wBZlFP6W8EbH02KmqHzF::selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-init-background-color-start);\n  animation: hE4aZy8Cmm1yuDbmDjg7 1s infinite;\n}\n\n@keyframes nSzK7pZkWNSIX3JTVjxj {\n  0% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  }\n  100% {\n    background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-end);\n  }\n}\n\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk::-moz-selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  animation: nSzK7pZkWNSIX3JTVjxj 1s forwards;\n}\n\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk,\n.SoGJRn3mWHqzjIkElDNO.dZnLVyMbu529eUNWUoOk::selection {\n  cursor: default;\n  background-color: var(--opera-chatbot-message-highlight-rephrase-done-background-color-start);\n  animation: nSzK7pZkWNSIX3JTVjxj 1s forwards;\n}\n",""]),i.locals={highlighter:"SoGJRn3mWHqzjIkElDNO",highlighterLinkified:"V9JCZCXVouXlgmVd36dA",custom1:"_tpqmaR6UqvrbPkEZC2b",custom2:"po4tXK2v_MrBqBs9b5TV",custom3:"DiqR_MGM63AscFTkv9OB",rephraseStart:"wBZlFP6W8EbH02KmqHzF",blinkingBackground:"hE4aZy8Cmm1yuDbmDjg7",rephraseEnd:"dZnLVyMbu529eUNWUoOk",fadeOutBackground:"nSzK7pZkWNSIX3JTVjxj"};const s=i},7134:(e,t,n)=>{n.d(t,{Z:()=>s});var r=n(8081),a=n.n(r),o=n(23645),i=n.n(o)()(a());i.push([e.id,"/**\n * TODO: Please do unification of markdown styles and variables like below with\n * chatbot styles in separate change \n */\n.prompt-studio-output .markdown table a {\n  background-color: var(--opera-chatbot-table-link-bg);\n}\n.prompt-studio-output .markdown .table-wrapper {\n  margin: 24px 0;\n  overflow-x: auto;\n  overflow-y: hidden;\n  padding-block-end: 4px;\n}\n.prompt-studio-output .markdown .table-wrapper::-webkit-scrollbar {\n  height: 6px;\n}\n.prompt-studio-output .markdown table {\n  border-radius: 16px;\n  background: transparent;\n  border-collapse: separate;\n  border-spacing: 1px;\n  width: 100%;\n  overflow: hidden;\n  overflow-wrap: break-word;\n}\n.prompt-studio-output .markdown table th {\n  font-weight: 700;\n  font-size: 14px;\n  line-height: 20px;\n}\n.prompt-studio-output .markdown table td,\n.prompt-studio-output .markdown table th {\n  padding: 8px;\n  background-color: var(--opera-chatbot-table-bg);\n}\n",""]);const s=i},19712:(e,t,n)=>{e.exports=n.p+"assets/bf22617d82663a39e6bd.svg"},7013:(e,t,n)=>{e.exports=n.p+"assets/f7ae31216a963f43e353.svg"},50389:(e,t,n)=>{e.exports=n.p+"assets/b8d3291aa808495f859c.svg"},54322:(e,t,n)=>{e.exports=n.p+"assets/ef6305629d5882c80c26.svg"},92471:(e,t,n)=>{e.exports=n.p+"assets/11a50eefba84644ab701.svg"}},a={};function o(e){var t=a[e];if(void 0!==t)return t.exports;var n=a[e]={id:e,loaded:!1,exports:{}};return r[e].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,e=[],o.O=(t,n,r,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,r,a]=e[d],s=!0,c=0;c<n.length;c++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](n[c])))?n.splice(c--,1):(s=!1,a<i&&(i=a));if(s){e.splice(d--,1);var l=r();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,r,a]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,o.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var a=Object.create(null);o.r(a);var i={};t=t||[null,n({}),n([]),n(n)];for(var s=2&r&&e;"object"==typeof s&&!~t.indexOf(s);s=n(s))Object.getOwnPropertyNames(s).forEach((t=>i[t]=()=>e[t]));return i.default=()=>e,o.d(a,i),a},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.hmd=e=>((e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),o.j=85,o.p="",(()=>{o.b=document.baseURI||self.location.href;var e={85:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,[i,s,c]=n,l=0;if(i.some((t=>0!==e[t]))){for(r in s)o.o(s,r)&&(o.m[r]=s[r]);if(c)var d=c(o)}for(t&&t(n);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},n=self.webpackChunkaria_extension=self.webpackChunkaria_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=o.O(void 0,[216,592],(()=>o(15669)));i=o.O(i)})();