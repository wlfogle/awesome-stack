"use strict";!function(){var e=window,n=e.location,a=document,o="undefined"!=typeof chrome&&chrome||{},O='.ðŸ’™-egbwa #gb div:has(>div>#gbwa)+div>div{background:transparent!important;box-shadow:none!important}.ðŸ’™-dgbwa #gbwa a{-webkit-filter:brightness(1.1);filter:brightness(1.1)}.ðŸ’™-ugbwa #gbwa>div:after{content:"âœµ";position:absolute;top:0;right:0;bottom:0;left:0;width:12px;height:12px;margin:auto;border:2px solid #fff;border-radius:7px;background:#ec574c;color:#fff;font-size:.6875rem;text-align:center;-webkit-transform:translate(8px,8px);transform:translate(8px,8px)}.ðŸ’™-cgbwa #gb[style*="(32,33,36"] #gbwa:before{content:none}.ðŸ’™-cgbwa #gbwa a{background-image:url(\'data:image/svg+xml,%3Csvg viewBox="0 0 16 16" height="16" width="16" xmlns="http://www.w3.org/2000/svg"%3E%3Cpath d="M2 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm12 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM8 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" fill="%23EA4335"/%3E%3Cpath d="M14 12c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zM8 6c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm6 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" fill="%234285F4"/%3E%3Cpath d="M8 12c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm-6 0c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2z" fill="%2334A853"/%3E%3Cpath d="M2 10c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2z" fill="%23FBBC05"/%3E%3C/svg%3E\')!important;background-position:50%!important;background-size:16px!important;background-repeat:no-repeat!important;opacity:1!important}.ðŸ’™-c>:not(.ðŸ’™-i),.ðŸ’™-c[style*=visibility][style*=hidden],.ðŸ’™-cgbwa #gbwa svg,.ðŸ’™-egbwa .docs-homescreen-material-bar-enabled .modal-dialog-bg,.ðŸ’™-egbwa .docs-homescreen-material-bar-enabled .modal-dialog.docs-dialog,.ðŸ’™-hgbwa #gbwa{display:none!important}.ðŸ’™-c{width:370px!important;height:532px!important;height:calc(100vh - 80px)!important;height:var(--ðŸ’™-c-h,calc(100vh - 80px))!important;max-height:calc(100vh - 80px)!important;color-scheme:light!important;transition:none!important}.ðŸ’™-i{position:relative!important;display:block!important;width:100%!important;height:100%!important;border:0!important;visibility:visible!important}',t=o.runtime.getURL("PATH/").replace("/PATH/",""),i=t.startsWith("safari-web-extension://"),t=!i&&t.startsWith("moz-extension://");function r(){o.runtime.lastError}var s=o.tabs&&o.tabs.TAB_ID_NONE||-1;function c(t){return"number"==typeof(t=t&&t.id)?t:s}function l(){return null}function d(){return new Promise(function(n){o.tabs.getCurrent(function(t){r();var e=c(t);n(e===s?null:t)})}).catch(l)}function u(){return new Promise(function(n){o.runtime.sendMessage({method:"getCurrentTab"},function(t){r();var e=c(t);n(e===s?null:t)})}).catch(l)}var g,p,m,h,b,f,w,q,v,j,x,B,F=t,y=n.origin,E=n.href,t=n.pathname,H=o.runtime.getURL("/views/embed.html"),C=null,k=null,L=!1,M=!1,T=!1,W=!1,_=5,z=-1,I=!1,N=[];function R(t){return t?e.getComputedStyle(t).backgroundColor.replace(/ /g,""):""}function V(){var t=R(a.body);if(-1===(t=t.startsWith("rgba(")&&t.endsWith(",0)")?R(a.documentElement):t).indexOf("(")||t.startsWith("rgba("))return!1;for(var e=t.split("(")[1].split(")")[0].split(","),n=0;n<e.length;n++)if(50<parseFloat(e[n]))return!1;return!0}function U(){return p&&"none"!==e.getComputedStyle(p).display}function P(){m&&U()&&m.click()}function G(t){var e=h||a.querySelector('.ðŸ’™-i,iframe[src^="https://ogs.google."][src*="/widget/app"]');(h=e.cloneNode()).src=t,e.replaceWith(h)}function A(t,e){var n,a;I||(e={method:t,data:e,target:"embedApp",tabId:z,frameId:(t=h,"getFrameId"in o.runtime&&t?o.runtime.getFrameId(h):null),forward:F},t=e.tabId,a=o.tabs&&o.tabs.sendMessage,(0===t||0<t)&&a?o.tabs.sendMessage(t,e,{frameId:e.frameId},n):o.runtime.sendMessage(e,n))}function $(){var e=Date.now()+"-"+Math.random();try{A("ping",e)}catch(t){if((t.message||"").includes("Extension context invalidated"))return void(I=!0)}setTimeout(function(){var t;-1===N.indexOf(e)&&(t=["t="+Date.now()],v&&t.push("darkmode=1"),j&&t.push("newtab=1"),x&&t.push("hl="+x),C&&t.push("authuser="+C),k&&t.push("pageId="+k),G(H+"?"+t.join("&")))},2e3)}function J(){var t,e=h.src||"";q=e.startsWith("https://ogs.google.com/")&&e,h.className="ðŸ’™-i",h.allowTransparency=!0,h.referrerPolicy="no-referrer",h.sandbox="allow-same-origin allow-scripts allow-popups allow-popups-to-escape-sandbox",h.style.cssText="display: block !important; border: 0 !important; width: 100% !important; height: 100% !important; position: relative !important;",e=(n.pathname||"/").match(/(?:\/u\/(\d))?(?:\/b\/(\d{21}))?\//),C=e[1],k=e[2],C||k||(t=(e=n.search).match(/[&?]authuser=(\d)(?:&|$)/),e=e.match(/[&?]pageId=(\d{21})(?:&|$)/),t&&(C=t[1]),e&&(k=e[1]),C)||k||null===(e=(t=g.textContent).match(/accounts\.google\.com\/ListAccounts.{0,40}authuser=(\d)/))&&null===(e=t.match(/\/u\/(\d)\//))&&null===(e=t.match(/authuser=(\d)/))||(C=e[1]),j="about:blank"===E||"about:newtab"===y||"about:home"===y||"chrome-native://newtab"===y||"chrome-search://local-ntp"===y||"chrome-untrusted://new-tab-page"===y||"chrome://new-tab-page"===y||"chrome://new-tab-page-third-party"===y||"chrome://newtab"===y||"chrome://startpage"===y||"chrome://startpageshared"===y||"edge://newtab"===y||E.startsWith("chrome://vivaldi-webui/startpage")||-1!==E.indexOf("/components/startpage/startpage.html")||-1!==E.indexOf("/_/chrome/newtab"),t=a.documentElement.lang||"",x=!t||6<t.length?null:t.split("&")[0],(v=V())&&a.documentElement.classList.add("ðŸ’™-dgbwa"),A("newDarkMode",v),A("newPageLanguage",x),A("shareDocHeightRequest"),setTimeout(A,100,"shareDocHeightRequest"),setTimeout(A,500,"shareDocHeightRequest"),h.addEventListener("load",function(){setTimeout($,50)}),matchMedia("(prefers-color-scheme: dark)").addEventListener("change",function(){I||setTimeout(function(){var t=V();t!==v&&(v=t,a.documentElement.classList.toggle("ðŸ’™-dgbwa",v),A("newDarkMode",v))},200)})}function K(){(m=a.querySelector("#gbwa > div > a"))&&(m.removeAttribute("href"),m.addEventListener("click",function(){var t;I||(L&&(o.runtime.sendMessage({method:"cjeLandingOpen"}),g.classList.remove("ðŸ’™-ugbwa"),L=!1),t=U(),setTimeout(function(){A("popupOpenState",t)}),M?Z():"openpopup"===f&&(T?T=!1:o.runtime.sendMessage({method:"openActionPopup"},function(t){"success"===t&&(T=!0,m.click())})))}))}function Q(t){L=Boolean(t),g.classList.toggle("ðŸ’™-ugbwa",L)}function X(){W||(W=!0,(p=h.parentNode).classList.add("ðŸ’™-c"),J(),K(),a.addEventListener("click",function(){I||(p.style.visibility="hidden",P())}),o.runtime.onMessage.addListener(function(t,e){var n;return e.id!==o.runtime.id||!(e=t&&t.method)||t.forward||I||"topFrameCs"===t.target&&t.tabId===z&&("closePopup"===e?P():"popupHeight"===e?(n=0|t.data,n=n,(n=2e3<(n=(n|=0)<200?200:n)?2e3:n)!==b&&(b=n,g.style.setProperty("--ðŸ’™-c-h",n+14+"px"))):"pong"===e&&(n=t.data,N.push(n))),!1}),o.storage.local.get("cj_landing_lastupdated",function(t){Q(t&&t.cj_landing_lastupdated)}),setTimeout(tt,3e3))}var Y=["leave","override","hide","launcheronly","openpopup"];function S(t){t="override"===(f=-1===Y.indexOf(t)?"override":t)||"openpopup"===f;M=t||"launcheronly"===f,g.classList.toggle("ðŸ’™-egbwa",M),g.classList.toggle("ðŸ’™-hgbwa","hide"===f),g.classList.toggle("ðŸ’™-cgbwa",t),"hide"===f&&P()}function D(){(h=a.querySelector('.ðŸ’™-i,iframe[src^="https://ogs.google."][src*="/widget/app"]'))?w.then(function(){M&&X()}):(_*=2,B=setTimeout(D,_))}function Z(){W&&(clearTimeout(B),_=5,D())}function tt(){I||($(),setTimeout(tt,4e3))}function et(){G(q||"https://ogs.google.com/u/"+(C||0)+"/widget/app?awwd=1&gm3=1&origin="+encodeURIComponent(y)+"&cn=app")}function nt(){var t,e;(e=a.querySelector(".ðŸ’™-s"))||((e=a.createElement("style")).className="ðŸ’™-s",(t=a.head||a.documentElement).insertBefore(e,t.firstChild)),e.textContent=O,w=new Promise(function(e){o.storage.sync.get("gbwaConfig",function(t){e(t&&t.gbwaConfig)})}).then(S,S),o.storage.onChanged.addListener(function(t,e){I||(e&&"local"!==e||!M||!t.cj_landing_lastupdated||Q(t.cj_landing_lastupdated.newValue),e&&"sync"!==e)||!t.gbwaConfig||(S(t.gbwaConfig.newValue),M?Z():W&&et())}),D()}function at(){a.documentElement?(g=a.documentElement,nt()):setTimeout(at,10)}function ot(){var e;at(),e=!1,(o.tabs?i&&e?u().then(function(t){return t||d()}):d().then(function(t){return!t||i&&!1!==e&&t.url!==n.href?u():t}):u()).then(function(t){z=c(t)})}a.documentElement instanceof SVGSVGElement||y.startsWith("https://ogs.google.")||y.startsWith("https://accounts.google.")||y.startsWith("https://cello.client-channel.google.")||t.startsWith("/_/")||t.startsWith("/embed/")||t.startsWith("/widget/")||t.startsWith("/companion/")||t.startsWith("/offline/")||/[&?](bm_iid|bm_cid)=/.test(n.search)||ot()}();